{
    "sourceFile": "mobile_form_fix.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754904082237,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754904082237,
            "name": "Commit-0",
            "content": "// Mobile form fix for customer creation\r\n// Add this script to the bottom of cari-karti-olustur.php\r\n\r\n// Detect if user is on mobile device\r\nfunction isMobileDevice() {\r\n    return (typeof window.orientation !== \"undefined\") || (navigator.userAgent.indexOf('IEMobile') !== -1);\r\n}\r\n\r\n// Mobile-specific form submission fix\r\nif (isMobileDevice()) {\r\n    console.log('Mobile device detected - applying mobile form fixes');\r\n    \r\n    // Disable complex validation on mobile to prevent form submission issues\r\n    $(document).ready(function() {\r\n        // Remove submit button disabling on mobile\r\n        $(':input[type=\"submit\"]').prop('disabled', false);\r\n        \r\n        // Add mobile-specific form submission handler\r\n        $('#myForm').on('submit', function(e) {\r\n            console.log('Mobile form submission started');\r\n            \r\n            // Check required fields manually for mobile\r\n            var isValid = true;\r\n            var missingFields = [];\r\n            \r\n            // Check required text inputs\r\n            $('input[required], select[required]').each(function() {\r\n                if (!$(this).val() || $(this).val().trim() === '') {\r\n                    isValid = false;\r\n                    missingFields.push($(this).attr('name') || $(this).attr('id') || 'unnamed field');\r\n                    $(this).css('border', '2px solid red');\r\n                } else {\r\n                    $(this).css('border', '');\r\n                }\r\n            });\r\n            \r\n            // Check file requirement for new customers only\r\n            if (!$('input[name=\"cari_id\"]').length) { // New customer\r\n                var fileInput = $('input[name=\"cari_dosya[]\"]');\r\n                if (fileInput.length && fileInput.prop('required') && (!fileInput[0].files || fileInput[0].files.length === 0)) {\r\n                    isValid = false;\r\n                    missingFields.push('evrak dosyası');\r\n                    fileInput.css('border', '2px solid red');\r\n                } else if (fileInput.length) {\r\n                    fileInput.css('border', '');\r\n                }\r\n            }\r\n            \r\n            if (!isValid) {\r\n                e.preventDefault();\r\n                alert('Lütfen şu zorunlu alanları doldurun: ' + missingFields.join(', '));\r\n                return false;\r\n            }\r\n            \r\n            // Add loading indicator\r\n            var submitBtn = $(':input[type=\"submit\"]');\r\n            submitBtn.prop('disabled', true);\r\n            submitBtn.val('Kaydediliyor...');\r\n            \r\n            // Log form data for debugging\r\n            var formData = new FormData(this);\r\n            console.log('Mobile form data being submitted:');\r\n            for (var pair of formData.entries()) {\r\n                console.log(pair[0] + ': ' + pair[1]);\r\n            }\r\n            \r\n            return true;\r\n        });\r\n        \r\n        // Override AJAX validation to prevent mobile issues\r\n        $('.ajaxIller').off('change').on('change', function() {\r\n            // Simplified mobile version - just enable form submission\r\n            $(':input[type=\"submit\"]').prop('disabled', false);\r\n        });\r\n        \r\n        // Disable problematic client-side validations on mobile\r\n        $('select[name=\"cari_bireysel\"]').off('change').on('change', function() {\r\n            $(':input[type=\"submit\"]').prop('disabled', false);\r\n        });\r\n    });\r\n    \r\n    // Add mobile debugging\r\n    window.addEventListener('beforeunload', function() {\r\n        console.log('Mobile form page unloading');\r\n    });\r\n}\r\n\r\n// Add CSS fixes for mobile\r\nvar mobileCSS = `\r\n@media (max-width: 768px) {\r\n    .form-control {\r\n        font-size: 16px !important; /* Prevents zoom on iOS */\r\n        -webkit-appearance: none;\r\n        border-radius: 0;\r\n    }\r\n    \r\n    input[type=\"file\"] {\r\n        padding: 10px;\r\n        border: 1px solid #ccc;\r\n    }\r\n    \r\n    .btn[type=\"submit\"] {\r\n        padding: 15px;\r\n        font-size: 18px;\r\n        width: 100% !important;\r\n        margin-top: 20px;\r\n    }\r\n    \r\n    /* Fix for select2 on mobile */\r\n    .select2-container {\r\n        width: 100% !important;\r\n    }\r\n}\r\n`;\r\n\r\n// Inject mobile CSS\r\nif (isMobileDevice()) {\r\n    var style = document.createElement('style');\r\n    style.innerHTML = mobileCSS;\r\n    document.head.appendChild(style);\r\n}\r\n"
        }
    ]
}