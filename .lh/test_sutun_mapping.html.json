{
    "sourceFile": "test_sutun_mapping.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1758629240822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1758629240822,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"tr\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Satış Faturaları Sütun Test</title>\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\r\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\r\n</head>\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Satış Faturaları Sütun Mapping Testi</h2>\r\n        <p>Bu sayfa satış faturaları modalındaki sütun mapping'ini test eder.</p>\r\n        \r\n        <button type=\"button\" class=\"btn btn-primary\" onclick=\"testVeriMapping()\">\r\n            Test Veri Mapping\r\n        </button>\r\n        \r\n        <div id=\"testOutput\" class=\"mt-4\"></div>\r\n    </div>\r\n\r\n<script>\r\nfunction testVeriMapping() {\r\n    $.ajax({\r\n        url: 'https://crm.ilekasoft.com/muhasebe/veri_listesi_getir',\r\n        method: 'POST',\r\n        data: {\r\n            cari_id: 20436,\r\n            tablo_kodu: 'satis_faturalari',\r\n            tablo_adi: 'Satış Faturaları'\r\n        },\r\n        dataType: 'json',\r\n        success: function(response) {\r\n            console.log('API Response:', response);\r\n            \r\n            let output = '<div class=\"card\"><div class=\"card-body\">';\r\n            output += '<h5 class=\"card-title\">API Yanıtı</h5>';\r\n            output += '<pre>' + JSON.stringify(response, null, 2) + '</pre>';\r\n            \r\n            if (response.status === 'success' && response.data) {\r\n                output += '<h6 class=\"mt-4\">Sütun Mapping Kontrolü:</h6>';\r\n                output += '<table class=\"table table-sm\">';\r\n                output += '<thead><tr><th>Sütun Başlığı</th><th>Beklenen Field</th><th>Gerçek Field</th><th>Örnek Değer</th></tr></thead>';\r\n                output += '<tbody>';\r\n                \r\n                const sutunMapping = {\r\n                    'Fatura No': 'fatura_no',\r\n                    'Fatura Tarihi': 'fatura_tarihi',\r\n                    'Açıklama': 'aciklama'\r\n                };\r\n                \r\n                response.columns.forEach(function(column) {\r\n                    const beklenenField = sutunMapping[column] || column.toLowerCase().replace(' ', '_');\r\n                    const ornekVeri = response.data[0] || {};\r\n                    const gercekField = Object.keys(ornekVeri).find(key => key === beklenenField) || 'BULUNAMADI';\r\n                    const ornekDeger = ornekVeri[beklenenField] || 'Veri yok';\r\n                    \r\n                    output += '<tr>';\r\n                    output += '<td><strong>' + column + '</strong></td>';\r\n                    output += '<td>' + beklenenField + '</td>';\r\n                    output += '<td><span class=\"' + (gercekField !== 'BULUNAMADI' ? 'text-success' : 'text-danger') + '\">' + gercekField + '</span></td>';\r\n                    output += '<td>' + ornekDeger + '</td>';\r\n                    output += '</tr>';\r\n                });\r\n                \r\n                output += '</tbody></table>';\r\n            }\r\n            \r\n            output += '</div></div>';\r\n            $('#testOutput').html(output);\r\n        },\r\n        error: function(xhr, status, error) {\r\n            $('#testOutput').html('<div class=\"alert alert-danger\"><strong>Hata:</strong> ' + error + '<br><strong>Yanıt:</strong><pre>' + xhr.responseText + '</pre></div>');\r\n        }\r\n    });\r\n}\r\n</script>\r\n\r\n</body>\r\n</html>\r\n"
        }
    ]
}