{
    "sourceFile": "application/controllers/SmtpTest.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1760099488521,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1760099488521,
            "name": "Commit-0",
            "content": "<?php\r\n/**\r\n * CodeIgniter SMTP Test Controller\r\n */\r\n\r\ndefined('BASEPATH') OR exit('No direct script access allowed');\r\n\r\nclass SmtpTest extends CI_Controller {\r\n\r\n    public function __construct() {\r\n        parent::__construct();\r\n        $this->load->library('email');\r\n        $this->load->helper('destek');\r\n    }\r\n\r\n    public function index() {\r\n        echo \"<h2>CodeIgniter SMTP Test</h2>\";\r\n        \r\n        // E-posta konfigürasyonu\r\n        $mail_config = Array(\r\n            'protocol' => 'smtp',\r\n            'smtp_crypto' => 'ssl',\r\n            'smtp_host' => 'mail.ilekasoft.com',\r\n            'smtp_port' => 465,\r\n            'smtp_user' => 'ticket@ilekasoft.com',\r\n            'smtp_pass' => '0oqZknrfOw',\r\n            'charset'   => 'utf-8',\r\n            'mailtype'  => 'html',\r\n            'wordwrap' => TRUE\r\n        );\r\n\r\n        echo \"<h3>Konfigürasyon:</h3>\";\r\n        echo \"<pre>\" . print_r($mail_config, true) . \"</pre>\";\r\n\r\n        // E-posta library'yi konfigüre et\r\n        $this->email->initialize($mail_config);\r\n\r\n        // Test e-postası hazırla\r\n        $this->email->from('ticket@ilekasoft.com', 'İlekaSoft CRM Test');\r\n        $this->email->to('batuhan.kahraman@turkbelge.com.tr'); // Gerçek test e-postası\r\n        $this->email->subject('SMTP Test - ' . date('Y-m-d H:i:s'));\r\n        \r\n        $message = '\r\n        <h2>SMTP Test E-postası</h2>\r\n        <p>Bu e-posta SMTP ayarlarının çalışıp çalışmadığını test etmek için gönderilmiştir.</p>\r\n        <p><strong>Gönderim Zamanı:</strong> ' . date('Y-m-d H:i:s') . '</p>\r\n        <p><strong>Sunucu:</strong> ' . $_SERVER['HTTP_HOST'] . '</p>\r\n        <p><strong>IP:</strong> ' . $_SERVER['SERVER_ADDR'] . '</p>\r\n        ';\r\n        \r\n        $this->email->message($message);\r\n\r\n        echo \"<h3>Test E-postası Gönderiliyor...</h3>\";\r\n        echo \"<p>Gönderen: ticket@ilekasoft.com</p>\";\r\n        echo \"<p>Alıcı: batuhan.kahraman@turkbelge.com.tr</p>\";\r\n        echo \"<p>Konu: SMTP Test - \" . date('Y-m-d H:i:s') . \"</p>\";\r\n\r\n        // E-postayı gönder\r\n        if ($this->email->send()) {\r\n            echo \"<p style='color: green; font-weight: bold;'>✅ E-posta başarıyla gönderildi!</p>\";\r\n        } else {\r\n            echo \"<p style='color: red; font-weight: bold;'>❌ E-posta gönderilemedi!</p>\";\r\n            echo \"<h3>Debug Bilgileri:</h3>\";\r\n            echo \"<pre style='background: #f5f5f5; padding: 10px; white-space: pre-wrap;'>\";\r\n            echo $this->email->print_debugger();\r\n            echo \"</pre>\";\r\n        }\r\n\r\n        echo \"<hr>\";\r\n        echo \"<h3>Alternatif Konfigürasyonlar:</h3>\";\r\n        \r\n        // TLS ile test\r\n        echo \"<h4>TLS (Port 587) ile Test:</h4>\";\r\n        $tls_config = Array(\r\n            'protocol' => 'smtp',\r\n            'smtp_crypto' => 'tls',\r\n            'smtp_host' => 'mail.ilekasoft.com',\r\n            'smtp_port' => 587,\r\n            'smtp_user' => 'ticket@ilekasoft.com',\r\n            'smtp_pass' => '0oqZknrfOw',\r\n            'charset'   => 'utf-8',\r\n            'mailtype'  => 'html',\r\n            'wordwrap' => TRUE\r\n        );\r\n\r\n        $this->email->initialize($tls_config);\r\n        $this->email->from('ticket@ilekasoft.com', 'İlekaSoft CRM Test TLS');\r\n        $this->email->to('batuhan.kahraman@turkbelge.com.tr');\r\n        $this->email->subject('SMTP TLS Test - ' . date('Y-m-d H:i:s'));\r\n        $this->email->message('<p>TLS ile test e-postası - ' . date('Y-m-d H:i:s') . '</p>');\r\n\r\n        if ($this->email->send()) {\r\n            echo \"<p style='color: green;'>✅ TLS test başarılı!</p>\";\r\n        } else {\r\n            echo \"<p style='color: red;'>❌ TLS test başarısız!</p>\";\r\n            echo \"<pre style='background: #f5f5f5; padding: 10px; white-space: pre-wrap; font-size: 12px;'>\";\r\n            echo $this->email->print_debugger();\r\n            echo \"</pre>\";\r\n        }\r\n\r\n        echo \"<hr>\";\r\n        echo \"<p><a href='\" . base_url() . \"'>← Ana Sayfaya Dön</a></p>\";\r\n    }\r\n}\r\n?>"
        }
    ]
}