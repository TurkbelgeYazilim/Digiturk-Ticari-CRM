{
    "sourceFile": "application/views/fatura/satis-faturasi.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1755443239972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755497723387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2715,9 +2715,9 @@\n \t\tcounter.push(items);\r\n \r\n \t\tvar html = \"<tr>\";\r\n \r\n-\t\thtml += \"<td><input type='text' class='form-control' name='stokadi[]' id='stokadi\" + items + \"' onblur='stokKontrol(this.id)' required> </td>\";\r\n+\t\thtml += \"<td><input type='hidden' name='stokid[]' id='stokid\" + items + \"'><input type='text' class='form-control' name='stokadi[]' id='stokadi\" + items + \"' onblur='stokKontrol(this.id)' required> </td>\";\r\n \r\n \t\thtml += \"<td style='display:none'><input type='text' class='form-control' name='stokkodu[]' id='stokkodu\" + items + \"'  onblur='stokKontrol(this.id)' required></td>\";\r\n \r\n \t\t// Barkod inputu kaldırıldı\r\n"
                },
                {
                    "date": 1755500225871,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1714,11 +1714,16 @@\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Dosya yolunu düzelt - eğer zaten \"faturalar/\" ile başlıyorsa tekrarlanmasın\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya_yolu = (strpos($dosya, 'faturalar/') === 0) ? \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbase_url('assets/uploads/' . $dosya) : \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbase_url('assets/uploads/faturalar/' . $dosya);\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?= $dosya_yolu; ?>\" \r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?= base_url('assets/uploads/faturalar/' . $dosya); ?>\" \r\n-\r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   target=\"_blank\" class=\"btn btn-sm btn-primary mr-1\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-eye\"></i> Görüntüle\r\n \r\n@@ -1727,9 +1732,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if (in_array(strtolower($dosya_uzantisi), ['jpg', 'jpeg', 'png', 'gif', 'webp'])): ?>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-info\" \r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        onclick=\"previewImage('<?= base_url('assets/uploads/faturalar/' . $dosya); ?>', '<?= $dosya_adi; ?>')\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        onclick=\"previewImage('<?= $dosya_yolu; ?>', '<?= $dosya_adi; ?>')\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-search-plus\"></i> Önizleme\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n"
                },
                {
                    "date": 1756195752474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1157,14 +1157,16 @@\n \r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='number' step='0.1' class='form-control'\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='birimfiyat[]'\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='birimfiyat<?= $items ?>' required=''\r\n \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   inputmode='decimal' pattern='[0-9.,]*'\r\n+\r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_birimFiyat ?>\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n \r\n@@ -2314,17 +2316,17 @@\n \t\tswal({\r\n \r\n \t\t\ttitle: \"Bilgilendirme\",\r\n \r\n-\t\t\ttype: \"error\",\r\n+\t\t type: \"error\",\r\n \r\n-\t\t\ttext: \"Cari kodu veya cari adı kayıtlı değil, lütfen listeden seçerek devam ediniz.\",\r\n+\t\t text: \"Cari kodu veya cari adı kayıtlı değil, lütfen listeden seçerek devam ediniz.\",\r\n \r\n-\t\t\tconfirmButtonText: 'Tamam',\r\n+\t\t confirmButtonText: 'Tamam',\r\n \r\n-\t\t\tbutton: false,\r\n+\t\t button: false,\r\n \r\n-\t\t\ttimer: 5000,\r\n+\t\t timer: 5000,\r\n \r\n \t\t});\r\n \r\n \t</script>\r\n@@ -2730,9 +2732,9 @@\n \t\thtml += \"<td style='display:none'><select class='form-control' name='birim[]' id='birim\" + items + \"' required><?= $birimler ?></select></td>\";\r\n \r\n \t\thtml += \"<td><input type='number' step='0.1' class='form-control' autocomplete='off' name='miktar[]' id='miktar\" + items + \"' required='' style='width:175px;'></td>\";\r\n \r\n-\t\thtml += \"<td><input type='number' step='0.1' class='form-control'   autocomplete='off' name='birimfiyat[]' id='birimfiyat\" + items + \"' required='' ></td>\";\r\n+\t\thtml += \"<td><input type='text' class='form-control' autocomplete='off' name='birimfiyat[]' id='birimfiyat\" + items + \"' required='' inputmode='decimal' pattern='[0-9.,]*'></td>\";\r\n \r\n \t\t/*html += \"<td><input type='text' class='form-control' name='kdv[]' id='kdv\"+items+\"' readonly></td>\";*/\r\n \r\n \t\thtml += \"<td><select class='form-control' name='kdv[]' id='kdv\" + items + \"' ><option value='0' >0</option><option value='1'>1</option><option value='8' selected>8</option><option value='10' selected>10</option><option value='18'>18</option><option value='20'>20</option></select></td>\";\r\n@@ -2998,8 +3000,18 @@\n \t\t\t\t$('#birimfiyat' + items).attr('placeholder', 'Birim Fiyat (TL)');\r\n \r\n \t\t\t}\r\n \r\n+\t\t\t\r\n+\r\n+\t\t\t// Mobil optimizasyonları da uygula\r\n+\r\n+\t\t\t$('#birimfiyat' + items).attr('inputmode', 'decimal');\r\n+\r\n+\t\t\t$('#birimfiyat' + items).attr('pattern', '[0-9.]*');\r\n+\r\n+\t\t\t$('#birimfiyat' + items).attr('maxlength', '15'); // 7 rakam + 2 nokta + küsurat için yeterli\r\n+\r\n \t\t}\r\n \r\n \t}\r\n \r\n@@ -3020,10 +3032,8 @@\n \t}\r\n \r\n \r\n \r\n-\r\n-\r\n \tfunction round(value, decimals) {\r\n \r\n \t\treturn Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\r\n \r\n@@ -3272,10 +3282,8 @@\n \t}\r\n \r\n \r\n \r\n-\r\n-\r\n \tfunction deleteRow(button) {\r\n \r\n \r\n \r\n@@ -3443,19 +3451,26 @@\n \r\n \t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n \r\n \t\t\t\tvar tables = document.getElementsByTagName('table');\r\n-\r\n-\r\n-\r\n \t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n-\r\n \t\t\t\t\tresizableGrid(tables[i]);\r\n-\r\n \t\t\t\t}\r\n+\t\t\t\t\r\n+\t\t\t\t// Mobilde cari seçimi sonrası birim fiyat alanlarına özel davranış\r\n+\t\t\t\tif (window.innerWidth <= 768) {\r\n+\t\t\t\t\t// Birim fiyat alanlarını mobil için optimize et\r\n+\t\t\t\t\tsetTimeout(function() {\r\n+\t\t\t\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n+\t\t\t\t\t\t\t// Input type'ını decimal yaparak mobilde sayısal klavyeyi etkinleştir\r\n+\t\t\t\t\t\t\t$(this).attr('inputmode', 'decimal');\r\n+\t\t\t\t\t\t\t$(this).attr('pattern', '[0-9.]*');\r\n+\t\t\t\t\t\t\t// Maksimum uzunluk sınırı koy (noktalı hali için)\r\n+\t\t\t\t\t\t\t$(this).attr('maxlength', '15'); // 7 rakam + 2 nokta + küsurat için yeterli\r\n+\t\t\t\t\t\t});\r\n+\t\t\t\t\t}, 100);\r\n+\t\t\t\t}\r\n \r\n-\r\n-\r\n \t\t\t}\r\n \r\n \t\t});\r\n \r\n@@ -3513,14 +3528,25 @@\n \r\n \t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n \r\n \t\t\t\tvar tables = document.getElementsByTagName('table');\r\n-\r\n \t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n-\r\n \t\t\t\t\tresizableGrid(tables[i]);\r\n-\r\n \t\t\t\t}\r\n+\t\t\t\t\r\n+\t\t\t\t// Mobilde cari seçimi sonrası birim fiyat alanlarına özel davranış\r\n+\t\t\t\tif (window.innerWidth <= 768) {\r\n+\t\t\t\t\t// Birim fiyat alanlarını mobil için optimize et\r\n+\t\t\t\t\tsetTimeout(function() {\r\n+\t\t\t\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n+\t\t\t\t\t\t\t// Input type'ını decimal yaparak mobilde sayısal klavyeyi etkinleştir\r\n+\t\t\t\t\t\t\t$(this).attr('inputmode', 'decimal');\r\n+\t\t\t\t\t\t\t$(this).attr('pattern', '[0-9.]*');\r\n+\t\t\t\t\t\t\t// Maksimum uzunluk sınırı koy (noktalı hali için)\r\n+\t\t\t\t\t\t\t$(this).attr('maxlength', '15'); // 7 rakam + 2 nokta + küsurat için yeterli\r\n+\t\t\t\t\t\t});\r\n+\t\t\t\t\t}, 100);\r\n+\t\t\t\t}\r\n \r\n \t\t\t}\r\n \r\n \t\t});\r\n@@ -3831,76 +3857,98 @@\n \r\n \t\t\r\n \r\n \t\t// Birim fiyat formatlaması - binlik ayırıcı nokta ekleme\r\n-\r\n \t\tfunction formatNumberWithDots(value) {\r\n-\r\n \t\t\t// Sadece rakamları al\r\n-\r\n \t\t\tlet numericValue = value.toString().replace(/[^\\d]/g, '');\r\n-\r\n \t\t\t\r\n-\r\n \t\t\t// Boşsa boş döndür\r\n-\r\n \t\t\tif (numericValue === '') return '';\r\n-\r\n \t\t\t\r\n-\r\n+\t\t\t// Çok uzun sayıları sınırla (maksimum 10 hane)\r\n+\t\t\tif (numericValue.length > 10) {\r\n+\t\t\t\tnumericValue = numericValue.substring(0, 10);\r\n+\t\t\t}\r\n+\t\t\t\r\n \t\t\t// Binlik ayırıcı nokta ekle\r\n-\r\n \t\t\treturn numericValue.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\r\n-\r\n \t\t}\r\n \r\n \t\t\r\n \r\n \t\tfunction removeDotsFromNumber(value) {\r\n-\r\n \t\t\t// Noktaları kaldır ve sayısal değer döndür\r\n-\r\n \t\t\treturn value.toString().replace(/\\./g, '');\r\n-\r\n \t\t}\r\n-\r\n \t\t\r\n-\r\n-\t\t// Birim fiyat input'larına formatla event'i ekle\r\n-\r\n+\t\t// Birim fiyat input'larına formatla event'i ekle - İyileştirilmiş cursor pozisyonu\r\n \t\t$(document).on('input', 'input[name^=\"birimfiyat\"]', function() {\r\n-\r\n \t\t\tlet cursorPosition = this.selectionStart;\r\n-\r\n-\t\t\tlet originalLength = this.value.length;\r\n-\r\n+\t\t\tlet originalValue = this.value;\r\n \t\t\t\r\n-\r\n \t\t\t// Formatla\r\n+\t\t\tlet formattedValue = formatNumberWithDots(originalValue);\r\n+\t\t\t\r\n+\t\t\t// Değer değişmediyse cursor pozisyonunu değiştirme\r\n+\t\t\tif (originalValue === formattedValue) {\r\n+\t\t\t\treturn;\r\n+\t\t\t}\r\n+\t\t\t\r\n+\t\t\tthis.value = formattedValue;\r\n+\t\t\t\r\n+\t\t\t// Cursor pozisyonunu daha akıllıca ayarla\r\n+\t\t\t// Cursor'dan önceki kısmın orijinal ve formatlanmış halini karşılaştır\r\n+\t\t\tlet originalPrefix = originalValue.substring(0, cursorPosition);\r\n+\t\t\tlet numericPrefix = originalPrefix.replace(/[^\\d]/g, '');\r\n+\t\t\t\r\n+\t\t\t// Formatlanmış değerde bu rakamların nerede bittiğini bul\r\n+\t\t\tlet numericCount = 0;\r\n+\t\t\tlet newCursorPosition = 0;\r\n+\t\t\t\r\n+\t\t\tfor (let i = 0; i < formattedValue.length && numericCount < numericPrefix.length; i++) {\r\n+\t\t\t\tif (/\\d/.test(formattedValue[i])) {\r\n+\t\t\t\t\tnumericCount++;\r\n+\t\t\t\t}\r\n+\t\t\t\tnewCursorPosition = i + 1;\r\n+\t\t\t}\r\n+\t\t\t\r\n+\t\t\t// Cursor pozisyonunu sınırlar içinde tut\r\n+\t\t\tnewCursorPosition = Math.min(newCursorPosition, formattedValue.length);\r\n+\t\t\tnewCursorPosition = Math.max(newCursorPosition, 0);\r\n+\t\t\t\r\n+\t\t\t// setSelectionRange sadece text input'larda çalışır, number input'larda çalışmaz\r\n+\t\t\ttry {\r\n+\t\t\t\tif (this.type !== 'number') {\r\n+\t\t\t\t\tthis.setSelectionRange(newCursorPosition, newCursorPosition);\r\n+\t\t\t\t}\r\n+\t\t\t} catch (e) {\r\n+\t\t\t\t// Hata durumunda cursor pozisyonunu ayarlama\r\n+\t\t\t\tconsole.warn('Cursor pozisyonu ayarlanamadı:', e);\r\n+\t\t\t}\r\n+\t\t});\r\n \r\n-\t\t\tlet formattedValue = formatNumberWithDots(this.value);\r\n \r\n-\t\t\tthis.value = formattedValue;\r\n \r\n-\t\t\t\r\n+\t\t// Form submit edildiğinde noktaları kaldır\r\n \r\n-\t\t\t// Cursor pozisyonunu ayarla\r\n+\t\t$('form').on('submit', function() {\r\n \r\n-\t\t\tlet lengthDifference = formattedValue.length - originalLength;\r\n+\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n \r\n-\t\t\tthis.setSelectionRange(cursorPosition + lengthDifference, cursorPosition + lengthDifference);\r\n+\t\t\t\t// Noktalı binlik ayırıcıları kaldır, sadece sayısal değeri bırak\r\n \r\n-\t\t});\r\n+\t\t\t\tlet cleanValue = removeDotsFromNumber(this.value);\r\n \r\n-\t\t\r\n+\t\t\t\t\r\n \r\n-\t\t// Form submit edildiğinde noktaları kaldır\r\n+\t\t\t\t// Boş değilse ve geçerli bir sayıysa ayarla\r\n \r\n-\t\t$('form').on('submit', function() {\r\n+\t\t\t\tif (cleanValue && !isNaN(cleanValue)) {\r\n \r\n-\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n+\t\t\t\t\tthis.value = cleanValue;\r\n \r\n-\t\t\t\tthis.value = removeDotsFromNumber(this.value);\r\n+\t\t\t\t}\r\n \r\n \t\t\t});\r\n \r\n \t\t});\r\n@@ -3912,8 +3960,22 @@\n \t\t$(document).ready(function() {\r\n \r\n \t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n \r\n+\t\t\t\t// Input type'ını text'e çevir (eğer number ise)\r\n+\r\n+\t\t\t\tif (this.type === 'number') {\r\n+\r\n+\t\t\t\t\t$(this).attr('type', 'text');\r\n+\r\n+\t\t\t\t\t$(this).attr('inputmode', 'decimal');\r\n+\r\n+\t\t\t\t\t$(this).attr('pattern', '[0-9.,]*');\r\n+\r\n+\t\t\t\t}\r\n+\r\n+\t\t\t\t\r\n+\r\n \t\t\t\tif (this.value && this.value !== '0') {\r\n \r\n \t\t\t\t\tthis.value = formatNumberWithDots(this.value);\r\n \r\n"
                },
                {
                    "date": 1756541944230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2620,10 +2620,8 @@\n \t\t\t\t$html .= '<td><label>Banka Adı</label><input type=\"hidden\" name=\"ayarlarbanka_id[]\" id=\"ayarlarbanka_id' . $items_banka . '\" value=\"' . $itemx->ayarlarbanka_id . '\"><input type=\"text\" class=\"form-control\" name=\"ayarlar_bankaadi[]\" id=\"ayarlar_bankaadi' . $items_banka . '\" value=\"' . $itemx->ayarlar_banka_ad . '\"></td>';\r\n \r\n \t\t\t\t$html .= '<td><label>Şube</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_sube[]\" id=\"ayarlar_sube' . $items_banka . '\" value=\"' . $itemx->ayarlarbanka_subeAd . '\"></td>';\r\n \r\n-\r\n-\r\n \t\t\t\t$html .= '<td><label>Para Birimi</label><select class=\"form-control\" name=\"ayarlar_parabirimi\" id=\"ayarlar_parabirimi' . $items_banka . '\"><option value=\"1\"';\r\n \r\n \t\t\t\tif ($itemx->ayarlarbanka_paraBirim == 1) $html .= \" selected \";\r\n \r\n@@ -3163,9 +3161,13 @@\n \r\n \t\t\t\t\t\t$(\"#birimfiyat\" + i + \"\").val(birimfiyat);\r\n \r\n \t\t\t\t\t\tfiyat = miktar * birimfiyat;\r\n-\r\n+\t\t\t\t\t\t\r\n+\t\t\t\t\t\t// Desktop KDV dahil modda da toplamHidden KDV dahil olmalı\r\n+\t\t\t\t\t\tvar kdvTutari = fiyat * parseFloat(kdvoran) / 100;\r\n+\t\t\t\t\t\tvar fiyatKdvDahilDesktop = fiyat + kdvTutari;\r\n+\t\t\t\t\t\t$(\"#toplamHidden\" + i + \"\").val(fiyatKdvDahilDesktop.toFixed(2));\r\n \t\t\t\t\t}\r\n \r\n \t\t\t\t} else {\r\n \r\n@@ -3193,16 +3195,14 @@\n \r\n \t\t\t\tif (!kdvDahil) {\r\n \r\n \t\t\t\t\t$(\"#toplam\" + i + \"\").val(fiyat);\r\n-\r\n \t\t\t\t}\r\n-\r\n-\t\t\t\t$(\"#toplamHidden\" + i + \"\").val(fiyat);\r\n-\r\n-\r\n-\r\n+\t\t\t\t\r\n+\t\t\t\t// toplamHidden her zaman KDV dahil olmalı\r\n \t\t\t\tkdvHesap = fiyat * parseFloat(kdvoran) / 100;\r\n+\t\t\t\tvar fiyatKdvDahil = fiyat + kdvHesap;\r\n+\t\t\t\t$(\"#toplamHidden\" + i + \"\").val(fiyatKdvDahil.toFixed(2));\r\n \r\n \t\t\t\tkdvtop += kdvHesap;\r\n \r\n \r\n@@ -3291,9 +3291,8 @@\n \r\n \t\t\tcounter.pop();\r\n \r\n \t\t}\r\n-\r\n \t\tif (counter.length == 0) {\r\n \r\n \t\t\tcounter.push(1);\r\n \r\n@@ -3435,23 +3434,17 @@\n \r\n \t\t\t\t$(\"#eposta_bilgi_input\").val(ui.item.cari_firmaEPosta);\r\n \r\n \t\t\t\tconsole.log(\"Adres input değeri:\", $(\"#cari_adres_input\").val());\r\n+\t\r\n \r\n \r\n-\r\n \t\t\t\ttoastr.success(ui.item.value + \" cari adlı müşteriye ait bilgiler getirildi.\");\r\n-\r\n \t\t\t\t$(\"#faturaBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#faturaAltBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#checkboxDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\tvar tables = document.getElementsByTagName('table');\r\n \t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n \t\t\t\t\tresizableGrid(tables[i]);\r\n \t\t\t\t}\r\n@@ -3474,11 +3467,11 @@\n \r\n \t\t});\r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t$(function () {\r\n \r\n \t\t$(\"#tcknvkn_input\").autocomplete({\r\n \r\n@@ -3512,23 +3505,17 @@\n \r\n \t\t\t\t$(\"#eposta_bilgi_input\").val(ui.item.cari_firmaEPosta);\r\n \r\n \t\t\t\tconsole.log(\"Adres input değeri:\", $(\"#cari_adres_input\").val());\r\n+\t\r\n \r\n \r\n-\r\n \t\t\t\ttoastr.success(ui.item.value + \" cari adlı müşteriye ait bilgiler getirildi.\");\r\n-\r\n \t\t\t\t$(\"#faturaBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#faturaAltBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#checkboxDiv\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n-\r\n \t\t\t\tvar tables = document.getElementsByTagName('table');\r\n \t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n \t\t\t\t\tresizableGrid(tables[i]);\r\n \t\t\t\t}\r\n@@ -3551,11 +3538,11 @@\n \r\n \t\t});\r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t$(function () {\r\n \r\n \t\t$(\"#satis_faturaEtiketID\").autocomplete({\r\n \r\n@@ -3575,11 +3562,11 @@\n \r\n \t\t});\r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t<?php if (!$faturaDetay) {\r\n \r\n \t\techo '$(\"#tcknvkn_input\").on(\"keyup\", function () {\r\n \r\n@@ -3691,31 +3678,31 @@\n \r\n \t\thesapla();\r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t$(document).on('change', 'input[name^=\"miktar\"]', function () {\r\n \r\n \t\thesapla();\r\n \r\n \r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t$(document).on('change', 'input[name^=\"birimfiyat\"]', function () {\r\n \r\n \t\thesapla();\r\n \r\n \r\n \r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t$(document).on('change', 'input[name^=\"toplam\"]', function () {\r\n \r\n \t\thesapla();\r\n \r\n@@ -3733,11 +3720,11 @@\n \r\n \t\t\t\tvar numb = id.match(/\\d/g);\r\n \r\n \t\t\t\tnumb = numb.join(\"\");\r\n+\t\r\n \r\n \r\n-\r\n \t\t\t\tvar indirimyuzde = $(\"#indirimyuzde\" + numb + \"\").val();\r\n \r\n \t\t\t\tvar toplam = $(\"#toplam\" + numb + \"\").val();\r\n \r\n@@ -3747,11 +3734,11 @@\n \r\n \r\n \r\n \t\t\t\t$(\"#indirimtutari\" + numb + \"\").val(indirimtutari);\r\n+\t\r\n \r\n \r\n-\r\n \t\t\t\tfor (i = 1; i <= items; i++) {\r\n \r\n \t\t\t\t\tvar tutar = $(\"#indirimtutari\" + i + \"\").val();\r\n \r\n@@ -3765,21 +3752,21 @@\n \r\n \r\n \r\n \t\t\t\t$(\"#indirimtop\").html(formatter.format(indirimtop) + \" \" + paraBirimiMetin);\r\n+\t\r\n \r\n \r\n+\t\t\t\t$(\"#indirimtopHidden\").val(round((indirimtop).toFixed(3), 2));*/\r\n \r\n-\t\t\t\t$(\"#indirimtopHidden\").val(indirimtop);*/\r\n-\r\n \t\tlet id = event.target.id;\r\n \r\n \t\tvar numb = id.match(/\\d/g);\r\n \r\n \t\tnumb = numb.join(\"\");\r\n+\t\r\n \r\n \r\n-\r\n \t\tvar indirimyuzde = $(\"#indirimyuzde\" + numb + \"\").val();\r\n \r\n \t\tif (indirimyuzde == \"100\") {\r\n \r\n@@ -3805,17 +3792,17 @@\n \r\n \t\t}\r\n \r\n \t\thesapla();\r\n+\t\t\r\n \r\n \r\n \r\n \r\n-\r\n \t});\r\n+\t\r\n \r\n \r\n-\r\n \t// Mobilde birim fiyat altında toplam gösterimi\r\n \r\n \t$(document).ready(function() {\r\n \r\n@@ -3831,9 +3818,8 @@\n \r\n \t\t\t// Mobilde toplam gösterimini güncelle kaldırıldı\r\n \r\n \t\t});\r\n-\r\n \t\t\r\n \r\n \t\t// KDV checkbox değiştiğinde mobil toplamları güncelle kaldırıldı\r\n \r\n@@ -3841,9 +3827,8 @@\n \r\n \t\t\t// Mobil toplam gösterimi kaldırıldı\r\n \r\n \t\t});\r\n-\r\n \t\t\r\n \r\n \t\t// Miktar değiştiğinde de toplam hesaplaması yap\r\n \r\n@@ -3853,9 +3838,8 @@\n \r\n \t\t\t// Mobil toplam gösterimi kaldırıldı\r\n \r\n \t\t});\r\n-\r\n \t\t\r\n \r\n \t\t// Birim fiyat formatlaması - binlik ayırıcı nokta ekleme\r\n \t\tfunction formatNumberWithDots(value) {\r\n@@ -3951,9 +3935,8 @@\n \r\n \t\t\t});\r\n \r\n \t\t});\r\n-\r\n \t\t\r\n \r\n \t\t// Sayfa yüklendiğinde mevcut değerleri formatla\r\n \r\n"
                },
                {
                    "date": 1757328656349,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1059,8 +1059,10 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>KDV (%)</th>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Toplam</th>\r\n \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Kullanıcı Sayısı</th>\r\n+\r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n@@ -1241,8 +1243,22 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='number' class='form-control'\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='kullanici_sayisi[]'\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='kullanici_sayisi<?= $items ?>'\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_kullanici_sayisi ?>\"\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   min=\"0\" style=\"width:100px;\">\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-info btn-sm'\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-toggle='modal'\r\n \r\n@@ -2738,8 +2754,10 @@\n \t\thtml += \"<td><select class='form-control' name='kdv[]' id='kdv\" + items + \"' ><option value='0' >0</option><option value='1'>1</option><option value='8' selected>8</option><option value='10' selected>10</option><option value='18'>18</option><option value='20'>20</option></select></td>\";\r\n \r\n \t\thtml += \"<td><input type='hidden' name='indirimtutari[]' id='indirimtutari\" + items + \"'><input type='text' class='form-control' name='toplam[]' id='toplam\" + items + \"' readonly><input type='hidden' name='toplamHidden[]' id='toplamHidden\" + items + \"'></td>\";\r\n \r\n+\t\thtml += \"<td><input type='number' class='form-control' name='kullanici_sayisi[]' id='kullanici_sayisi\" + items + \"' min='0' style='width:100px;'></td>\";\r\n+\r\n \t\thtml += \"<td><button type='button' class='btn btn-info btn-sm' data-toggle='modal' data-target='#add_category' data-idsi='\" + items + \"' id='eklebuton\" + items + \"' ><i class='fa fa-plus'></i> Ekle</button> <button type='button' onclick='deleteRow(this);' class='btn btn-danger btn-sm' id='\" + items + \"'><i class='fa fa-trash'></i> Sil</button> </td>\";\r\n \r\n \t\thtml += \"</tr>\";\r\n \r\n"
                },
                {
                    "date": 1757398769101,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -399,20 +399,12 @@\n \t\t\t<div id=\"newRow\"></div>\r\n \r\n \r\n \r\n-\t\t\t<?php\r\n \r\n-\t\t\t$anaHesap = anaHesapBilgisi();\r\n \r\n-\t\t\t$ayarlarQ = \"SELECT * FROM ayarlar WHERE ayarlar_id = '$anaHesap' \";\r\n \r\n-\t\t\t$ayarlarExe = $this->db->query($ayarlarQ)->row();\r\n \r\n-\t\t\t?>\r\n-\r\n-\r\n-\r\n \t\t\t<div class=\"row\">\r\n \r\n \t\t\t\t<div class=\"col-md-12\">\r\n \r\n"
                },
                {
                    "date": 1757399455171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -399,12 +399,20 @@\n \t\t\t<div id=\"newRow\"></div>\r\n \r\n \r\n \r\n+\t\t\t<?php\r\n \r\n+\t\t\t$anaHesap = anaHesapBilgisi();\r\n \r\n+\t\t\t$ayarlarQ = \"SELECT * FROM ayarlar WHERE ayarlar_id = '$anaHesap' \";\r\n \r\n+\t\t\t$ayarlarExe = $this->db->query($ayarlarQ)->row();\r\n \r\n+\t\t\t?>\r\n+\r\n+\r\n+\r\n \t\t\t<div class=\"row\">\r\n \r\n \t\t\t\t<div class=\"col-md-12\">\r\n \r\n"
                },
                {
                    "date": 1757400740229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -505,9 +505,9 @@\n \t\t\t\t\t\t\t\t\t\t\t</div>\r\n \r\n \r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n+\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\" style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Adres</label>\r\n@@ -559,9 +559,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"cursor:pointer;\"><?= $ayarlarExe->ayarlar_firmaAd; ?></h5>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"card-text\"><?= $ayarlarExe->ayarlar_adres; ?></p>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"card-text\"><?= $ayarlarExe->ayarlar_vergiDairesi; ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"card-text\" style=\"display: none;\"><?= $ayarlarExe->ayarlar_vergiDairesi; ?>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tV.D. <?= $ayarlarExe->ayarlar_vergiNo; ?></p>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n@@ -665,9 +665,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\" style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Para\r\n@@ -857,9 +857,9 @@\n \t\t\t\t\t\t\t\t\t\t<div class=\"row pl-4\">\r\n \r\n \r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-4\">\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" value=\"1\"\r\n+\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-4\" style=\"display: none;\">\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" value=\"1\"\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"kdvCheck\" onchange=\"kdvCheckFunc()\"\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"kdvCheck\" style=\"width:30px;height:20px;\" checked>\r\n@@ -1501,9 +1501,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead></thead>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n@@ -1517,9 +1517,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"aratop\"><?= $faturaDetay->satis_araToplam . \" \" . $paraBirimi ?></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n@@ -1533,9 +1533,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"indirimtop\"><?= $faturaDetay->satis_indirimToplam . \" \" . $paraBirimi ?></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n@@ -1549,9 +1549,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"nettutartop\"><?= $faturaDetay->satis_netTutar . \" \" . $paraBirimi ?></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n@@ -1565,9 +1565,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"kdvtop\"><?= $faturaDetay->satis_kdvToplam . \" \" . $paraBirimi ?></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n@@ -1581,9 +1581,9 @@\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"kdvtevkifat\"><?= $faturaDetay->satis_tevkifatToplam . \" \" . $paraBirimi ?></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style=\"display: none;\">\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n \r\n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n"
                },
                {
                    "date": 1757413551308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n \t\t\t}\r\n \r\n \t\t\t\r\n \r\n-\t\t\t/* Stok Adı sütunu genişliği */\r\n+\t\t\t/* Stok Adı sütunu genişliği - 10 karakter için */\r\n \r\n \t\t\t#my_table th:nth-child(1),\r\n \r\n \t\t\t#my_table td:nth-child(1) {\r\n@@ -155,11 +155,11 @@\n \t\t\t\r\n \r\n \t\t\tinput[name^=\"miktar\"] {\r\n \r\n-\t\t\t\twidth: 60px !important;\r\n+\t\t\t\twidth: 45px !important;\r\n \r\n-\t\t\t\tmin-width: 60px !important;\r\n+\t\t\t\tmin-width: 45px !important;\r\n \r\n \t\t\t\tmargin: 0 !important;\r\n \r\n \t\t\t\theight: 32px !important;\r\n@@ -191,19 +191,19 @@\n \t\t\t}\r\n \r\n \t\t\t\r\n \r\n-\t\t\t/* Birim Fiyat sütununu genişlet */\r\n+\t\t\t/* Birim Fiyat sütununu genişlet - 8 karakter için */\r\n \r\n \t\t\t#my_table th:nth-child(5),\r\n \r\n \t\t\t#my_table td:nth-child(5) {\r\n \r\n-\t\t\t\tmin-width: 22px !important;\r\n+\t\t\t\tmin-width: 65px !important;\r\n \r\n-\t\t\t\tmax-width: 22px !important;\r\n+\t\t\t\tmax-width: 65px !important;\r\n \r\n-\t\t\t\twidth: 22px !important;\r\n+\t\t\t\twidth: 65px !important;\r\n \r\n \t\t\t\tvertical-align: middle !important;\r\n \r\n \t\t\t\toverflow: hidden !important;\r\n@@ -215,14 +215,25 @@\n \t\t\t}\r\n \r\n \t\t\t\r\n \r\n-\t\t\t/* İşlem sütunu */\r\n-\r\n+\t\t\t\r\n+\t\t\t/* Kullanıcı Sayısı sütunu - 3 karakter için */\r\n \t\t\t#my_table th:nth-child(8),\r\n-\r\n \t\t\t#my_table td:nth-child(8) {\r\n+\t\t\t\tmin-width: 25px !important;\r\n+\t\t\t\tmax-width: 25px !important;\r\n+\t\t\t\twidth: 25px !important;\r\n+\t\t\t\tvertical-align: middle !important;\r\n+\t\t\t\toverflow: hidden !important;\r\n+\t\t\t\ttext-overflow: ellipsis !important;\r\n+\t\t\t\twhite-space: nowrap !important;\r\n+\t\t\t}\r\n+\t\t\t\r\n+\t\t\t/* İşlem sütunu - operations moved to column 9 */\t\t\t#my_table th:nth-child(9),\r\n \r\n+\t\t\t#my_table td:nth-child(9) {\r\n+\r\n \t\t\t\tmin-width: 80px !important;\r\n \r\n \t\t\t\twidth: 80px !important;\r\n \r\n@@ -2694,10 +2705,18 @@\n \r\n \r\n \t});\r\n \r\n+\tfunction cariKontrol() {\r\n+\t\t// Cari hesap kontrolü fonksiyonu\r\n+\t\tvar cariSelect = document.getElementById('cari_id');\r\n+\t\tif (cariSelect && cariSelect.value == '') {\r\n+\t\t\talert('Lütfen cari hesap seçiniz.');\r\n+\t\t\treturn false;\r\n+\t\t}\r\n+\t\treturn true;\r\n+\t}\r\n \r\n-\r\n \tfunction stokKontrol(stok) {\r\n \r\n \t\tvar id = stok.match(/\\d/g);\r\n \r\n@@ -3926,12 +3945,12 @@\n \t\t\t} catch (e) {\r\n \t\t\t\t// Hata durumunda cursor pozisyonunu ayarlama\r\n \t\t\t\tconsole.warn('Cursor pozisyonu ayarlanamadı:', e);\r\n \t\t\t}\r\n+\t\t\t\r\n+\t\t\thesapla();\r\n \t\t});\r\n \r\n-\r\n-\r\n \t\t// Form submit edildiğinde noktaları kaldır\r\n \r\n \t\t$('form').on('submit', function() {\r\n \r\n@@ -3995,8 +4014,19 @@\n \t\t$('#downloadLink').attr('href', imageSrc);\r\n \t\t$('#previewModal').modal('show');\r\n \t}\r\n \r\n+\t// Feather icons güvenli başlatma\r\n+\t$(document).ready(function() {\r\n+\t\ttry {\r\n+\t\t\tif(typeof feather !== 'undefined' && feather && feather.replace) {\r\n+\t\t\t\tfeather.replace();\r\n+\t\t\t}\r\n+\t\t} catch(e) {\r\n+\t\t\tconsole.warn('Feather icons could not be initialized:', e);\r\n+\t\t}\r\n+\t});\r\n+\r\n </script>\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1758211071157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,66 @@\n \t\t/* Mobile specific styles - Miktar kutucuğunu küçült */\r\n \r\n \t\t@media (max-width: 768px) {\r\n \r\n+\t\t\t/* Mobil cihazlarda footer altında kalan kaydet butonu sorunu için minimal padding */\r\n+\r\n+\t\t\tbody {\r\n+\r\n+\t\t\t\tpadding-bottom: 25px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n+\t\t\t.main-wrapper {\r\n+\r\n+\t\t\t\tpadding-bottom: 25px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n+\t\t\t.page-wrapper {\r\n+\r\n+\t\t\t\tpadding-bottom: 35px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n+\t\t\t/* Form container için minimal padding */\r\n+\r\n+\t\t\t.content.container-fluid {\r\n+\r\n+\t\t\t\tpadding-bottom: 15px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n+\t\t\t/* Kaydet butonu container'ına minimal padding */\r\n+\r\n+\t\t\t.col-md-12.p-0 {\r\n+\r\n+\t\t\t\tpadding-bottom: 5px !important;\r\n+\r\n+\t\t\t\tmargin-bottom: 15px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n+\t\t\t/* Kaydet butonu için minimal margin */\r\n+\r\n+\t\t\t#submitBtn {\r\n+\r\n+\t\t\t\tmargin-bottom: 10px !important;\r\n+\r\n+\t\t\t}\r\n+\r\n+\t\t\t\r\n+\r\n \t\t\t/* Tablo container için horizontal scroll */\r\n \r\n \t\t\t.table-responsive {\r\n \r\n@@ -4014,8 +4072,59 @@\n \t\t$('#downloadLink').attr('href', imageSrc);\r\n \t\t$('#previewModal').modal('show');\r\n \t}\r\n \r\n+\t// Mobil cihaz kontrolü\r\n+\tfunction isMobile() {\r\n+\t\tvar userAgent = navigator.userAgent.toLowerCase();\r\n+\t\tvar isMobileDevice = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i.test(userAgent);\r\n+\t\tvar isSmallScreen = window.innerWidth <= 768;\r\n+\t\tvar isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n+\t\t\r\n+\t\treturn isMobileDevice || (isSmallScreen && isTouchDevice);\r\n+\t}\r\n+\r\n+\t// Mobil cihazlar için minimal padding uygulama\r\n+\t$(document).ready(function() {\r\n+\t\tif (isMobile()) {\r\n+\t\t\tconsole.log('Mobil cihaz tespit edildi - satis-faturasi sayfası için minimal düzenlemeler uygulanıyor');\r\n+\t\t\t\r\n+\t\t\t// Minimal padding değerleri - sadece footer altında kalmaması için\r\n+\t\t\t$('body').css({\r\n+\t\t\t\t'padding-bottom': '25px !important'\r\n+\t\t\t});\r\n+\t\t\t\r\n+\t\t\t$('.main-wrapper').css({\r\n+\t\t\t\t'padding-bottom': '25px !important'\r\n+\t\t\t});\r\n+\t\t\t\r\n+\t\t\t$('.page-wrapper').css({\r\n+\t\t\t\t'padding-bottom': '35px !important'\r\n+\t\t\t});\r\n+\t\t\t\r\n+\t\t\t// Form container için minimal padding\r\n+\t\t\t$('.content.container-fluid').css({\r\n+\t\t\t\t'padding-bottom': '15px !important'\r\n+\t\t\t});\r\n+\t\t\t\r\n+\t\t\t// Kaydet butonu container'ına minimal margin\r\n+\t\t\t$('#submitBtn').closest('.col-md-12').css({\r\n+\t\t\t\t'margin-bottom': '15px !important',\r\n+\t\t\t\t'padding-bottom': '5px !important'\r\n+\t\t\t});\r\n+\t\t\t\r\n+\t\t\t// Viewport değiştiğinde yeniden kontrol et\r\n+\t\t\t$(window).on('resize orientationchange', function() {\r\n+\t\t\t\tsetTimeout(function() {\r\n+\t\t\t\t\tif (isMobile()) {\r\n+\t\t\t\t\t\t$('body').css('padding-bottom', '25px');\r\n+\t\t\t\t\t\t$('.page-wrapper').css('padding-bottom', '35px');\r\n+\t\t\t\t\t}\r\n+\t\t\t\t}, 300);\r\n+\t\t\t});\r\n+\t\t}\r\n+\t});\r\n+\r\n \t// Feather icons güvenli başlatma\r\n \t$(document).ready(function() {\r\n \t\ttry {\r\n \t\t\tif(typeof feather !== 'undefined' && feather && feather.replace) {\r\n"
                }
            ],
            "date": 1755443239972,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n\r\n<html lang=\"tr\">\r\n\r\n<head>\r\n\r\n\t<?php $this->load->view(\"include/head-tags\"); ?>\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\"\r\n\r\n\t\t  integrity=\"sha512-vKMx8UnXk60zUwyUnUPM3HbQo8QfmNx7+ltw8Pm5zLusl1XIfwcxo8DbWCqMGKaWeNxWA8yrx5v3SaVpMvR3CA==\"\r\n\r\n\t\t  crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"/>\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css\">\r\n\r\n\t<style>\r\n\r\n\t\t.ui-autocomplete {\r\n\r\n\t\t\tz-index: 999999;\r\n\r\n\t\t\tmax-height: 200px;\r\n\r\n\t\t\toverflow-y: auto;\r\n\r\n\t\t\t/* prevent horizontal scrollbar */\r\n\r\n\t\t\toverflow-x: hidden;\r\n\r\n\t\t\t/* add padding to account for vertical scrollbar */\r\n\r\n\t\t\tpadding-right: 20px;\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t.form-group {\r\n\r\n\t\t\tmargin-bottom: 10px !important;\r\n\r\n\t\t}\r\n\r\n\t\t.card {\r\n\r\n\t\t\tmargin-bottom: 0px !important;\r\n\r\n\t\t}\r\n\r\n\t\t\t\t/* Hide Stok Kodu (Stock Code) and Birim (Unit) columns */\r\n\r\n\t\t#my_table th:nth-child(2), /* Stok Kodu header */\r\n\r\n\t\t#my_table td:nth-child(2), /* Stok Kodu data cells */\r\n\r\n\t\t#my_table th:nth-child(3), /* Birim header */\r\n\r\n\t\t#my_table td:nth-child(3) { /* Birim data cells */\r\n\r\n\t\t\tdisplay: none !important;\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t/* Mobile specific styles - Miktar kutucuğunu küçült */\r\n\r\n\t\t@media (max-width: 768px) {\r\n\r\n\t\t\t/* Tablo container için horizontal scroll */\r\n\r\n\t\t\t.table-responsive {\r\n\r\n\t\t\t\toverflow-x: auto !important;\r\n\r\n\t\t\t\t-webkit-overflow-scrolling: touch;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Tablo minimum genişliği */\r\n\r\n\t\t\t#my_table {\r\n\r\n\t\t\t\tmin-width: 600px !important;\r\n\r\n\t\t\t\twidth: auto !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Tablo hücrelerinin vertical alignment'ını düzenle */\r\n\r\n\t\t\t#my_table td,\r\n\r\n\t\t\t#my_table th {\r\n\r\n\t\t\t\tvertical-align: middle !important;\r\n\r\n\t\t\t\tpadding: 8px 4px !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Stok Adı sütunu genişliği */\r\n\r\n\t\t\t#my_table th:nth-child(1),\r\n\r\n\t\t\t#my_table td:nth-child(1) {\r\n\r\n\t\t\t\tmin-width: 12px !important;\r\n\r\n\t\t\t\tmax-width: 18px !important;\r\n\r\n\t\t\t\twidth: 18px !important;\r\n\r\n\t\t\t\tvertical-align: middle !important;\r\n\r\n\t\t\t\toverflow: hidden !important;\r\n\r\n\t\t\t\ttext-overflow: ellipsis !important;\r\n\r\n\t\t\t\twhite-space: nowrap !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Miktar sütunu */\r\n\r\n\t\t\t#my_table th:nth-child(4),\r\n\r\n\t\t\t#my_table td:nth-child(4) {\r\n\r\n\t\t\t\tmin-width: 12px !important;\r\n\r\n\t\t\t\tmax-width: 18px !important;\r\n\r\n\t\t\t\twidth: 18px !important;\r\n\r\n\t\t\t\tvertical-align: middle !important;\r\n\r\n\t\t\t\toverflow: hidden !important;\r\n\r\n\t\t\t\ttext-overflow: ellipsis !important;\r\n\r\n\t\t\t\twhite-space: nowrap !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\tinput[name^=\"miktar\"] {\r\n\r\n\t\t\t\twidth: 60px !important;\r\n\r\n\t\t\t\tmin-width: 60px !important;\r\n\r\n\t\t\t\tmargin: 0 !important;\r\n\r\n\t\t\t\theight: 32px !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* KDV (%) sütununu mobilde gizle */\r\n\r\n\t\t\t#my_table th:nth-child(6), /* KDV (%) header */\r\n\r\n\t\t\t#my_table td:nth-child(6) { /* KDV (%) data cells */\r\n\r\n\t\t\t\tdisplay: none !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Toplam sütununu mobilde gizle */\r\n\r\n\t\t\t#my_table th:nth-child(7), /* Toplam header */\r\n\r\n\t\t\t#my_table td:nth-child(7) { /* Toplam data cells */\r\n\r\n\t\t\t\tdisplay: none !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Birim Fiyat sütununu genişlet */\r\n\r\n\t\t\t#my_table th:nth-child(5),\r\n\r\n\t\t\t#my_table td:nth-child(5) {\r\n\r\n\t\t\t\tmin-width: 22px !important;\r\n\r\n\t\t\t\tmax-width: 22px !important;\r\n\r\n\t\t\t\twidth: 22px !important;\r\n\r\n\t\t\t\tvertical-align: middle !important;\r\n\r\n\t\t\t\toverflow: hidden !important;\r\n\r\n\t\t\t\ttext-overflow: ellipsis !important;\r\n\r\n\t\t\t\twhite-space: nowrap !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* İşlem sütunu */\r\n\r\n\t\t\t#my_table th:nth-child(8),\r\n\r\n\t\t\t#my_table td:nth-child(8) {\r\n\r\n\t\t\t\tmin-width: 80px !important;\r\n\r\n\t\t\t\twidth: 80px !important;\r\n\r\n\t\t\t\tvertical-align: middle !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Birim fiyat input'unu düzenle */\r\n\r\n\t\t\tinput[name^=\"birimfiyat\"] {\r\n\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\tmargin: 0 !important;\r\n\r\n\t\t\t\twidth: 100% !important;\r\n\r\n\t\t\t\theight: 32px !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Mobilde tüm input alanlarının tutarlı olması için */\r\n\r\n\t\t\t#my_table input[type=\"text\"],\r\n\r\n\t\t\t#my_table input[type=\"number\"],\r\n\r\n\t\t\t#my_table select {\r\n\r\n\t\t\t\theight: 32px !important;\r\n\r\n\t\t\t\tmargin: 0 !important;\r\n\r\n\t\t\t\tpadding: 4px 8px !important;\r\n\r\n\t\t\t\tfont-size: 12px !important;\r\n\r\n\t\t\t\tborder: 1px solid #ddd !important;\r\n\r\n\t\t\t\tborder-radius: 4px !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\t/* Buton boyutlarını küçült */\r\n\r\n\t\t\t#my_table .btn {\r\n\r\n\t\t\t\tfont-size: 11px !important;\r\n\r\n\t\t\t\tpadding: 2px 4px !important;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t</style>\r\n\r\n\r\n\r\n\t<script>\r\n\r\n\t\tvar formatter = new Intl.NumberFormat('tr-TR');\r\n\r\n\t\tvar items = 0;\r\n\r\n\t\tvar counter = [];\r\n\r\n\t\tvar paraBirimiMetin = \"TL\";\r\n\r\n\t\tvar items_iade = 0;\r\n\r\n\t\tvar counter_iade = [];\r\n\r\n\t\tvar items_banka = 0;\r\n\r\n\t\tvar counter_banka = [];\r\n\r\n\t\tvar checkboxbanka = 0;\r\n\r\n\t</script>\r\n\r\n</head>\r\n\r\n<body>\r\n\r\n\r\n\r\n<?php\r\n\r\n\r\n\r\n$firmaID = getirFirma();\r\n\r\n$firma_ID = $firmaID->ayarlar_id;\r\n\r\n\r\n\r\n$modulSorgula = modulSorgula($firma_ID, 1);\r\n\r\n?>\r\n\r\n<!-- Main Wrapper -->\r\n\r\n<div class=\"main-wrapper\">\r\n\r\n\t<!-- Header -->\r\n\r\n\t<?php $this->load->view(\"include/header\"); ?>\r\n\r\n\t<!-- /Header -->\r\n\r\n\r\n\r\n\t<!-- Sidebar -->\r\n\r\n\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n\r\n\t<!-- /Sidebar -->\r\n\r\n\r\n\r\n\t<!-- Page Wrapper -->\r\n\r\n\t<div class=\"page-wrapper\">\r\n\r\n\t\t<div class=\"content container-fluid\">\r\n\r\n\r\n\r\n\t\t\t<!-- Page Header -->\r\n\r\n\t\t\t<div class=\"page-header\">\r\n\r\n\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t<div class=\"col-sm-10\">\r\n\r\n\t\t\t\t\t\t<h3 class=\"page-title\">Satış Sözleşmesi Oluştur</h3>\r\n\r\n\t\t\t\t\t\t<ul class=\"breadcrumb\">\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url(); ?>\">Anasayfa</a></li>\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\">Sözleşme</li>\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item active\">Satış Sözleşmesi Oluştur</li>\r\n\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"d-flex justify-content-end text-align-center col-sm-2\">\r\n\r\n\t\t\t\t\t\t<a class=\"btn btn-outline-light\" href=\"javascript:history.back()\"><i class=\"fa fa-history\"></i>\r\n\r\n\t\t\t\t\t\t\t<br>Önceki Sayfa</a>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- /Page Header -->\r\n\r\n\r\n\r\n\t\t\t<div id=\"newRow\"></div>\r\n\r\n\r\n\r\n\t\t\t<?php\r\n\r\n\t\t\t$anaHesap = anaHesapBilgisi();\r\n\r\n\t\t\t$ayarlarQ = \"SELECT * FROM ayarlar WHERE ayarlar_id = '$anaHesap' \";\r\n\r\n\t\t\t$ayarlarExe = $this->db->query($ayarlarQ)->row();\r\n\r\n\t\t\t?>\r\n\r\n\r\n\r\n\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t<div class=\"card\">\r\n\r\n\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\tif ($faturaDetay) {//düzenle?>\r\n\r\n\t\t\t\t\t\t\t<form action=\"<?= base_url(\"fatura/satisFaturasiGuncelle/\"); ?>\" method=\"POST\" id=\"myForm\" enctype=\"multipart/form-data\">\r\n\r\n\t\t\t\t\t\t\t\t<?php }\r\n\r\n\t\t\t\t\t\t\t\telse{//ekle\r\n\r\n\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t<form action=\"<?= base_url(\"fatura/satisFaturasiOlustur\"); ?>\" method=\"POST\"\r\n\r\n\t\t\t\t\t\t\t\t\t  id=\"myForm\" enctype=\"multipart/form-data\">\r\n\r\n\t\t\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t?>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"satis_id\" value=\"<?= $faturaDetay->satis_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"satis_cariID\" id=\"cari_id\" value=\"<?= $cari->cari_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"ch_id\" id=\"ch_id\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_cariHareketiID; ?>\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" class=\"form-control\" name=\"cari_kodu\" id=\"kod_input\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   required=\"\" value=\"<?= $cari->cari_kodu ?>\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-7\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Cari TCKN/VKN Veya cari\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAdı</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-8\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_tcknvkn\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"tcknvkn_input\" required=\"\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   placeholder=\"Cari tckn/vkn veya cari adı yazmaya başlayıp, listeden seçiniz.\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $cari_value ?>\" onblur=\"cariKontrol();\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-1 p-0 mt-2\" id=\"cariEkleBtn\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t style=\"display: none;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript(0);\" class=\"col-8 border-0 p-2 text-center\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   style=\"background-color: forestgreen;color:#fff;font-size:14px;border-radius: 5px;\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   data-toggle='modal' data-target='#cariEkle'><i\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"fa fa-user-plus\"></i></a>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Adres</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-8\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <input type=\"text\" class=\"form-control\" name=\"\" id=\"cari_adres_input\" readonly> -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea class=\"form-control\" name=\"\" id=\"cari_adres_input\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  readonly=\"\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  style=\"resize: none; background-color: #f8f9fa;\"><?= $cari->cari_adres ?></textarea>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-5\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"card\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row no-gutters\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex col-sm-5 justify-content-center align-items-center\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if ($ayarlarExe->ayarlar_logoName) { ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"card-img\" alt=\"logo\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t src=\"<?= base_url(); ?>assets/bulut/logo/<?= $ayarlarExe->ayarlar_logoName; ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php } ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-7\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 class=\"card-title\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"cursor:pointer;\"><?= $ayarlarExe->ayarlar_firmaAd; ?></h5>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"card-text\"><?= $ayarlarExe->ayarlar_adres; ?></p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"card-text\"><?= $ayarlarExe->ayarlar_vergiDairesi; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tV.D. <?= $ayarlarExe->ayarlar_vergiNo; ?></p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row col-md-12 border-top pt-4\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t id=\"faturaBilgisiDiv\" <?php if (!$faturaDetay) echo \"style='display:none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-7\">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Sözleşme No <span style=\"color: red;\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-9\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"satis_faturaNo\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   required=\"\" autocomplete=\"off\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_faturaNo ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div><div class=\"col-md-12\" style=\"display: none;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Tip</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-9\" id=\"satis_faturaTip_div\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" name=\"satis_faturaTip\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"satis_faturaTip\" required=\"\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"1\" <?php if ($faturaDetay->satis_earsivfaturaTip == 1) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSATIŞ\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"2\" <?php if ($faturaDetay->satis_earsivfaturaTip == 2) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tİADE\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"3\" <?php if ($faturaDetay->satis_earsivfaturaTip == 3) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTEVKİFAT\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"4\" <?php if ($faturaDetay->satis_earsivfaturaTip == 4) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tİSTİSNA\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"5\" <?php if ($faturaDetay->satis_earsivfaturaTip == 5) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tİADE-İSTİSNA\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"6\" <?php if ($faturaDetay->satis_earsivfaturaTip == 6) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tÖZEL MATRAH\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Para\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBirimi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-5\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form control select\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"satis_paraBirimi\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"satis_paraBirimi\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"1\" <?php if ($faturaDetay->satis_paraBirimi == 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"selected\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$paraBirimi = \"TL\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTürk Lirası\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"2\" <?php if ($faturaDetay->satis_paraBirimi == 2) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"selected\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$paraBirimi = \"USD\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAmerikan Doları\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"3\" <?php if ($faturaDetay->satis_paraBirimi == 3) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"selected\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$paraBirimi = \"EUR\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEuro\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"4\" <?php if ($faturaDetay->satis_paraBirimi == 4) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"selected\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$paraBirimi = \"GBP\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tİngiliz Sterlini\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-4\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"satis_guncelKur\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"satis_guncelKur\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   class=\"form-control\" placeholder=\"Döviz kuru\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if ($faturaDetay->satis_guncelKur == null) echo 'style=\"display:none;\"'; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_guncelKur ?>\"/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-5\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\"><!--Düzenleme-->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTarihi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-9\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"datepicker form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"satis_faturaTarihi\" autocomplete=\"off\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   required=\"\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= getirBugun(); ?>\"/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\"><!--Düzenleme-->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSaati</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-9\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"satis_faturaSaati\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   autocomplete=\"off\" required=\"\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= getirSaat(); ?>\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"datetimepicker\"/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\" style=\"display: none;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"col-sm-3 text-sm-left pt-2\">Etiket</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-sm-9\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\"  id=\"satis_faturaEtiketID\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"satis_faturaEtiketID\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   autocomplete=\"off\"     placeholder=\"Etiket adını yazmaya başlayıp, listeden seçiniz.\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $etiket->etiket_adi ?>\" onblur=\"etiketKontrol();\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   />\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" class=\"form-control\" name=\"etiket_id\" id=\"etiket_id\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    value=\"<?= $etiket->etiket_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row mt-4 mb-4 p-4 border-top border-bottom\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t id=\"checkboxDiv\"<?php if (!$faturaDetay) echo \"style='display:none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"row pl-4\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-4\">\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" value=\"1\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"kdvCheck\" onchange=\"kdvCheckFunc()\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"kdvCheck\" style=\"width:30px;height:20px;\" checked>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label ml-3\" for=\"kdvCheck\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tKDV Dahil\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t id=\"iade_fatura_bilgi\" <?php if (empty($iadeFaturalari)) echo 'style=\"display: none;\"'; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">İade Fatura Bilgisi </h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"iade_count\" id=\"iade_count\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table table-bordered custom-table mb-0\" id=\"my_table\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody id=\"tbody_iade\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$itemsIade = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ($iadeFaturalari as $itemIade) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$itemsIade++; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>Numarası</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='iadenumara[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='iadenumara<?= $itemsIade ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $itemIade->fatura_numarasi ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>Tarihi</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='date' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='iadetarih[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='iadetarih<?= $itemsIade ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $itemIade->tarih ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-info btn-sm'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick='addItemIade()'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-plus'></i> Ekle\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' onclick='deleteRowIade(this);'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass='btn btn-danger btn-sm'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='<?= $itemsIade ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-trash'></i> Sil\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems_iade++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter_iade.push(items_iade);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"iade_count\").value = items_iade;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t id=\"stokBilgisiDiv\" <?php if (!$faturaDetay) echo \"style='display:none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">Stok Bilgisi <i\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"fa fa-info-circle fa-xs text-info\" data-toggle=\"tooltip\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-placement=\"right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Tablonun istediğiniz kenarından tutup büyütme ve küçültme işlemi yapabilirsiniz.\"></i>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"btn btn-success btn-sm\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t   onclick=\"addItem();\" style=\"float:right;\"><i class=\"fa fa-plus\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tYeni\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSatır Ekle</a>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table table-bordered custom-table mb-0\" id=\"my_table\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Stok Adı</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Stok Kodu</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <th>Barkod</th> Barkod başlığı kaldırıldı -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Birim</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Miktar</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Birim Fiyat <span id=\"birimFiyatParaBirimi\">(TL)</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>KDV (%)</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Toplam</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th></th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody id=\"tbody\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$items = 0;\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ($stok as $item) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$items++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tevkifatVal = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tevkifatOran = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ($item->satisStok_tevkifat_id != 0) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$sqlTevkifat = \"select * from tevkifatKodlari inner join satisFaturasiStok on tevkifat_id=satisStok_tevkifat_id where satisStok_id=\" . $item->satisStok_id;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tevkifatExe = $this->db->query($sqlTevkifat)->row();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tevkifatVal = $tevkifatExe->tevkifat_orani . '|' . $tevkifatExe->tevkifat_id;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tevkifatOran = $tevkifatExe->tevkifat_orani;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"satisFaturasiStok_id[]\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_id; ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='stokadi[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='stokadi<?= $items ?>' readonly\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->stok_ad ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='stokkodu[]' id='stokkodu<?= $items ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   readonly value=\"<?= $item->stok_kodu ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Barkod inputları kaldırıldı -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class='form-control' name='birim[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='birim<?= $items ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='0'>Birim</option><?= $birimler ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='number' step='0.1' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='miktar[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='miktar<?= $items ?>' required=''\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   style='width:175px;'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_miktar ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='number' step='0.1' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='birimfiyat[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='birimfiyat<?= $items ?>' required=''\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_birimFiyat ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class='form-control' name='kdv[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='kdv<?= $items ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='0' <?php if ($item->satisStok_kdv == 0) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t0\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='1' <?php if ($item->satisStok_kdv == 1) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='8' <?php if ($item->satisStok_kdv == 8) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t8\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='10' <?php if ($item->satisStok_kdv == 10) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t10\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='18' <?php if ($item->satisStok_kdv == 18) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t18\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='20' <?php if ($item->satisStok_kdv == 20) echo \"selected\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t20\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='hidden' name='indirimtutari[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='indirimtutari<?= $items ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='toplam[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='toplam<?= $items ?>' readonly\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_indirimlifiyat ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='hidden' name='toplamHidden[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='toplamHidden<?= $items ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $item->satisStok_indirimlifiyat ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' class='btn btn-info btn-sm'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-toggle='modal'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-target='#add_category'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-idsi='<?= $items ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='eklebuton<?= $items ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-plus'></i> Ekle\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type='button' onclick='deleteRow(this);'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass='btn btn-danger btn-sm'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='<?= $items ?>'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class='fa fa-trash'></i> Sil\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td id='indirimytd<?= $items ?>' <?php if ($item->satisStok_satirIskonto == 0) echo \"style='display: none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>İndirim (%)</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='number' step='0.1' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   placeholder='İndirim (%)' name='indirimyuzde[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='indirimyuzde<?= $items ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if ($item->satisStok_indirimTutari != 0) echo ' value=\"' . $item->satisStok_indirimTutari . '\"'; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td id='tevkifatselecttd<?= $items ?>' <?php if ($item->satisStok_tevkifat_id == 0) echo \"style='display: none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Tevkifat</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select name='tevkifat[]' id='tevkifat<?= $items ?>'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonchange='tevkifat(this,<?= $items ?>)'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value='0'>Seçiniz\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</option><?php echo $tevkifat; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById('tevkifat<?= $items ?>').value = '<?= $tevkifatVal ?>';\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td id='tevkifattexttd<?= $items ?>' <?php if ($item->satisStok_tevkifat_id == 0) echo \"style='display: none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Tevkifat Oranı(%)</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type='text' class='form-control'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   name='tevkifat_oran[]'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id='tevkifat_oran<?= $items ?>' readonly\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   placeholder='Tevkifat Oranı(%)'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $tevkifatOran * 100 ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcounter.push(items);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"birim\" + items).value = <?= $item->stok_birimID ?>;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"birim\" + items).style.pointerEvents = \"none\";\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"birim\" + items).style.backgroundColor = \"#e9ecef\";\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"vergiMuafiyet\" <?php if ($faturaDetay->satis_vergiMuafiyetSebep == \"\") echo 'style=\"display: none;\"'; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">VERGİ MUAFİYET </h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table custom-table mb-0\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"width:5%;\"><label>Vergi Muafiyet Sebebi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"vergiMuafiyet_sebep\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   id=\"vergiMuafiyet_sebep\" class=\"form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_vergiMuafiyetSebep ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"istisna_table\" <?php if ($faturaDetay->satis_istisna_id == 0) echo 'style=\"display: none;\"'; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">VERGİ MUAFİYET </h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"font-style:italic;color:red;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t! İhracat faturasında 301 nolu kodu kullanız . .<br>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t! İhracat kayıtlı faturalarda 701 , 702 veya 703 nolu kodlar kullanız . .\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table custom-table mb-0\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td style=\"width:5%;\"><label>İstisna Sebebi</label></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" name='istisna_sebebi'\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid='istisna_sebebi'>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"0\">Seçiniz</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $istisna; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t id=\"bankabilgileri\" style=\"display: none;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">Banka Bilgileri</h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"bankaCount\" id=\"bankaCount\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table table-bordered custom-table mb-0\" id=\"my_table\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody id=\"tbody_ayarlarbanka\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table table-stripped table-center table-hover\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<thead></thead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Ara Toplam</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"aratop\"><?= $faturaDetay->satis_araToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Toplam İskonto(İndirim)</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"indirimtop\"><?= $faturaDetay->satis_indirimToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Net Tutar(Matrah)</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"nettutartop\"><?= $faturaDetay->satis_netTutar . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Hesaplanan KDV</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"kdvtop\"><?= $faturaDetay->satis_kdvToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Hesaplanan KDV Tevkifat</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"kdvtevkifat\"><?= $faturaDetay->satis_tevkifatToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Vergiler Dahil Ödenecek Tutar</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"vergidahil\"><?= $faturaDetay->satis_vergiDahilToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\">Genel Toplam</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-right\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"geneltop\"><?= $faturaDetay->satis_genelToplam . \" \" . $paraBirimi ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- <div class=\"float-right\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAra Toplam: <span id=\"aratop\"\tstyle=\"font-weight: bold;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"margin-right:20px;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tKDV: <span id=\"kdvtop\" style=\"font-weight: bold;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"margin-right:20px;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tGenel Toplam: <span id=\"geneltop\" style=\"font-weight: bold;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"margin-right:10px;\"></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div> -->\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t id=\"faturaAltBilgisiDiv\" <?php if (!$faturaDetay) echo \"style='display:none;'\"; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 class=\"card-title mt-4\">Ek Bilgiler</h4>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Açıklama</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea class=\"form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  name=\"satis_aciklama\"><?= $faturaDetay->satis_aciklama ?></textarea>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t<!-- Dosya Yükleme Alanı -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Satış sözleşmesini lütfen buraya yükleyiniz <span style=\"color: red;\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if (isset($faturaDetay) && !empty($faturaDetay->satis_dosya)): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Mevcut Dosyalar -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info mb-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h6><i class=\"fa fa-info-circle\"></i> Yüklü Dosyalar:</h6>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosyalar = explode(',', $faturaDetay->satis_dosya);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya_sayisi = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ($dosyalar as $dosya): \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya = trim($dosya);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!empty($dosya)):\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya_sayisi++;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya_uzantisi = pathinfo($dosya, PATHINFO_EXTENSION);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$dosya_adi = pathinfo($dosya, PATHINFO_BASENAME);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center border-bottom py-2\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex align-items-center\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if (in_array(strtolower($dosya_uzantisi), ['jpg', 'jpeg', 'png', 'gif', 'webp'])): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-image text-success mr-2\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php elseif (strtolower($dosya_uzantisi) == 'pdf'): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file-pdf text-danger mr-2\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file text-info mr-2\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span><?= $dosya_adi; ?></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?= base_url('assets/uploads/faturalar/' . $dosya); ?>\" \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   target=\"_blank\" class=\"btn btn-sm btn-primary mr-1\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-eye\"></i> Görüntüle\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if (in_array(strtolower($dosya_uzantisi), ['jpg', 'jpeg', 'png', 'gif', 'webp'])): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-info\" \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        onclick=\"previewImage('<?= base_url('assets/uploads/faturalar/' . $dosya); ?>', '<?= $dosya_adi; ?>')\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-search-plus\"></i> Önizleme\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tendif;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tendforeach; \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">Toplam <?= $dosya_sayisi; ?> dosya yüklenmiş</small>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"file\" class=\"form-control\" name=\"fatura_dosya[]\" multiple accept=\"*/*\" <?= (!isset($faturaDetay) || empty($faturaDetay->satis_dosya)) ? 'required' : ''; ?>>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php if (isset($faturaDetay) && !empty($faturaDetay->satis_dosya)): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">Yeni dosya seçerseniz, mevcut dosyalar değiştirilecektir.</small>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- /Dosya Yükleme Alanı -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12 p-0\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-danger\" style=\"width:100%;\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"submitBtn\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tKaydet\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"aratopHidden\" name=\"aratopHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_araToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"kdvtopHidden\" name=\"kdvtopHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_kdvToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"geneltopHidden\" name=\"geneltopHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_genelToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"vergidahilHidden\" name=\"vergidahilHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_vergiDahilToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"indirimtopHidden\" name=\"indirimtopHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_indirimToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"tevkifattopHidden\" name=\"tevkifattopHidden\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_tevkifatToplam ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" id=\"netTutarInput\" name=\"netTutarInput\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   value=\"<?= $faturaDetay->satis_netTutar ?>\">\r\n\r\n\t\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n\t<!-- /Page Wrapper -->\r\n\r\n\r\n\r\n</div>\r\n\r\n<!-- /Main Wrapper -->\r\n\r\n\r\n\r\n<div id=\"edit_category\" class=\"modal custom-modal fade\" role=\"dialog\">\r\n\r\n\t<div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n\r\n\t\t<div class=\"modal-content\">\r\n\r\n\t\t\t<div class=\"modal-header\">\r\n\r\n\t\t\t\t<h5 class=\"modal-title\">Stok Ekle</h5>\r\n\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\r\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\r\n\t\t\t\t</button>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"modal-body\">\r\n\r\n\t\t\t\t<form action=\"#\" method=\"POST\">\r\n\r\n\t\t\t\t\t<input class=\"form-control\" type=\"hidden\" id=\"idsi\" name=\"id\">\r\n\r\n\t\t\t\t\t<input class=\"form-control\" type=\"hidden\" id=\"stokID\" name=\"stokID\">\r\n\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t<label>Stok Adına Göre <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"text\" id=\"stokAdi\" name=\"stokAdi\" required=\"\"/>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t<label>Stok Koduna Göre <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"text\" id=\"stokKodu\" name=\"stokKodu\" required=\"\"/>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<div class=\"submit-section\">\r\n\r\n\t\t\t\t\t\t<!-- <button class=\"btn btn-danger submit-btn\">Seç</button> -->\r\n\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Kapat</button>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</form>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n<div id=\"cariEkle\" class=\"modal fade bd-example-modal-lg\" tabindex=\"-1\" role=\"dialog\"\r\n\r\n\t aria-labelledby=\"myLargeModalLabel\" aria-hidden=\"true\">\r\n\r\n\t<div class=\"modal-dialog modal-lg\">\r\n\r\n\t\t<div class=\"modal-content\">\r\n\r\n\t\t\t<div class=\"modal-header\">\r\n\r\n\t\t\t\t<h5 class=\"modal-title\">Cari Ekle</h5>\r\n\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\r\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\r\n\t\t\t\t</button>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"modal-body\">\r\n\r\n\t\t\t\t<form action=\"<?= base_url(\"cari/yeniCariKartiOlustur\"); ?>\" method=\"POST\" id=\"myForm\">\r\n\r\n\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t<div class=\"form-group col-md-12\">\r\n\r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"page\" value=\"satisfatura\">\r\n\r\n\t\t\t\t\t\t\t<label>Cari Tipi</label>\r\n\r\n\t\t\t\t\t\t\t<select class=\"select\" name=\"cari_bireysel\" required=\"\" id=\"cariBireysel\">\r\n\r\n\t\t\t\t\t\t\t\t<option value=\"\">Seçiniz...</option>\r\n\r\n\t\t\t\t\t\t\t\t<option value=\"1\">Bireysel Müşteri</option>\r\n\r\n\t\t\t\t\t\t\t\t<option value=\"0\">Kurumsal Müşteri</option>\r\n\r\n\t\t\t\t\t\t\t\t<option value=\"2\">Diğer</option>\r\n\r\n\t\t\t\t\t\t\t</select>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cari_alias_pk\" id=\"alias_pk\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"row\" style=\"display: none;\" id=\"cari_input\">\r\n\r\n\t\t\t\t\t\t<div class=\"row p-3\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>TCKN / VKN</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" required\r\n\r\n\t\t\t\t\t\t\t\t\t\t   name=\"cari_vergiNumarasi\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   oninput=\"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   maxlength=\"11\" id=\"vergiNumarasi\" autocomplete=\"off\"><img\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tsrc=\"/assets/img/Eclipse-1s-200px.gif\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"position: absolute; right:15px; bottom: 95px; width:40px; display:none;\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"loading-image\"/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>Vergi Dairesi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_vergiDairesi\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   id=\"vergiDairesi\" autocomplete=\"off\" required=\"\"/>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>Cari Kodu</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_kodu\" id=\"cari_kodu\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   required=\"\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   autocomplete=\"off\" required minlength=\"3\">\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>Cari Adı</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_ad\" required\r\n\r\n\t\t\t\t\t\t\t\t\t\t   autocomplete=\"off\" id=\"cariAd\">\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>Cari Grup</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<select class=\"select\" name=\"cari_cariGrupKoduID\" id=\"cariGrupKodu\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<option value=\"0\">Seçiniz...</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<?php foreach ($cariGruplari as $cg) { ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $cg->cariGrup_id ?>\"><?= $cg->cariGrup_kodu; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t(<?= $cg->cariGrup_ad; ?>)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<?php } ?>\r\n\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\" id=\"c_soyad\" style=\"display: none;\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>Cari Soyadı</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_soyad\" id=\"cariSoyad\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t   autocomplete=\"off\">\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<h4 class=\"card-title mt-4\">Cari İletişim Bilgileri</h4>\r\n\r\n\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t<div class=\"col-md-6\">\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<?php\r\n\r\n\t\t\t\t\t\t\tif ($_iller != false):\r\n\r\n\t\t\t\t\t\t\t\techo '<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label>İl</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<select id=\"il\" name=\"cari_il\" data-plugin-selectTwo class=\"select ajaxIller\" required>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Seçiniz</option>';\r\n\r\n\t\t\t\t\t\t\t\tforeach ($_iller as $item) {\r\n\r\n\t\t\t\t\t\t\t\t\techo '<option value=\"' . $item->id . '\">' . $item->il . '</option>';\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\techo '</select></div>';\r\n\r\n\t\t\t\t\t\t\telse:\r\n\r\n\t\t\t\t\t\t\t\techo 'Kayıtlı İl Bulunamadı..!';\r\n\r\n\t\t\t\t\t\t\tendif;\r\n\r\n\t\t\t\t\t\t\t?>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t<label>Web sitesi</label>\r\n\r\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_websitesi\"\r\n\r\n\t\t\t\t\t\t\t\t\t   autocomplete=\"off\">\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t<label>Firma e-Posta</label>\r\n\r\n\t\t\t\t\t\t\t\t<input type=\"email\" class=\"form-control\" name=\"cari_firmaEPosta\"\r\n\r\n\t\t\t\t\t\t\t\t\t   autocomplete=\"off\" id=\"cari_eposta\">\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t<label>Firma Telefon</label>\r\n\r\n\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" name=\"cari_firmaTelefon\"\r\n\r\n\t\t\t\t\t\t\t\t\t   autocomplete=\"off\" id=\"cari_telefon\"\r\n\r\n\t\t\t\t\t\t\t\t\t   oninput=\"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);\"\r\n\r\n\t\t\t\t\t\t\t\t\t   maxlength=\"10\">\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"col-md-6\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"ilceler\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t<label>İlçe</label>\r\n\r\n\t\t\t\t\t\t\t\t\t<select id=\"ilce\" name=\"cari_ilce\" class=\"select\" required>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<option value=\"\">İl Seçiniz</option>\r\n\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t<label>Adres</label>\r\n\r\n\t\t\t\t\t\t\t\t<textarea rows=\"9\" cols=\"5\" class=\"form-control\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t  placeholder=\"Adres bilgisi giriniz...\"\r\n\r\n\t\t\t\t\t\t\t\t\t\t  name=\"cari_adres\"></textarea>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-danger\" style=\"width:100%;\" id=\"kydtBTN\">Kaydet\r\n\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</form>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n<div id=\"add_category\" class=\"modal custom-modal fade\" role=\"dialog\">\r\n\r\n\t<div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n\r\n\t\t<div class=\"modal-content\">\r\n\r\n\t\t\t<div class=\"modal-header\">\r\n\r\n\t\t\t\t<h5 class=\"modal-title\">İşlem Seçiniz</h5>\r\n\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\r\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\r\n\t\t\t\t</button>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"modal-body\">\r\n\r\n\t\t\t\t<form action=\"#\" method=\"POST\">\r\n\r\n\t\t\t\t\t<input class=\"form-control\" type=\"hidden\" id=\"add_idsi\" name=\"id\">\r\n\r\n\r\n\r\n\t\t\t\t\t<select name=\"add_secim[]\" multiple id=\"add_secim\" class=\"form-control select\"\r\n\r\n\t\t\t\t\t\t\tplaceholder=\"Seçiniz...\">\r\n\r\n\t\t\t\t\t\t<option value=\"1\">İndirim (%)</option>\r\n\r\n\t\t\t\t\t</select>\r\n\r\n\r\n\r\n\t\t\t\t\t<div class=\"submit-section\">\r\n\r\n\t\t\t\t\t\t<a class=\"btn btn-danger\" id=\"ekle_kaydet\">Ekle</a>\r\n\r\n\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Kapat</button>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</form>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n</div>\r\n\r\n\r\n\r\n<?php if ($this->session->flashdata('fatura_mukerrer')): ?>\r\n\r\n\t<script>\r\n\r\n\t\tswal({\r\n\r\n\t\t\ttitle: \"Bilgilendirme\",\r\n\r\n\t\t\ttype: \"error\",\r\n\r\n\t\t\ttext: \"Aynı fatura veya irsaliye numarasına ait kayıt mevcuttur, tekrar deneyiniz.\",\r\n\r\n\t\t\tconfirmButtonText: 'Tamam',\r\n\r\n\t\t\tbutton: false,\r\n\r\n\t\t\ttimer: 5000,\r\n\r\n\t\t});\r\n\r\n\t</script>\r\n\r\n<?php endif; ?>\r\n\r\n\r\n\r\n<?php if ($this->session->flashdata('cari_hatali')): ?>\r\n\r\n\t<script>\r\n\r\n\t\tswal({\r\n\r\n\t\t\ttitle: \"Bilgilendirme\",\r\n\r\n\t\t\ttype: \"error\",\r\n\r\n\t\t\ttext: \"Cari kodu veya cari adı kayıtlı değil, lütfen listeden seçerek devam ediniz.\",\r\n\r\n\t\t\tconfirmButtonText: 'Tamam',\r\n\r\n\t\t\tbutton: false,\r\n\r\n\t\t\ttimer: 5000,\r\n\r\n\t\t});\r\n\r\n\t</script>\r\n\r\n<?php endif; ?>\r\n\r\n\r\n\r\n<?php $this->load->view(\"include/footer-js\"); ?>\r\n\r\n\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"\r\n\r\n\t\tintegrity=\"sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==\"\r\n\r\n\t\tcrossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\r\n\r\n\r\n\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js\"></script>\r\n\r\n<script>\r\n\r\n\t$(function () {\r\n\r\n\t\t$('.datepicker').datepicker({\r\n\r\n\t\t\tdateFormat: 'dd.mm.yy',\r\n\r\n\t\t\tlanguage: 'tr'/*,\r\n\r\n\t\t\tautoclose: true,\r\n\r\n\t\t\ttodayHighlight: true,\r\n\r\n\t\t\tformat: 'mm/dd/yyyy',\r\n\r\n\t\t\tstartDate: new Date(new Date().setDate(new Date().getDate() -7)),\r\n\r\n\t\t\tendDate: new Date(new Date())*/\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(function () {\r\n\r\n\t\t$('#datetimepicker').datetimepicker({\r\n\r\n\t\t\tformat: 'HH:mm'\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n\r\n<script>\r\n\r\n\r\n\r\n\r\n\r\n\t<?php\r\n\r\n\tif (!$faturaDetay) {\r\n\r\n\t\techo \"addItem();\";\r\n\r\n\t} else {\r\n\r\n\t\techo \"document.getElementById('istisna_sebebi').value='\" . $faturaDetay->satis_istisna_id . \"';\";\r\n\r\n\t}\r\n\r\n\r\n\r\n\tif ($faturaDetay->satis_earsivfaturaTip == 3)\r\n\r\n\t\techo 'var x = document.getElementById(\"add_secim\");\r\n\r\n\t\t\tvar option = document.createElement(\"option\");\r\n\r\n\t\t\toption.text = \"Tevkifat\";\r\n\r\n\t\t\toption.value = \"3\";\r\n\r\n\t\t\tx.add(option);';\r\n\r\n\r\n\r\n\r\n\r\n\tif ($faturabankaDuzenle) {\r\n\r\n\t\techo \"checkboxbanka=1;\";\r\n\r\n\t\techo 'document.getElementById(\"bankaCheck\").checked = true;var row=\"\";$(\"#bankabilgileri\").css(\"display\", \"block\");';\r\n\r\n\t\t$items_banka = 0;\r\n\r\n\t\tforeach ($faturabankaDuzenle as $item) {\r\n\r\n\t\t\t$items_banka++;\r\n\r\n\t\t\t$html = \"<tr>\";\r\n\r\n\t\t\t$html .= '<td><label>Banka Adı</label><input type=\"hidden\" name=\"ayarlarbanka_id[]\" id=\"ayarlarbanka_id' . $items_banka . '\" value=\"' . $item->ayarlarbanka_id . '\"><input type=\"text\" class=\"form-control\" name=\"ayarlar_bankaadi[]\" id=\"ayarlar_bankaadi' . $items_banka . '\" value=\"' . $item->ayarlar_banka_ad . '\"></td>';\r\n\r\n\t\t\t$html .= '<td><label>Şube</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_sube[]\" id=\"ayarlar_sube' . $items_banka . '\" value=\"' . $item->ayarlarbanka_subeAd . '\"></td>';\r\n\r\n\r\n\r\n\t\t\t$html .= '<td><label>Para Birimi</label><select class=\"form-control\" name=\"ayarlar_parabirimi\" id=\"ayarlar_parabirimi' . $items_banka . '\"><option value=\"1\"';\r\n\r\n\t\t\tif ($item->ayarlarbanka_paraBirim == 1) $html .= \" selected \";\r\n\r\n\t\t\t$html .= '>Türk Lirası</option><option value=\"2\"';\r\n\r\n\t\t\tif ($item->ayarlarbanka_paraBirim == 2) $html .= \" selected \";\r\n\r\n\t\t\t$html .= '>Amerikan Doları </option><option value=\"3\"';\r\n\r\n\t\t\tif ($item->ayarlarbanka_paraBirim == 3) $html .= \" selected \";\r\n\r\n\t\t\t$html .= '>Euro</option><option value=\"4\"';\r\n\r\n\t\t\tif ($item->ayarlarbanka_paraBirim == 4) $html .= \" selected \";\r\n\r\n\t\t\t$html .= '> İngiliz Sterlini </option> </select> </td>\"';\r\n\r\n\r\n\r\n\t\t\t$html .= '<td><label>Hesap No</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_hesapno[]\" id=\"ayarlar_hesapno' . $items_banka . '\" value=\"' . $item->ayarlarbanka_hesapNo . '\"></td>\"';\r\n\r\n\t\t\t$html .= '<td><label>IBAN</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_iban[]\" id=\"ayarlar_iban' . $items_banka . '\" value=\"' . $item->ayarlarbanka_iban . '\"></td>';\r\n\r\n\t\t\t$html .= '<td><button type=\"button\" onclick=\"deleteRowBanka(this);\" class=\"btn btn-danger btn-sm\" id=\"' . $items_banka . '\"><i class=\"fa fa-trash\"></i> Sil</button></td>';\r\n\r\n\t\t\t$html .= \"</tr>\";\r\n\r\n\t\t\techo 'row=document.getElementById(\"tbody_ayarlarbanka\").insertRow();row.innerHTML=\\'' . $html . '\\';';\r\n\r\n\t\t\techo \"items_banka=\" . $items_banka . \"; counter_banka.push(\" . $items_banka . \");document.getElementById('bankaCount').value=\" . $items_banka . \";\";\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t?>\r\n\r\n\r\n\r\n\tfunction kdvCheckFunc() {\r\n\r\n\r\n\r\n\t\tif (document.getElementById(\"kdvCheck\").checked == true) {\r\n\r\n\t\t\t// Desktop davranışı\r\n\r\n\t\t\tif (window.innerWidth > 768) {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', true);\r\n\r\n\t\t\t\t$('input[name^=\"toplam\"]').prop('readonly', false);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Mobile davranışı - birim fiyat aktif kalır ama toplam alanını temsil eder\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', false);\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Toplam (KDV Dahil)');\r\n\r\n\t\t\t\t$('input[name^=\"toplam\"]').prop('readonly', true);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Her iki durumda da birim fiyat aktif, toplam readonly\r\n\r\n\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', false);\r\n\r\n\t\t\tif (window.innerWidth > 768) {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Birim Fiyat');\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Birim Fiyat (TL)');\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$('input[name^=\"toplam\"]').prop('readonly', true);\r\n\r\n\t\t}\r\n\r\n\t\thesapla();\r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\t$(document).on('change', 'input[id=\"bankaCheck\"]', function () {\r\n\r\n\t\t//function bankaCheckFunc(){\r\n\r\n\t\tif (document.getElementById(\"bankaCheck\").checked == true) {\r\n\r\n\t\t\t$(\"#bankabilgileri\").css(\"display\", \"block\");\r\n\r\n\r\n\r\n\t\t\tvar row = document.getElementById(\"tbody_ayarlarbanka\");\r\n\r\n\t\t\trow.innerHTML = \"\";\r\n\r\n\t\t\tif (checkboxbanka == 1) {\r\n\r\n\t\t\t\t<?php  $items_banka = 0;foreach ($faturabankaDuzenle as $item) {\r\n\r\n\t\t\t\t$items_banka++;\r\n\r\n\t\t\t\t/*echo \"items_banka++; counter_banka.push(items_banka); document.getElementById('bankaCount').value =items_banka;\";*/\r\n\r\n\t\t\t\t$html = \"<tr>\";\r\n\r\n\t\t\t\t$html .= '<td><label>Banka Adı</label><input type=\"hidden\" name=\"ayarlarbanka_id[]\" id=\"ayarlarbanka_id' . $items_banka . '\" value=\"' . $item->ayarlarbanka_id . '\"><input type=\"text\" class=\"form-control\" name=\"ayarlar_bankaadi[]\" id=\"ayarlar_bankaadi' . $items_banka . '\" value=\"' . $item->ayarlar_banka_ad . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><label>Şube</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_sube[]\" id=\"ayarlar_sube' . $items_banka . '\" value=\"' . $item->ayarlarbanka_subeAd . '\"></td>';\r\n\r\n\r\n\r\n\t\t\t\t$html .= '<td><label>Para Birimi</label><select class=\"form-control\" name=\"ayarlar_parabirimi\" id=\"ayarlar_parabirimi' . $items_banka . '\"><option value=\"1\"';\r\n\r\n\t\t\t\tif ($item->ayarlarbanka_paraBirim == 1) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Türk Lirası</option><option value=\"2\"';\r\n\r\n\t\t\t\tif ($item->ayarlarbanka_paraBirim == 2) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Amerikan Doları </option><option value=\"3\"';\r\n\r\n\t\t\t\tif ($item->ayarlarbanka_paraBirim == 3) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Euro</option><option value=\"4\"';\r\n\r\n\t\t\t\tif ($item->ayarlarbanka_paraBirim == 4) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '> İngiliz Sterlini </option> </select> </td>\"';\r\n\r\n\r\n\r\n\t\t\t\t$html .= '<td><label>Hesap No</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_hesapno[]\" id=\"ayarlar_hesapno' . $items_banka . '\"  value=\"' . $item->ayarlarbanka_hesapNo . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><label>IBAN</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_iban[]\" id=\"ayarlar_iban' . $items_banka . '\"  value=\"' . $item->ayarlarbanka_iban . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><button type=\"button\" onclick=\"deleteRowBanka(this);\" class=\"btn btn-danger btn-sm\" id=\"' . $items_banka . '\"><i class=\"fa fa-trash\"></i> Sil</button></td>';\r\n\r\n\t\t\t\t$html .= \"</tr>\";\r\n\r\n\t\t\t\techo 'row=document.getElementById(\"tbody_ayarlarbanka\").insertRow();row.innerHTML=\\'' . $html . '\\';';\r\n\r\n\t\t\t\techo \"items_banka=\" . $items_banka . \"; counter_banka.push(\" . $items_banka . \");document.getElementById('bankaCount').value=\" . $items_banka . \";\";\r\n\r\n\t\t\t}?>\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t<?php  foreach ($faturabanka as $itemx) {\r\n\r\n\t\t\t\t$items_banka++;\r\n\r\n\t\t\t\t$html = \"<tr>\";\r\n\r\n\t\t\t\t$html .= '<td><label>Banka Adı</label><input type=\"hidden\" name=\"ayarlarbanka_id[]\" id=\"ayarlarbanka_id' . $items_banka . '\" value=\"' . $itemx->ayarlarbanka_id . '\"><input type=\"text\" class=\"form-control\" name=\"ayarlar_bankaadi[]\" id=\"ayarlar_bankaadi' . $items_banka . '\" value=\"' . $itemx->ayarlar_banka_ad . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><label>Şube</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_sube[]\" id=\"ayarlar_sube' . $items_banka . '\" value=\"' . $itemx->ayarlarbanka_subeAd . '\"></td>';\r\n\r\n\r\n\r\n\t\t\t\t$html .= '<td><label>Para Birimi</label><select class=\"form-control\" name=\"ayarlar_parabirimi\" id=\"ayarlar_parabirimi' . $items_banka . '\"><option value=\"1\"';\r\n\r\n\t\t\t\tif ($itemx->ayarlarbanka_paraBirim == 1) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Türk Lirası</option><option value=\"2\"';\r\n\r\n\t\t\t\tif ($itemx->ayarlarbanka_paraBirim == 2) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Amerikan Doları </option><option value=\"3\"';\r\n\r\n\t\t\t\tif ($itemx->ayarlarbanka_paraBirim == 3) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '>Euro</option><option value=\"4\"';\r\n\r\n\t\t\t\tif ($itemx->ayarlarbanka_paraBirim == 4) $html .= \" selected \";\r\n\r\n\t\t\t\t$html .= '> İngiliz Sterlini </option> </select> </td>\"';\r\n\r\n\r\n\r\n\t\t\t\t$html .= '<td><label>Hesap No</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_hesapno[]\" id=\"ayarlar_hesapno' . $items_banka . '\"  value=\"' . $itemx->ayarlarbanka_hesapNo . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><label>IBAN</label><input type=\"text\" class=\"form-control\" name=\"ayarlar_iban[]\" id=\"ayarlar_iban' . $items_banka . '\"  value=\"' . $itemx->ayarlarbanka_iban . '\"></td>';\r\n\r\n\t\t\t\t$html .= '<td><button type=\"button\" onclick=\"deleteRowBanka(this);\" class=\"btn btn-danger btn-sm\" id=\"' . $items_banka . '\"><i class=\"fa fa-trash\"></i> Sil</button></td>';\r\n\r\n\t\t\t\t$html .= \"</tr>\";\r\n\r\n\t\t\t\techo 'row=document.getElementById(\"tbody_ayarlarbanka\").insertRow();row.innerHTML=\\'' . $html . '\\';';\r\n\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\techo \"items_banka=\" . $items_banka . \"; counter_banka.push(\" . $items_banka . \");document.getElementById('bankaCount').value=\" . $items_banka . \";\";\r\n\r\n\t\t\t ?>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t$(\"#bankabilgileri\").css(\"display\", \"none\");\r\n\r\n\t\t\tcheckboxbanka = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\t});\r\n\r\n\r\n\r\n\tfunction stokKontrol(stok) {\r\n\r\n\t\tvar id = stok.match(/\\d/g);\r\n\r\n\t\tvar stokID = $(\"#stokid\" + id).val();\r\n\r\n\t\tif (stokID == \"\") {\r\n\r\n\t\t\t$(\"#stokadi\" + id).css(\"background-color\", \"#dff1e7\");\r\n\r\n\t\t\t$(\"#stokkodu\" + id).css(\"background-color\", \"#dff1e7\");\r\n\r\n\t\t\t$(\"#barkod\" + id).css(\"background-color\", \"#dff1e7\");\r\n\r\n\t\t\t$(\"#birim\" + id).css(\"background-color\", \"#dff1e7\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\t$(\"#stokadi\" + id).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t$(\"#stokkodu\" + id).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t$(\"#barkod\" + id).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t$(\"#birim\" + id).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction addItem() {\r\n\r\n\r\n\r\n\t\titems++;\r\n\r\n\t\tcounter.push(items);\r\n\r\n\t\tvar html = \"<tr>\";\r\n\r\n\t\thtml += \"<td><input type='text' class='form-control' name='stokadi[]' id='stokadi\" + items + \"' onblur='stokKontrol(this.id)' required> </td>\";\r\n\r\n\t\thtml += \"<td style='display:none'><input type='text' class='form-control' name='stokkodu[]' id='stokkodu\" + items + \"'  onblur='stokKontrol(this.id)' required></td>\";\r\n\r\n\t\t// Barkod inputu kaldırıldı\r\n\r\n\t\thtml += \"<td style='display:none'><select class='form-control' name='birim[]' id='birim\" + items + \"' required><?= $birimler ?></select></td>\";\r\n\r\n\t\thtml += \"<td><input type='number' step='0.1' class='form-control' autocomplete='off' name='miktar[]' id='miktar\" + items + \"' required='' style='width:175px;'></td>\";\r\n\r\n\t\thtml += \"<td><input type='number' step='0.1' class='form-control'   autocomplete='off' name='birimfiyat[]' id='birimfiyat\" + items + \"' required='' ></td>\";\r\n\r\n\t\t/*html += \"<td><input type='text' class='form-control' name='kdv[]' id='kdv\"+items+\"' readonly></td>\";*/\r\n\r\n\t\thtml += \"<td><select class='form-control' name='kdv[]' id='kdv\" + items + \"' ><option value='0' >0</option><option value='1'>1</option><option value='8' selected>8</option><option value='10' selected>10</option><option value='18'>18</option><option value='20'>20</option></select></td>\";\r\n\r\n\t\thtml += \"<td><input type='hidden' name='indirimtutari[]' id='indirimtutari\" + items + \"'><input type='text' class='form-control' name='toplam[]' id='toplam\" + items + \"' readonly><input type='hidden' name='toplamHidden[]' id='toplamHidden\" + items + \"'></td>\";\r\n\r\n\t\thtml += \"<td><button type='button' class='btn btn-info btn-sm' data-toggle='modal' data-target='#add_category' data-idsi='\" + items + \"' id='eklebuton\" + items + \"' ><i class='fa fa-plus'></i> Ekle</button> <button type='button' onclick='deleteRow(this);' class='btn btn-danger btn-sm' id='\" + items + \"'><i class='fa fa-trash'></i> Sil</button> </td>\";\r\n\r\n\t\thtml += \"</tr>\";\r\n\r\n\t\tvar row = document.getElementById(\"tbody\").insertRow();\r\n\r\n\t\trow.innerHTML = html;\r\n\r\n\t\tvar secenekler = \"<td id='indirimytd\" + items + \"' style='display: none;'><label>İndirim (%)</label><input type='number' step='0.1' class='form-control' placeholder='İndirim (%)' name='indirimyuzde[]'   id='indirimyuzde\" + items + \"'></td>\";\r\n\r\n\t\tsecenekler += \"<td id='tevkifatselecttd\" + items + \"' style='display: none;' ><label>Tevkifat</label><select  name='tevkifat[]'  id='tevkifat\" + items + \"'class='form-control' onchange='tevkifat(this,\" + items + \")'><option value='0'>Seçiniz</option><?php echo $tevkifat; ?></select></td>\";\r\n\r\n\t\tsecenekler += \"<td id='tevkifattexttd\" + items + \"' style='display: none;' ><label>Tevkifat Oranı(%)</label><input type='text' class='form-control' name='tevkifat_oran[]' id='tevkifat_oran\" + items + \"' readonly placeholder='Tevkifat Oranı(%)'>\";\r\n\r\n\r\n\r\n\r\n\r\n\t\tvar row = document.getElementById(\"tbody\").insertRow();\r\n\r\n\t\trow.innerHTML = secenekler;\r\n\r\n\t\t$(\"#stokadi\" + items).autocomplete({\r\n\r\n\t\t\tsource: '<?= env('BASE_URL'); ?>/fatura/autocompleteDataByStockName',\r\n\r\n\t\t\tminLength: 2,\r\n\r\n\t\t\tsearch: function(event, ui) {\r\n\r\n\t\t\t\tconsole.log('Stok arama başlatıldı:', $(this).val());\r\n\r\n\t\t\t},\r\n\r\n\t\t\tresponse: function(event, ui) {\r\n\r\n\t\t\t\tconsole.log('Stok arama yanıtı:', ui.content.length + ' sonuç bulundu');\r\n\r\n\t\t\t},\r\n\r\n\t\t\tselect: function (event, ui) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\r\n\r\n\t\t\t\t$('.ui-autocomplete').modal('hide');\r\n\r\n\r\n\r\n\t\t\t\ttoastr.success(ui.item.value + \" stok isimli stok bilgileri getirildi.\");\r\n\r\n\t\t\t\tlet id = event.target.id;\r\n\r\n\t\t\t\tvar idsi = id.match(/\\d/g);\r\n\r\n\t\t\t\tidsi = idsi.join(\"\");\r\n\r\n\r\n\r\n\t\t\t\t$(\"#stokID\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#stokid\" + idsi + \"\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#stokadi\" + idsi + \"\").val(ui.item.value);\r\n\r\n\t\t\t\t$(\"#stokkodu\" + idsi + \"\").val(ui.item.stok_kodu);\r\n\r\n\t\t\t\t$(\"#birim\" + idsi + \"\").val(ui.item.stok_birimi);\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\t\t\t\t$(\"#birimfiyat\" + idsi + \"\").val(ui.item.stok_satisFiyati);\r\n\r\n\t\t\t\t$(\"#kdv\" + idsi + \"\").val(ui.item.stok_satisKDV);\r\n\r\n\t\t\t\t$(\"#miktar\" + idsi + \"\").val(\"1\");\r\n\r\n\t\t\t\t$(\"#toplam\" + idsi + \"\").val(\"1\");\r\n\r\n\t\t\t\tdocument.getElementById(\"stokadi\" + idsi).readOnly = true;\r\n\r\n\t\t\t\tdocument.getElementById(\"stokkodu\" + idsi).readOnly = true;\r\n\r\n\t\t\t\t//document.getElementById(\"birim\" + idsi).disabled = true;\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"pointer-events\", \"none\");\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t$(\"#stokadi\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t$(\"#stokkodu\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\r\n\r\n\t\t\t\tvar tip = $(\"#satis_faturaTip\").val();\r\n\r\n\t\t\t\tif (tip != 4 && tip != 5 && tip != 6)\r\n\r\n\t\t\t\t\tvergimuafiyet();\r\n\r\n\t\t\t\tif (document.getElementById(\"kdvCheck\").checked == false)\r\n\r\n\t\t\t\t\thesapla();\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t$(\"#stokkodu\" + items).autocomplete({\r\n\r\n\t\t\tsource: '<?= env('BASE_URL'); ?>/fatura/autocompleteDataByStockCode',\r\n\r\n\t\t\tminLength: 2,\r\n\r\n\t\t\tselect: function (event, ui) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\r\n\r\n\t\t\t\t$('.ui-autocomplete').modal('hide');\r\n\r\n\t\t\t\ttoastr.success(ui.item.value + \" stok kodlu stok bilgileri getirildi.\");\r\n\r\n\t\t\t\tlet id = event.target.id;\r\n\r\n\t\t\t\tvar idsi = id.match(/\\d/g);\r\n\r\n\t\t\t\tidsi = idsi.join(\"\");\r\n\r\n\t\t\t\t$(\"#stokID\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#stokid\" + idsi + \"\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#stokkodu\" + idsi + \"\").val(ui.item.value);\r\n\r\n\t\t\t\t$(\"#stokadi\" + idsi + \"\").val(ui.item.stok_ad);\r\n\r\n\t\t\t\t$(\"#birim\" + idsi + \"\").val(ui.item.stok_birimi);\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\t\t\t\t$(\"#birimfiyat\" + idsi + \"\").val(ui.item.stok_satisFiyati);\r\n\r\n\t\t\t\t$(\"#kdv\" + idsi + \"\").val(ui.item.stok_satisKDV);\r\n\r\n\t\t\t\t$(\"#miktar\" + idsi + \"\").val(\"1\");\r\n\r\n\t\t\t\t$(\"#toplam\" + idsi + \"\").val(\"1\");\r\n\r\n\r\n\r\n\t\t\t\tdocument.getElementById(\"stokadi\" + idsi).readOnly = true;\r\n\r\n\t\t\t\tdocument.getElementById(\"stokkodu\" + idsi).readOnly = true;\r\n\r\n\t\t\t\tdocument.getElementById(\"birim\" + idsi).readOnly = true;\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"pointer-events\", \"none\");\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t$(\"#stokadi\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t$(\"#stokkodu\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\t\t\t\t// Barkod alanı kaldırıldı\r\n\r\n\r\n\r\n\t\t\t\t$(\"#birim\" + idsi).css(\"background-color\", \"#e9ecef\");\r\n\r\n\r\n\r\n\t\t\t\tvar tip = $(\"#satis_faturaTip\").val();\r\n\r\n\t\t\t\tif (tip != 4 && tip != 5 && tip != 6)\r\n\r\n\t\t\t\t\tvergimuafiyet();\r\n\r\n\t\t\t\tif (document.getElementById(\"kdvCheck\").checked == false)\r\n\r\n\t\t\t\t\thesapla();\r\n\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\t\tif (document.getElementById(\"kdvCheck\").checked == true) {\r\n\r\n\t\t\t// Desktop davranışı\r\n\r\n\t\t\tif (window.innerWidth > 768) {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', true);\r\n\r\n\t\t\t\t$('input[name^=\"toplam\"]').prop('readonly', false);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Mobile davranışı - birim fiyat aktif kalır\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', false);\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Toplam (KDV Dahil)');\r\n\r\n\t\t\t\t$('input[name^=\"toplam\"]').prop('readonly', true);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t$('input[name^=\"birimfiyat\"]').prop('readonly', false);\r\n\r\n\t\t\tif (window.innerWidth > 768) {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Birim Fiyat');\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$('input[name^=\"birimfiyat\"]').attr('placeholder', 'Birim Fiyat (TL)');\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$('input[name^=\"toplam\"]').prop('readonly', true);\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t// Yeni eklenen satır için mobilde placeholder ayarı\r\n\r\n\t\tif (window.innerWidth <= 768) {\r\n\r\n\t\t\tif (document.getElementById(\"kdvCheck\").checked) {\r\n\r\n\t\t\t\t$('#birimfiyat' + items).attr('placeholder', 'Toplam (KDV Dahil)');\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$('#birimfiyat' + items).attr('placeholder', 'Birim Fiyat (TL)');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction tevkifat(object, items) {\r\n\r\n\t\tvar val = object.value;\r\n\r\n\t\tval = (val.split(\"|\"))[0];\r\n\r\n\t\tval = val * 100;\r\n\r\n\t\t$(\"#tevkifat_oran\" + items).val(val);\r\n\r\n\t\thesapla();\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tfunction round(value, decimals) {\r\n\r\n\t\treturn Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);\r\n\r\n\t\t/*debugger;\r\n\r\n\t\tif(value!=0){\r\n\r\n\t\tif (value != \"NaN\") {\r\n\r\n\t\t\t//return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);/*\r\n\r\n\t\t\tvar x = (value);\r\n\r\n\t\t\tvar array = x.toString().split(\".\");\r\n\r\n\t\t\tx = array[1];\r\n\r\n\t\t\tvar ondalik = x.toString().substr(0, 2);\r\n\r\n\t\t\tif (parseInt(x[1]) % 2 == 0) {\r\n\r\n\t\t\t\treturn Number(array[0] + \".\" + ondalik);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn Number(Math.ceil(value + 'e' + decimals) + 'e-' + decimals);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else return 0;\r\n\r\n\t} else return 0;*/\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction hesapla() {\r\n\r\n\t\tvar aratop = 0;\r\n\r\n\t\tvar kdvtop = 0;\r\n\r\n\t\tvar geneltop = 0;\r\n\r\n\t\tvar nettop = 0;\r\n\r\n\t\tvar fiyat = 0;\r\n\r\n\t\tvar indirimtop = 0;\r\n\r\n\t\tvar tevkifattop = 0;\r\n\r\n\t\tvar kdvHesap = 0;\r\n\r\n\t\tvar i = 1;\r\n\r\n\t\tvar isMobile = window.innerWidth <= 768;\r\n\r\n\t\tvar kdvDahil = document.getElementById(\"kdvCheck\").checked;\r\n\r\n\t\t\r\n\r\n\t\tfor (i = 1; i <= items; i++) {\r\n\r\n\t\t\tvar satir = $(\"#stokadi\" + i);\r\n\r\n\t\t\tif (satir.length >= 1) {\r\n\r\n\t\t\t\tfiyat = 0;\r\n\r\n\t\t\t\tkdvHesap = 0;\r\n\r\n\t\t\t\tvar miktar = $(\"#miktar\" + i + \"\").val();\r\n\r\n\t\t\t\tvar birimfiyat = $(\"#birimfiyat\" + i + \"\").val();\r\n\r\n\t\t\t\t// Birim fiyattan noktaları kaldır\r\n\r\n\t\t\t\tbirimfiyat = birimfiyat.toString().replace(/\\./g, '');\r\n\r\n\t\t\t\tvar toplam = $(\"#toplam\" + i + \"\").val();\r\n\r\n\t\t\t\tvar kdvoran = $(\"#kdv\" + i).val();\r\n\r\n\t\t\t\tvar indirimyuzde = $(\"#indirimyuzde\" + i).val();\r\n\r\n\t\t\t\tvar tevkifat = $(\"#tevkifat\" + i).val();\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\tif (kdvDahil) {\r\n\r\n\t\t\t\t\tif (isMobile) {\r\n\r\n\t\t\t\t\t\t// Mobilde birim fiyat kutucuğu toplam değerini temsil eder\r\n\r\n\t\t\t\t\t\tvar toplamTutar = parseFloat(birimfiyat) * parseFloat(miktar);\r\n\r\n\t\t\t\t\t\tvar netTutar = toplamTutar / (1 + (parseFloat(kdvoran) / 100));\r\n\r\n\t\t\t\t\t\tvar gercekBirimFiyat = netTutar / parseFloat(miktar);\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t// Görünmeyen toplam alanını güncelle\r\n\r\n\t\t\t\t\t\t$(\"#toplam\" + i + \"\").val(toplamTutar.toFixed(2));\r\n\r\n\t\t\t\t\t\t$(\"#toplamHidden\" + i + \"\").val(toplamTutar.toFixed(2));\r\n\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t// Hesaplama için gerçek birim fiyatı kullan\r\n\r\n\t\t\t\t\t\tfiyat = netTutar;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// Desktop davranışı (eski)\r\n\r\n\t\t\t\t\t\tbirimfiyat = miktar * kdvoran / 100;\r\n\r\n\t\t\t\t\t\tbirimfiyat += parseFloat(miktar);\r\n\r\n\t\t\t\t\t\tbirimfiyat = parseFloat(toplam) / birimfiyat;\r\n\r\n\t\t\t\t\t\t$(\"#birimfiyat\" + i + \"\").val(birimfiyat);\r\n\r\n\t\t\t\t\t\tfiyat = miktar * birimfiyat;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// KDV dahil değilse normal hesaplama\r\n\r\n\t\t\t\t\tfiyat = miktar * birimfiyat;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\taratop += fiyat;//ara toplam\r\n\r\n\t\t\t\tif (indirimyuzde != \"\") {\r\n\r\n\t\t\t\t\tvar indirimtutari = fiyat * indirimyuzde / 100;\r\n\r\n\t\t\t\t\tindirimtop += parseFloat(indirimtutari); //toplam indirim\r\n\r\n\t\t\t\t\tfiyat = fiyat - parseFloat(indirimtutari);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\tif (!kdvDahil) {\r\n\r\n\t\t\t\t\t$(\"#toplam\" + i + \"\").val(fiyat);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#toplamHidden\" + i + \"\").val(fiyat);\r\n\r\n\r\n\r\n\t\t\t\tkdvHesap = fiyat * parseFloat(kdvoran) / 100;\r\n\r\n\t\t\t\tkdvtop += kdvHesap;\r\n\r\n\r\n\r\n\t\t\t\tif ( tevkifat != 0) {\r\n\r\n\t\t\t\t\tvar tevkifatOran = (tevkifat.split(\"|\"));\r\n\r\n\t\t\t\t\tvar tevkifatHesap = kdvHesap * tevkifatOran[0];\r\n\r\n\t\t\t\t\ttevkifattop = tevkifattop + tevkifatHesap;\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tnettop = aratop - indirimtop;\r\n\r\n\t\t\t\tgeneltop = nettop + kdvtop;\r\n\r\n\r\n\r\n\t\t\t\t$(\"#vergidahil\").html(formatter.format(round((geneltop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#vergidahilHidden\").val(round((geneltop).toFixed(3), 2));\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\tgeneltop = round(geneltop.toFixed(3), 2) - round((tevkifattop).toFixed(3), 2);\r\n\r\n\r\n\r\n\t\t\t\t$(\"#aratop\").html(formatter.format(round((aratop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#aratopHidden\").val(round((aratop).toFixed(3), 2));\r\n\r\n\t\t\t\t$(\"#kdvtop\").html(formatter.format(round(kdvtop, 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#kdvtopHidden\").val(round(kdvtop, 2));\r\n\r\n\t\t\t\t$(\"#geneltop\").html(formatter.format(round((geneltop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#geneltopHidden\").val(round((geneltop).toFixed(3), 2));\r\n\r\n\r\n\r\n\t\t\t\t$(\"#netTutarInput\").val(round((nettop).toFixed(3), 2));\r\n\r\n\r\n\r\n\t\t\t\t$(\"#nettutartop\").html(formatter.format(round((nettop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\r\n\r\n\t\t\t\t$(\"#indirimtop\").html(formatter.format(round((indirimtop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#indirimtopHidden\").val(round((indirimtop).toFixed(3), 2));\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t$(\"#kdvtevkifat\").html(formatter.format(round((tevkifattop).toFixed(3), 2)) + \" \" + paraBirimiMetin);\r\n\r\n\t\t\t\t$(\"#tevkifattopHidden\").val(round((tevkifattop).toFixed(3), 2));\r\n\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tfunction deleteRow(button) {\r\n\r\n\r\n\r\n\t\tif (counter.length >= 1) {\r\n\r\n\t\t\tcounter.pop();\r\n\r\n\t\t}\r\n\r\n\t\tif (counter.length == 0) {\r\n\r\n\t\t\tcounter.push(1);\r\n\r\n\t\t\ttoastr.warning(\"En az bir kayıt olması zorunludur, bu kayıt silinemez.\");\r\n\r\n\t\t} else {\r\n\r\n\r\n\r\n\t\t\tvar btnID = button.id;\r\n\r\n\r\n\r\n\t\t\t//items--;\r\n\r\n\r\n\r\n\r\n\r\n\t\t\tvar btnID = button.id;\r\n\r\n\r\n\r\n\t\t\tbutton.parentElement.parentElement.remove();\r\n\r\n\t\t\t$('#bos' + btnID + '').remove();\r\n\r\n\t\t\t$('#indirimytd' + btnID + '').remove();\r\n\r\n\t\t\t$('#indirimttd' + btnID + '').remove();\r\n\r\n\t\t\t$('#tevkifattd' + btnID + '').remove();\r\n\r\n\t\t\t$('#istisnatd' + btnID + '').remove();\r\n\r\n\t\t\t$('#tevkifatselecttd' + btnID + '').remove();\r\n\r\n\t\t\t$('#tevkifattexttd' + btnID + '').remove();\r\n\r\n\t\t\thesapla();\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\ttoastr.options = {\r\n\r\n\t\t\"closeButton\": true,\r\n\r\n\t\t\"debug\": false,\r\n\r\n\t\t\"newestOnTop\": false,\r\n\r\n\t\t\"progressBar\": true,\r\n\r\n\t\t\"positionClass\": \"toast-top-right\",\r\n\r\n\t\t\"preventDuplicates\": false,\r\n\r\n\t\t\"onclick\": null,\r\n\r\n\t\t\"showDuration\": \"300\",\r\n\r\n\t\t\"hideDuration\": \"1000\",\r\n\r\n\t\t\"timeOut\": \"5000\",\r\n\r\n\t\t\"extendedTimeOut\": \"1000\",\r\n\r\n\t\t\"showEasing\": \"swing\",\r\n\r\n\t\t\"hideEasing\": \"linear\",\r\n\r\n\t\t\"showMethod\": \"fadeIn\",\r\n\r\n\t\t\"hideMethod\": \"fadeOut\"\r\n\r\n\t};\r\n\r\n\r\n\r\n\t$('#edit_category').on('show.bs.modal', function (event) {\r\n\r\n\t\tlet idsi = $(event.relatedTarget).data('id')\r\n\r\n\t\t$(this).find('.modal-body #idsi').val(idsi)\r\n\r\n\t})\r\n\r\n\r\n\r\n\t$('#add_category').on('show.bs.modal', function (event) {\r\n\r\n\t\tlet a_idsi = $(event.relatedTarget).data('idsi')\r\n\r\n\t\t$(this).find('.modal-body #add_idsi').val(a_idsi)\r\n\r\n\t})\r\n\r\n\r\n\r\n\t$(function () {\r\n\r\n\t\t$(\"#name_input\").autocomplete({\r\n\r\n\t\t\tsource: \"<?= env('BASE_URL'); ?>/fatura/autocompleteDataByNameEArsiv\",\r\n\r\n\t\t\tminLength: 2,\r\n\r\n\t\t\tselect: function (event, ui) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tconsole.log(\"Cari seçildi:\", ui.item);\r\n\r\n\t\t\t\tconsole.log(\"Cari adresi:\", ui.item.cari_adres);\r\n\r\n\t\t\t\t$(\"#cari_id\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#tcknvkn_input\").val(ui.item.value);\r\n\r\n\t\t\t\t$(\"#kod_input\").val(ui.item.cari_kodu);\r\n\r\n\t\t\t\t$(\"#cari_grubu_input\").val(ui.item.cari_grubu);\r\n\r\n\t\t\t\t$(\"#cari_vergiDairesi_input\").val(ui.item.cari_vergiDairesi);\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").val(ui.item.cari_adres);\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").prop('readonly', false); // Readonly özelliğini kaldır\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").prop('readonly', true); // Tekrar readonly yap\r\n\r\n\t\t\t\t$(\"#eposta_bilgi_input\").val(ui.item.cari_firmaEPosta);\r\n\r\n\t\t\t\tconsole.log(\"Adres input değeri:\", $(\"#cari_adres_input\").val());\r\n\r\n\r\n\r\n\t\t\t\ttoastr.success(ui.item.value + \" cari adlı müşteriye ait bilgiler getirildi.\");\r\n\r\n\t\t\t\t$(\"#faturaBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#faturaAltBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#checkboxDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n\r\n\t\t\t\tvar tables = document.getElementsByTagName('table');\r\n\r\n\r\n\r\n\t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n\r\n\t\t\t\t\tresizableGrid(tables[i]);\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(function () {\r\n\r\n\t\t$(\"#tcknvkn_input\").autocomplete({\r\n\r\n\t\t\tsource: \"<?= env('BASE_URL'); ?>/fatura/autocompleteDataByTcknVknEarsiv\",\r\n\r\n\t\t\tminLength: 2,\r\n\r\n\t\t\tselect: function (event, ui) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tconsole.log(\"TCKN/VKN ile cari seçildi:\", ui.item);\r\n\r\n\t\t\t\tconsole.log(\"Cari adresi:\", ui.item.cari_adres);\r\n\r\n\t\t\t\t$(\"#cari_id\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#tcknvkn_input\").val(ui.item.value);\r\n\r\n\t\t\t\t$(\"#kod_input\").val(ui.item.cari_kodu);\r\n\r\n\t\t\t\t$(\"#cari_grubu_input\").val(ui.item.cari_grubu);\r\n\r\n\t\t\t\t$(\"#cari_vergiDairesi_input\").val(ui.item.cari_vergiDairesi);\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").val(ui.item.cari_adres);\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").prop('readonly', false); // Readonly özelliğini kaldır\r\n\r\n\t\t\t\t$(\"#cari_adres_input\").prop('readonly', true); // Tekrar readonly yap\r\n\r\n\t\t\t\t$(\"#eposta_bilgi_input\").val(ui.item.cari_firmaEPosta);\r\n\r\n\t\t\t\tconsole.log(\"Adres input değeri:\", $(\"#cari_adres_input\").val());\r\n\r\n\r\n\r\n\t\t\t\ttoastr.success(ui.item.value + \" cari adlı müşteriye ait bilgiler getirildi.\");\r\n\r\n\t\t\t\t$(\"#faturaBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#faturaAltBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#checkboxDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");\r\n\r\n\t\t\t\tvar tables = document.getElementsByTagName('table');\r\n\r\n\t\t\t\tfor (var i = 0; i < tables.length; i++) {\r\n\r\n\t\t\t\t\tresizableGrid(tables[i]);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(function () {\r\n\r\n\t\t$(\"#satis_faturaEtiketID\").autocomplete({\r\n\r\n\t\t\tsource: \"<?= env('BASE_URL'); ?>/fatura/autocompleteDataByEtiket\",\r\n\r\n\t\t\tminLength: 2,\r\n\r\n\t\t\tselect: function (event, ui) {\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$(\"#etiket_id\").val(ui.item.id);\r\n\r\n\t\t\t\t$(\"#satis_faturaEtiketID\").val(ui.item.value);\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n\r\n\t<?php if (!$faturaDetay) {\r\n\r\n\t\techo '$(\"#tcknvkn_input\").on(\"keyup\", function () {\r\n\r\n\t\tvar input=$(\"#tcknvkn_input\").val();\r\n\r\n\r\n\r\n\t\tif(input==\"\") {\r\n\r\n\t\t\t$(\"#name_input\").val(\"\");\r\n\r\n\t\t\t$(\"#tcknvkn_input\").val(\"\");\r\n\r\n\t\t\t$(\"#kod_input\").val(\"\");\r\n\r\n\t\t\t$(\"#cari_grubu_input\").val(\"\");\r\n\r\n\t\t\t$(\"#cari_vergiDairesi_input\").val(\"\");\r\n\r\n\t\t\t$(\"#cari_adres_input\").val(\"\");\r\n\r\n\t\t\t$(\"#eposta_bilgi_input\").val(\"\");\r\n\r\n\t\t\t$(\"#faturaBilgisiDiv\").css(\"display\", \"none\");\r\n\r\n\t\t\t$(\"#faturaAltBilgisiDiv\").css(\"display\", \"none\");\r\n\r\n\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"none\");\r\n\r\n\t\t\t$(\"#checkboxDiv\").css(\"display\", \"none\");\r\n\r\n\t\t\t$(\"#submitBtn\").css(\"display\", \"none\");\r\n\r\n\t\t}\r\n\r\n\t});';\r\n\r\n\t} else {\r\n\r\n\r\n\r\n\t\techo 'var element = document.getElementById(\"faturaBilgisiDiv\");\r\n\r\n\t\t\t\telement.classList.remove(\"d-none\");';\r\n\r\n\t}\r\n\r\n\tif ($cari) {\r\n\r\n\t\techo 'var element = document.getElementById(\"faturaBilgisiDiv\");\r\n\r\n\t\t\t\telement.classList.remove(\"d-none\");$(\"#faturaAltBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#stokBilgisiDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#checkboxDiv\").css(\"display\", \"block\");\r\n\r\n\t\t\t\t$(\"#submitBtn\").css(\"display\", \"block\");';\r\n\r\n\t}\r\n\r\n\t?>\r\n\r\n\r\n\r\n\r\n\r\n\tfunction vergimuafiyet() {\r\n\r\n\t\t$(\"#vergiMuafiyet\").css(\"display\", \"none\");\r\n\r\n\t\tdocument.getElementById(\"vergiMuafiyet_sebep\").required = false;\r\n\r\n\t\tvar sonuc = 0;\r\n\r\n\t\tfor (i = 1; i <= items; i++) {\r\n\r\n\t\t\tvar val = $(\"#kdv\" + i).val();\r\n\r\n\t\t\tif (val == 0) {\r\n\r\n\t\t\t\tsonuc = 1;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (sonuc == 1) {\r\n\r\n\t\t\t$(\"#vergiMuafiyet\").css(\"display\", \"block\");\r\n\r\n\t\t\tdocument.getElementById(\"vergiMuafiyet_sebep\").required = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\t$(document).on('change', 'select[name^=\"kdv\"]', function () {\r\n\r\n\t\tvar tip = $(\"#satis_faturaTip\").val();\r\n\r\n\t\tif (tip != 4 && tip != 5 && tip != 6)\r\n\r\n\t\t\tvergimuafiyet();\r\n\r\n\t\thesapla();\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(document).on('change', 'input[name^=\"miktar\"]', function () {\r\n\r\n\t\thesapla();\r\n\r\n\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(document).on('change', 'input[name^=\"birimfiyat\"]', function () {\r\n\r\n\t\thesapla();\r\n\r\n\r\n\r\n\t});\r\n\r\n\r\n\r\n\t$(document).on('change', 'input[name^=\"toplam\"]', function () {\r\n\r\n\t\thesapla();\r\n\r\n\t});\r\n\r\n\t$(document).on('change', 'input[name^=\"indirimyuzde\"]', function () {\r\n\r\n\t\t/*\r\n\r\n\t\t\t\tlet indirimtop = 0;\r\n\r\n\r\n\r\n\t\t\t\tlet id = event.target.id;\r\n\r\n\t\t\t\tvar numb = id.match(/\\d/g);\r\n\r\n\t\t\t\tnumb = numb.join(\"\");\r\n\r\n\r\n\r\n\t\t\t\tvar indirimyuzde = $(\"#indirimyuzde\" + numb + \"\").val();\r\n\r\n\t\t\t\tvar toplam = $(\"#toplam\" + numb + \"\").val();\r\n\r\n\r\n\r\n\t\t\t\tvar indirimtutari = toplam * indirimyuzde / 100;\r\n\r\n\r\n\r\n\t\t\t\t$(\"#indirimtutari\" + numb + \"\").val(indirimtutari);\r\n\r\n\r\n\r\n\t\t\t\tfor (i = 1; i <= items; i++) {\r\n\r\n\t\t\t\t\tvar tutar = $(\"#indirimtutari\" + i + \"\").val();\r\n\r\n\t\t\t\t\tvar hesap = $.trim(tutar).length;\r\n\r\n\t\t\t\t\tif (hesap != 0)\r\n\r\n\t\t\t\t\t\tindirimtop = indirimtop + parseFloat($(\"#indirimtutari\" + i + \"\").val());\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\t$(\"#indirimtop\").html(formatter.format(indirimtop) + \" \" + paraBirimiMetin);\r\n\r\n\r\n\r\n\t\t\t\t$(\"#indirimtopHidden\").val(indirimtop);*/\r\n\r\n\t\tlet id = event.target.id;\r\n\r\n\t\tvar numb = id.match(/\\d/g);\r\n\r\n\t\tnumb = numb.join(\"\");\r\n\r\n\r\n\r\n\t\tvar indirimyuzde = $(\"#indirimyuzde\" + numb + \"\").val();\r\n\r\n\t\tif (indirimyuzde == \"100\") {\r\n\r\n\r\n\r\n\t\t\t$(\"#vergiMuafiyet\").css(\"display\", \"block\");\r\n\r\n\t\t\tdocument.getElementById(\"vergiMuafiyet_sebep\").required = true;\r\n\r\n\t\t\tvergimuafiyet();\r\n\r\n\t\t} else {\r\n\r\n\r\n\r\n\t\t\t$(\"#vergiMuafiyet\").css(\"display\", \"none\");\r\n\r\n\t\t\tdocument.getElementById(\"vergiMuafiyet_sebep\").required = false;\r\n\r\n\t\t\tvergimuafiyet();\r\n\r\n\r\n\r\n\t\t}\r\n\r\n\t\thesapla();\r\n\r\n\r\n\r\n\r\n\r\n\t});\r\n\r\n\r\n\r\n\t// Mobilde birim fiyat altında toplam gösterimi\r\n\r\n\t$(document).ready(function() {\r\n\r\n\t\t// Mobile birim fiyat input change event'i\r\n\r\n\t\t$(document).on('input change', 'input[name^=\"birimfiyat\"]', function() {\r\n\r\n\t\t\t// Hesaplama otomatik olarak hesapla() fonksiyonunda yapılıyor\r\n\r\n\t\t\thesapla();\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Mobilde toplam gösterimini güncelle kaldırıldı\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t// KDV checkbox değiştiğinde mobil toplamları güncelle kaldırıldı\r\n\r\n\t\t$(document).on('change', '#kdvCheck', function() {\r\n\r\n\t\t\t// Mobil toplam gösterimi kaldırıldı\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t// Miktar değiştiğinde de toplam hesaplaması yap\r\n\r\n\t\t$(document).on('input change', 'input[name^=\"miktar\"]', function() {\r\n\r\n\t\t\thesapla();\r\n\r\n\t\t\t// Mobil toplam gösterimi kaldırıldı\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t// Birim fiyat formatlaması - binlik ayırıcı nokta ekleme\r\n\r\n\t\tfunction formatNumberWithDots(value) {\r\n\r\n\t\t\t// Sadece rakamları al\r\n\r\n\t\t\tlet numericValue = value.toString().replace(/[^\\d]/g, '');\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Boşsa boş döndür\r\n\r\n\t\t\tif (numericValue === '') return '';\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Binlik ayırıcı nokta ekle\r\n\r\n\t\t\treturn numericValue.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\tfunction removeDotsFromNumber(value) {\r\n\r\n\t\t\t// Noktaları kaldır ve sayısal değer döndür\r\n\r\n\t\t\treturn value.toString().replace(/\\./g, '');\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t// Birim fiyat input'larına formatla event'i ekle\r\n\r\n\t\t$(document).on('input', 'input[name^=\"birimfiyat\"]', function() {\r\n\r\n\t\t\tlet cursorPosition = this.selectionStart;\r\n\r\n\t\t\tlet originalLength = this.value.length;\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Formatla\r\n\r\n\t\t\tlet formattedValue = formatNumberWithDots(this.value);\r\n\r\n\t\t\tthis.value = formattedValue;\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Cursor pozisyonunu ayarla\r\n\r\n\t\t\tlet lengthDifference = formattedValue.length - originalLength;\r\n\r\n\t\t\tthis.setSelectionRange(cursorPosition + lengthDifference, cursorPosition + lengthDifference);\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t// Form submit edildiğinde noktaları kaldır\r\n\r\n\t\t$('form').on('submit', function() {\r\n\r\n\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n\r\n\t\t\t\tthis.value = removeDotsFromNumber(this.value);\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\t\r\n\r\n\t\t// Sayfa yüklendiğinde mevcut değerleri formatla\r\n\r\n\t\t$(document).ready(function() {\r\n\r\n\t\t\t$('input[name^=\"birimfiyat\"]').each(function() {\r\n\r\n\t\t\t\tif (this.value && this.value !== '0') {\r\n\r\n\t\t\t\t\tthis.value = formatNumberWithDots(this.value);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t// Görsel önizleme fonksiyonu\r\n\tfunction previewImage(imageSrc, imageName) {\r\n\t\t$('#previewModalLabel').text(imageName);\r\n\t\t$('#previewImage').attr('src', imageSrc);\r\n\t\t$('#downloadLink').attr('href', imageSrc);\r\n\t\t$('#previewModal').modal('show');\r\n\t}\r\n\r\n</script>\r\n\r\n\r\n\r\n<!-- Görsel Önizleme Modalı -->\r\n<div class=\"modal fade\" id=\"previewModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"previewModalLabel\" aria-hidden=\"true\">\r\n\t<div class=\"modal-dialog modal-lg\" role=\"document\">\r\n\t\t<div class=\"modal-content\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<h5 class=\"modal-title\" id=\"previewModalLabel\">Görsel Önizleme</h5>\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-body text-center\">\r\n\t\t\t\t<img id=\"previewImage\" src=\"\" alt=\"Önizleme\" class=\"img-fluid\" style=\"max-height: 500px;\">\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Kapat</button>\r\n\t\t\t\t<a id=\"downloadLink\" href=\"#\" target=\"_blank\" class=\"btn btn-primary\">\r\n\t\t\t\t\t<i class=\"fa fa-download\"></i> İndir\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n</body>\r\n\r\n</html>\r\n\r\n"
        }
    ]
}