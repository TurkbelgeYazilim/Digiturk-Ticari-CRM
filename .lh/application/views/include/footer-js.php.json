{
    "sourceFile": "application/views/include/footer-js.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1756311206822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759162295937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,9 +95,10 @@\n \r\n \r\n \r\n \r\n-<script src=\"<?= base_url(); ?>assets/js/bootstrap-session-timeout.js\"></script>\r\n+<!-- Session timeout script geçici olarak devre dışı bırakıldı -->\r\n+<!-- <script src=\"<?= base_url(); ?>assets/js/bootstrap-session-timeout.js\"></script> -->\r\n \r\n \r\n \r\n <!-- Custom JS -->\r\n@@ -231,8 +232,10 @@\n \t})();\r\n \r\n \r\n \r\n+\t// Session timeout geçici olarak devre dışı bırakıldı\r\n+\t/*\r\n \t$.sessionTimeout({\r\n \r\n \t\tlogoutUrl: '<?= base_url('home/logout'); ?>',\r\n \r\n@@ -246,8 +249,9 @@\n \r\n \t\tcountdownMessage: '{timer} saniye sonunda çıkışa yönlendirileceksiniz.'\r\n \r\n \t});\r\n+\t*/\r\n \r\n </script>\r\n \r\n \r\n"
                },
                {
                    "date": 1759504817836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,20 +31,59 @@\n \r\n \r\n $mysqli->close();\r\n \r\n+// Changelog'u oku\r\n+$changelog_path = APPPATH . 'config/changelog.json';\r\n+$app_version = '2.4.7'; // Varsayılan versiyon\r\n+if (file_exists($changelog_path)) {\r\n+    $changelog_content = file_get_contents($changelog_path);\r\n+    $changelog_data = json_decode($changelog_content, true);\r\n+    if ($changelog_data && isset($changelog_data['app_version'])) {\r\n+        $app_version = $changelog_data['app_version'];\r\n+    }\r\n+}\r\n ?>\r\n \r\n-\r\n-\r\n <div class=\"footer\">\r\n+\t<p>&copy; ilekaSoft CRM | \r\n+\t\t<a href=\"#\" onclick=\"showChangelog()\" style=\"color:#d92637; cursor: pointer;\" title=\"Versiyon değişikliklerini görüntüle\">\r\n+\t\t\t<i class=\"fa fa-code-branch\"></i> v<?= $app_version; ?>\r\n+\t\t</a> | \r\n+\t\t<a href=\"<?= base_url(\"destek\"); ?>?ref=footer\" style=\"color:#d92637;\">Destek Talep Et</a> | \r\n+\t\t<a href=\"mailto:destek@ilekasoft.com\" style=\"color:#d92637;\">destek@ilekasoft.com</a>\r\n+\t</p>\r\n+</div>\r\n \r\n-\t<p>&copy; ilekaSoft CRM | Versiyon: <?= $son_destek_id; ?> <!-- https://www.utctime.net/ Unix Epoch --> | <a href=\"<?= base_url(\"destek\"); ?>?ref=footer\" style=\"color:#d92637;\">Destek Talep Et</a> | <a href=\"mailto:destek@ilekasoft.com\" style=\"color:#d92637;\">destek@ilekasoft.com</a></p>\r\n-\r\n+<!-- Changelog Modal -->\r\n+<div class=\"modal fade\" id=\"changelogModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"changelogModalLabel\" aria-hidden=\"true\">\r\n+\t<div class=\"modal-dialog modal-lg\" role=\"document\">\r\n+\t\t<div class=\"modal-content\">\r\n+\t\t\t<div class=\"modal-header bg-primary text-white\">\r\n+\t\t\t\t<h5 class=\"modal-title\" id=\"changelogModalLabel\">\r\n+\t\t\t\t\t<i class=\"fa fa-code-branch mr-2\"></i>Versiyon Geçmişi\r\n+\t\t\t\t</h5>\r\n+\t\t\t\t<button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n+\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n+\t\t\t\t</button>\r\n+\t\t\t</div>\r\n+\t\t\t<div class=\"modal-body\">\r\n+\t\t\t\t<div id=\"changelogLoading\" class=\"text-center p-4\">\r\n+\t\t\t\t\t<i class=\"fa fa-spinner fa-spin fa-2x text-primary\"></i>\r\n+\t\t\t\t\t<div class=\"mt-2\">Versiyon bilgileri yükleniyor...</div>\r\n+\t\t\t\t</div>\r\n+\t\t\t\t<div id=\"changelogContent\" style=\"display: none;\">\r\n+\t\t\t\t\t<!-- Changelog içeriği buraya yüklenecek -->\r\n+\t\t\t\t</div>\r\n+\t\t\t</div>\r\n+\t\t\t<div class=\"modal-footer\">\r\n+\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Kapat</button>\r\n+\t\t\t</div>\r\n+\t\t</div>\r\n+\t</div>\r\n </div>\r\n \r\n \r\n-\r\n <!-- jQuery -->\r\n \r\n <script src=\"<?= base_url(); ?>assets/js/jquery-3.5.1.min.js\"></script>\r\n \r\n@@ -583,6 +622,157 @@\n }\r\n \r\n </script>\r\n \r\n+<!-- Changelog Sistemi JavaScript -->\r\n+<script>\r\n+// Changelog modal'ını göster\r\n+function showChangelog() {\r\n+    $('#changelogModal').modal('show');\r\n+    $('#changelogLoading').show();\r\n+    $('#changelogContent').hide();\r\n+    \r\n+    // AJAX ile changelog verilerini getir\r\n+    $.ajax({\r\n+        url: '<?= base_url(\"home/getChangelog\") ?>',\r\n+        method: 'GET',\r\n+        dataType: 'json',\r\n+        success: function(response) {\r\n+            $('#changelogLoading').hide();\r\n+            $('#changelogContent').show();\r\n+            \r\n+            if (response.success && response.data) {\r\n+                renderChangelog(response.data);\r\n+            } else {\r\n+                $('#changelogContent').html(`\r\n+                    <div class=\"alert alert-warning text-center\">\r\n+                        <i class=\"fa fa-exclamation-triangle fa-2x mb-2\"></i>\r\n+                        <h5>Versiyon bilgileri yüklenemedi</h5>\r\n+                        <p>Lütfen daha sonra tekrar deneyin.</p>\r\n+                    </div>\r\n+                `);\r\n+            }\r\n+        },\r\n+        error: function(xhr, status, error) {\r\n+            $('#changelogLoading').hide();\r\n+            $('#changelogContent').show().html(`\r\n+                <div class=\"alert alert-danger text-center\">\r\n+                    <i class=\"fa fa-exclamation-circle fa-2x mb-2\"></i>\r\n+                    <h5>Hata Oluştu</h5>\r\n+                    <p>Versiyon bilgileri yüklenirken bir hata oluştu.</p>\r\n+                    <small>Hata: ${error}</small>\r\n+                </div>\r\n+            `);\r\n+        }\r\n+    });\r\n+}\r\n+\r\n+// Changelog'u render et\r\n+function renderChangelog(data) {\r\n+    let html = `\r\n+        <div class=\"mb-3\">\r\n+            <div class=\"d-flex align-items-center\">\r\n+                <h6 class=\"mb-0\">Güncel Versiyon: </h6>\r\n+                <span class=\"badge badge-primary ml-2\">${data.app_version}</span>\r\n+                <small class=\"text-muted ml-3\">Son güncelleme: ${formatDate(data.last_updated)}</small>\r\n+            </div>\r\n+        </div>\r\n+        <hr>\r\n+    `;\r\n+    \r\n+    if (data.versions && data.versions.length > 0) {\r\n+        data.versions.forEach(function(version, index) {\r\n+            const isLatest = index === 0;\r\n+            \r\n+            html += `\r\n+                <div class=\"card mb-3 ${isLatest ? 'border-primary' : ''}\">\r\n+                    <div class=\"card-header ${isLatest ? 'bg-primary text-white' : 'bg-light'}\">\r\n+                        <div class=\"d-flex justify-content-between align-items-center\">\r\n+                            <h6 class=\"mb-0\">\r\n+                                <i class=\"fa fa-tag mr-2\"></i>\r\n+                                v${version.version} - ${version.title}\r\n+                                ${isLatest ? '<span class=\"badge badge-light text-primary ml-2\">Güncel</span>' : ''}\r\n+                            </h6>\r\n+                            <small>${formatDate(version.date)}</small>\r\n+                        </div>\r\n+                    </div>\r\n+                    <div class=\"card-body\">\r\n+                        <div class=\"row\">\r\n+                            <div class=\"col-md-8\">\r\n+                                <h6>Değişiklikler:</h6>\r\n+                                <ul class=\"list-unstyled\">\r\n+            `;\r\n+            \r\n+            if (version.changes && version.changes.length > 0) {\r\n+                version.changes.forEach(function(change) {\r\n+                    const changeType = data.change_types[change.type] || {\r\n+                        label: change.type,\r\n+                        icon: 'fa-circle',\r\n+                        color: 'secondary'\r\n+                    };\r\n+                    \r\n+                    html += `\r\n+                        <li class=\"mb-2\">\r\n+                            <span class=\"badge badge-${changeType.color} mr-2\">\r\n+                                <i class=\"fa ${changeType.icon} mr-1\"></i>\r\n+                                ${changeType.label}\r\n+                            </span>\r\n+                            <strong>${change.description}</strong>\r\n+                            ${change.details ? `<br><small class=\"text-muted ml-4\">${change.details}</small>` : ''}\r\n+                        </li>\r\n+                    `;\r\n+                });\r\n+            }\r\n+            \r\n+            html += `\r\n+                                </ul>\r\n+                            </div>\r\n+                            <div class=\"col-md-4\">\r\n+                                <h6>Teknik Bilgiler:</h6>\r\n+                                <ul class=\"list-unstyled small\">\r\n+                                    <li><strong>Değiştirilen Dosyalar:</strong> ${version.files_modified.length}</li>\r\n+                                    <li><strong>Veritabanı Değişikliği:</strong> ${version.db_changes ? 'Evet' : 'Hayır'}</li>\r\n+                                </ul>\r\n+                                ${version.files_modified.length > 0 ? `\r\n+                                    <button class=\"btn btn-sm btn-outline-info\" type=\"button\" data-toggle=\"collapse\" \r\n+                                            data-target=\"#files-${version.version.replace('.', '-')}\" aria-expanded=\"false\">\r\n+                                        <i class=\"fa fa-file-code\"></i> Dosyaları Göster\r\n+                                    </button>\r\n+                                    <div class=\"collapse mt-2\" id=\"files-${version.version.replace('.', '-')}\">\r\n+                                        <div class=\"card card-body p-2\">\r\n+                                            <ul class=\"list-unstyled mb-0 small\">\r\n+                                                ${version.files_modified.map(file => `<li><code>${file}</code></li>`).join('')}\r\n+                                            </ul>\r\n+                                        </div>\r\n+                                    </div>\r\n+                                ` : ''}\r\n+                            </div>\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            `;\r\n+        });\r\n+    } else {\r\n+        html += `\r\n+            <div class=\"text-center text-muted\">\r\n+                <i class=\"fa fa-info-circle fa-2x mb-2\"></i>\r\n+                <p>Henüz versiyon geçmişi bulunmuyor.</p>\r\n+            </div>\r\n+        `;\r\n+    }\r\n+    \r\n+    $('#changelogContent').html(html);\r\n+}\r\n+\r\n+// Tarih formatla\r\n+function formatDate(dateString) {\r\n+    const date = new Date(dateString);\r\n+    return date.toLocaleDateString('tr-TR', {\r\n+        year: 'numeric',\r\n+        month: 'long',\r\n+        day: 'numeric'\r\n+    });\r\n+}\r\n+</script>\r\n+\r\n <!-- Konum Takibi Sistemi -->\r\n <script src=\"<?= base_url(); ?>assets/js/konum-takibi.js\"></script>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1759917675387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,9 +33,9 @@\n $mysqli->close();\r\n \r\n // Changelog'u oku\r\n $changelog_path = APPPATH . 'config/changelog.json';\r\n-$app_version = '2.4.7'; // Varsayılan versiyon\r\n+$app_version = '2.4.9'; // Varsayılan versiyon\r\n if (file_exists($changelog_path)) {\r\n     $changelog_content = file_get_contents($changelog_path);\r\n     $changelog_data = json_decode($changelog_content, true);\r\n     if ($changelog_data && isset($changelog_data['app_version'])) {\r\n"
                },
                {
                    "date": 1759926264614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n \t\t\t\t<button type=\"button\" class=\"close text-white\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n \t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n \t\t\t\t</button>\r\n \t\t\t</div>\r\n-\t\t\t<div class=\"modal-body\">\r\n+\t\t\t<div class=\"modal-body\" style=\"max-height: 70vh; overflow-y: auto;\">\r\n \t\t\t\t<div id=\"changelogLoading\" class=\"text-center p-4\">\r\n \t\t\t\t\t<i class=\"fa fa-spinner fa-spin fa-2x text-primary\"></i>\r\n \t\t\t\t\t<div class=\"mt-2\">Versiyon bilgileri yükleniyor...</div>\r\n \t\t\t\t</div>\r\n@@ -81,9 +81,49 @@\n \t\t</div>\r\n \t</div>\r\n </div>\r\n \r\n+<style>\r\n+.version-toggle-icon {\r\n+    transition: transform 0.2s ease;\r\n+}\r\n \r\n+.card-header[aria-expanded=\"true\"] .version-toggle-icon {\r\n+    transform: rotate(90deg);\r\n+}\r\n+\r\n+.pagination .page-link {\r\n+    color: #d92637;\r\n+    border-color: #dee2e6;\r\n+}\r\n+\r\n+.pagination .page-item.active .page-link {\r\n+    background-color: #d92637;\r\n+    border-color: #d92637;\r\n+}\r\n+\r\n+.pagination .page-link:hover {\r\n+    color: #a91e2b;\r\n+    background-color: #f8f9fa;\r\n+    border-color: #dee2e6;\r\n+}\r\n+\r\n+.pagination .page-item.disabled .page-link {\r\n+    color: #6c757d;\r\n+    background-color: #fff;\r\n+    border-color: #dee2e6;\r\n+}\r\n+\r\n+#changelogContent .card-header {\r\n+    transition: background-color 0.2s ease;\r\n+}\r\n+\r\n+#changelogContent .card-header:hover {\r\n+    opacity: 0.9;\r\n+}\r\n+</style>\r\n+\r\n+\r\n <!-- jQuery -->\r\n \r\n <script src=\"<?= base_url(); ?>assets/js/jquery-3.5.1.min.js\"></script>\r\n \r\n@@ -624,8 +664,12 @@\n </script>\r\n \r\n <!-- Changelog Sistemi JavaScript -->\r\n <script>\r\n+let changelogData = null;\r\n+let currentPage = 1;\r\n+const itemsPerPage = 10;\r\n+\r\n // Changelog modal'ını göster\r\n function showChangelog() {\r\n     $('#changelogModal').modal('show');\r\n     $('#changelogLoading').show();\r\n@@ -640,9 +684,11 @@\n             $('#changelogLoading').hide();\r\n             $('#changelogContent').show();\r\n             \r\n             if (response.success && response.data) {\r\n-                renderChangelog(response.data);\r\n+                changelogData = response.data;\r\n+                currentPage = 1;\r\n+                renderChangelog(changelogData);\r\n             } else {\r\n                 $('#changelogContent').html(`\r\n                     <div class=\"alert alert-warning text-center\">\r\n                         <i class=\"fa fa-exclamation-triangle fa-2x mb-2\"></i>\r\n@@ -667,64 +713,92 @@\n }\r\n \r\n // Changelog'u render et\r\n function renderChangelog(data) {\r\n+    if (!data.versions || data.versions.length === 0) {\r\n+        $('#changelogContent').html(`\r\n+            <div class=\"text-center text-muted\">\r\n+                <i class=\"fa fa-info-circle fa-2x mb-2\"></i>\r\n+                <p>Henüz versiyon geçmişi bulunmuyor.</p>\r\n+            </div>\r\n+        `);\r\n+        return;\r\n+    }\r\n+\r\n+    const totalPages = Math.ceil(data.versions.length / itemsPerPage);\r\n+    const startIndex = (currentPage - 1) * itemsPerPage;\r\n+    const endIndex = startIndex + itemsPerPage;\r\n+    const currentVersions = data.versions.slice(startIndex, endIndex);\r\n+\r\n     let html = `\r\n         <div class=\"mb-3\">\r\n-            <div class=\"d-flex align-items-center\">\r\n-                <h6 class=\"mb-0\">Güncel Versiyon: </h6>\r\n-                <span class=\"badge badge-primary ml-2\">${data.app_version}</span>\r\n-                <small class=\"text-muted ml-3\">Son güncelleme: ${formatDate(data.last_updated)}</small>\r\n+            <div class=\"d-flex align-items-center justify-content-between\">\r\n+                <div class=\"d-flex align-items-center\">\r\n+                    <h6 class=\"mb-0\">Güncel Versiyon: </h6>\r\n+                    <span class=\"badge badge-primary ml-2\">${data.app_version}</span>\r\n+                    <small class=\"text-muted ml-3\">Son güncelleme: ${formatDate(data.last_updated)}</small>\r\n+                </div>\r\n+                <div class=\"text-muted small\">\r\n+                    Sayfa ${currentPage} / ${totalPages} (Toplam ${data.versions.length} versiyon)\r\n+                </div>\r\n             </div>\r\n         </div>\r\n         <hr>\r\n     `;\r\n     \r\n-    if (data.versions && data.versions.length > 0) {\r\n-        data.versions.forEach(function(version, index) {\r\n-            const isLatest = index === 0;\r\n-            \r\n-            html += `\r\n-                <div class=\"card mb-3 ${isLatest ? 'border-primary' : ''}\">\r\n-                    <div class=\"card-header ${isLatest ? 'bg-primary text-white' : 'bg-light'}\">\r\n-                        <div class=\"d-flex justify-content-between align-items-center\">\r\n-                            <h6 class=\"mb-0\">\r\n-                                <i class=\"fa fa-tag mr-2\"></i>\r\n-                                v${version.version} - ${version.title}\r\n-                                ${isLatest ? '<span class=\"badge badge-light text-primary ml-2\">Güncel</span>' : ''}\r\n-                            </h6>\r\n-                            <small>${formatDate(version.date)}</small>\r\n-                        </div>\r\n+    currentVersions.forEach(function(version, index) {\r\n+        const globalIndex = startIndex + index;\r\n+        const isLatest = globalIndex === 0;\r\n+        const versionId = `version-${version.version.replace(/\\./g, '-')}`;\r\n+        \r\n+        html += `\r\n+            <div class=\"card mb-3 ${isLatest ? 'border-primary' : ''}\">\r\n+                <div class=\"card-header ${isLatest ? 'bg-primary text-white' : 'bg-light'}\" \r\n+                     style=\"cursor: pointer;\" \r\n+                     onclick=\"toggleVersionDetails('${versionId}')\" \r\n+                     data-toggle=\"collapse\" \r\n+                     data-target=\"#${versionId}\" \r\n+                     aria-expanded=\"false\">\r\n+                    <div class=\"d-flex justify-content-between align-items-center\">\r\n+                        <h6 class=\"mb-0\">\r\n+                            <i class=\"fa fa-chevron-right mr-2 version-toggle-icon\" id=\"icon-${versionId}\"></i>\r\n+                            <i class=\"fa fa-tag mr-2\"></i>\r\n+                            v${version.version} - ${version.title}\r\n+                            ${isLatest ? '<span class=\"badge badge-light text-primary ml-2\">Güncel</span>' : ''}\r\n+                        </h6>\r\n+                        <small>${formatDate(version.date)}</small>\r\n                     </div>\r\n+                </div>\r\n+                <div class=\"collapse\" id=\"${versionId}\">\r\n                     <div class=\"card-body\">\r\n                         <div class=\"row\">\r\n                             <div class=\"col-md-8\">\r\n                                 <h6>Değişiklikler:</h6>\r\n                                 <ul class=\"list-unstyled\">\r\n-            `;\r\n-            \r\n-            if (version.changes && version.changes.length > 0) {\r\n-                version.changes.forEach(function(change) {\r\n-                    const changeType = data.change_types[change.type] || {\r\n-                        label: change.type,\r\n-                        icon: 'fa-circle',\r\n-                        color: 'secondary'\r\n-                    };\r\n-                    \r\n-                    html += `\r\n-                        <li class=\"mb-2\">\r\n-                            <span class=\"badge badge-${changeType.color} mr-2\">\r\n-                                <i class=\"fa ${changeType.icon} mr-1\"></i>\r\n-                                ${changeType.label}\r\n-                            </span>\r\n-                            <strong>${change.description}</strong>\r\n-                            ${change.details ? `<br><small class=\"text-muted ml-4\">${change.details}</small>` : ''}\r\n-                        </li>\r\n-                    `;\r\n-                });\r\n-            }\r\n-            \r\n-            html += `\r\n+        `;\r\n+        \r\n+        if (version.changes && version.changes.length > 0) {\r\n+            version.changes.forEach(function(change) {\r\n+                const changeType = data.change_types[change.type] || {\r\n+                    label: change.type,\r\n+                    icon: 'fa-circle',\r\n+                    color: 'secondary'\r\n+                };\r\n+                \r\n+                html += `\r\n+                    <li class=\"mb-2\">\r\n+                        <span class=\"badge badge-${changeType.color} mr-2\">\r\n+                            <i class=\"fa ${changeType.icon} mr-1\"></i>\r\n+                            ${changeType.label}\r\n+                        </span>\r\n+                        <strong>${change.description}</strong>\r\n+                        ${change.details ? `<br><small class=\"text-muted ml-4\">${change.details}</small>` : ''}\r\n+                    </li>\r\n+                `;\r\n+            });\r\n+        }\r\n+        \r\n+        html += `\r\n                                 </ul>\r\n                             </div>\r\n                             <div class=\"col-md-4\">\r\n                                 <h6>Teknik Bilgiler:</h6>\r\n@@ -733,12 +807,12 @@\n                                     <li><strong>Veritabanı Değişikliği:</strong> ${version.db_changes ? 'Evet' : 'Hayır'}</li>\r\n                                 </ul>\r\n                                 ${version.files_modified.length > 0 ? `\r\n                                     <button class=\"btn btn-sm btn-outline-info\" type=\"button\" data-toggle=\"collapse\" \r\n-                                            data-target=\"#files-${version.version.replace('.', '-')}\" aria-expanded=\"false\">\r\n+                                            data-target=\"#files-${version.version.replace(/\\./g, '-')}\" aria-expanded=\"false\">\r\n                                         <i class=\"fa fa-file-code\"></i> Dosyaları Göster\r\n                                     </button>\r\n-                                    <div class=\"collapse mt-2\" id=\"files-${version.version.replace('.', '-')}\">\r\n+                                    <div class=\"collapse mt-2\" id=\"files-${version.version.replace(/\\./g, '-')}\">\r\n                                         <div class=\"card card-body p-2\">\r\n                                             <ul class=\"list-unstyled mb-0 small\">\r\n                                                 ${version.files_modified.map(file => `<li><code>${file}</code></li>`).join('')}\r\n                                             </ul>\r\n@@ -748,22 +822,89 @@\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                 </div>\r\n+            </div>\r\n+        `;\r\n+    });\r\n+\r\n+    // Pagination kontrollerini ekle\r\n+    if (totalPages > 1) {\r\n+        html += `\r\n+            <nav aria-label=\"Versiyon sayfalama\">\r\n+                <ul class=\"pagination justify-content-center\">\r\n+                    <li class=\"page-item ${currentPage === 1 ? 'disabled' : ''}\">\r\n+                        <a class=\"page-link\" href=\"#\" onclick=\"changePage(${currentPage - 1}); return false;\">\r\n+                            <i class=\"fa fa-chevron-left\"></i> Önceki\r\n+                        </a>\r\n+                    </li>\r\n+        `;\r\n+\r\n+        // Sayfa numaralarını göster\r\n+        const startPage = Math.max(1, currentPage - 2);\r\n+        const endPage = Math.min(totalPages, currentPage + 2);\r\n+\r\n+        if (startPage > 1) {\r\n+            html += `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" onclick=\"changePage(1); return false;\">1</a></li>`;\r\n+            if (startPage > 2) {\r\n+                html += `<li class=\"page-item disabled\"><span class=\"page-link\">...</span></li>`;\r\n+            }\r\n+        }\r\n+\r\n+        for (let i = startPage; i <= endPage; i++) {\r\n+            html += `\r\n+                <li class=\"page-item ${i === currentPage ? 'active' : ''}\">\r\n+                    <a class=\"page-link\" href=\"#\" onclick=\"changePage(${i}); return false;\">${i}</a>\r\n+                </li>\r\n             `;\r\n-        });\r\n-    } else {\r\n+        }\r\n+\r\n+        if (endPage < totalPages) {\r\n+            if (endPage < totalPages - 1) {\r\n+                html += `<li class=\"page-item disabled\"><span class=\"page-link\">...</span></li>`;\r\n+            }\r\n+            html += `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" onclick=\"changePage(${totalPages}); return false;\">${totalPages}</a></li>`;\r\n+        }\r\n+\r\n         html += `\r\n-            <div class=\"text-center text-muted\">\r\n-                <i class=\"fa fa-info-circle fa-2x mb-2\"></i>\r\n-                <p>Henüz versiyon geçmişi bulunmuyor.</p>\r\n-            </div>\r\n+                    <li class=\"page-item ${currentPage === totalPages ? 'disabled' : ''}\">\r\n+                        <a class=\"page-link\" href=\"#\" onclick=\"changePage(${currentPage + 1}); return false;\">\r\n+                            Sonraki <i class=\"fa fa-chevron-right\"></i>\r\n+                        </a>\r\n+                    </li>\r\n+                </ul>\r\n+            </nav>\r\n         `;\r\n     }\r\n     \r\n     $('#changelogContent').html(html);\r\n }\r\n \r\n+// Versiyon detaylarını aç/kapat\r\n+function toggleVersionDetails(versionId) {\r\n+    const icon = $('#icon-' + versionId);\r\n+    const isCollapsed = $('#' + versionId).hasClass('show');\r\n+    \r\n+    if (isCollapsed) {\r\n+        icon.removeClass('fa-chevron-down').addClass('fa-chevron-right');\r\n+    } else {\r\n+        icon.removeClass('fa-chevron-right').addClass('fa-chevron-down');\r\n+    }\r\n+}\r\n+\r\n+// Sayfa değiştir\r\n+function changePage(page) {\r\n+    if (!changelogData || page < 1 || page > Math.ceil(changelogData.versions.length / itemsPerPage)) {\r\n+        return;\r\n+    }\r\n+    \r\n+    currentPage = page;\r\n+    renderChangelog(changelogData);\r\n+    \r\n+    // Modal içeriğini en üste kaydır\r\n+    $('#changelogContent').scrollTop(0);\r\n+}\r\n+\r\n // Tarih formatla\r\n function formatDate(dateString) {\r\n     const date = new Date(dateString);\r\n     return date.toLocaleDateString('tr-TR', {\r\n"
                }
            ],
            "date": 1756311206822,
            "name": "Commit-0",
            "content": "<a href=\"<?= base_url(\"destek\"); ?>?ref=footer\" class=\"destek_btn\"> <i data-feather=\"life-buoy\" class=\"mr-1\"></i> Destek Talep Et</a>\r\n\r\n\r\n\r\n<?php\r\n\r\n// MySQL bağlantısını yapalım\r\n\r\n$mysqli = new mysqli('localhost', 'ilekasoft_crmuser', 'KaleW356!', 'ilekasoft_crmdb');\r\n\r\n\r\n\r\n// Bağlantıyı kontrol et\r\n\r\nif ($mysqli->connect_error) {\r\n\r\n    die('Bağlantı hatası: ' . $mysqli->connect_error);\r\n\r\n}\r\n\r\n\r\n\r\n// En son destek_id değerini al\r\n\r\n$result = $mysqli->query(\"SELECT MAX(destek_id) as son_destek_id FROM destek\");\r\n\r\n$row = $result->fetch_assoc();\r\n\r\n$son_destek_id = $row['son_destek_id'] ?? 'Bilinmiyor';\r\n\r\n\r\n\r\n$mysqli->close();\r\n\r\n?>\r\n\r\n\r\n\r\n<div class=\"footer\">\r\n\r\n\t<p>&copy; ilekaSoft CRM | Versiyon: <?= $son_destek_id; ?> <!-- https://www.utctime.net/ Unix Epoch --> | <a href=\"<?= base_url(\"destek\"); ?>?ref=footer\" style=\"color:#d92637;\">Destek Talep Et</a> | <a href=\"mailto:destek@ilekasoft.com\" style=\"color:#d92637;\">destek@ilekasoft.com</a></p>\r\n\r\n</div>\r\n\r\n\r\n\r\n<!-- jQuery -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/jquery-3.5.1.min.js\"></script>\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js\" integrity=\"sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\r\n\r\n\r\n\r\n<!-- Bootstrap Core JS -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/popper.min.js\"></script>\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/bootstrap.min.js\"></script>\r\n\r\n\r\n\r\n<script src=\"<?= base_url(); ?>assets/plugins/bootstrap-datepicker-1.9.0-dist/js/bootstrap-datepicker.min.js\"></script>\r\n\r\n<script src=\"<?= base_url(); ?>assets/plugins/bootstrap-datepicker-1.9.0-dist/locales/bootstrap-datepicker.tr.min.js\"></script>\r\n\r\n\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js\" type=\"text/javascript\" ></script>\r\n\r\n<script type=\"text/javascript\" src=\"//cdn.jsdelivr.net/momentjs/latest/moment-with-locales.min.js\"></script>\r\n\r\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js\"></script>\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/daterangepicker.js\"></script>\r\n\r\n\r\n\r\n<!-- Feather Icon JS -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/feather.min.js\"></script>\r\n\r\n\r\n\r\n<!-- Slimscroll JS -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/plugins/slimscroll/jquery.slimscroll.min.js\"></script>\r\n\r\n\r\n\r\n<!-- Select2 JS -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/plugins/select2/js/select2.min.js\"></script>\r\n\r\n\r\n\r\n\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/bootstrap-session-timeout.js\"></script>\r\n\r\n\r\n\r\n<!-- Custom JS -->\r\n\r\n<script src=\"<?= base_url(); ?>assets/js/script.js\"></script>\r\n\r\n\r\n\r\n\r\n\r\n<!-- \r\n\r\n<script>\r\n\r\n\tsetInterval(function(){\r\n\r\n\t\tvar base_url = \"<?php echo base_url();?>\";\r\n\r\n\t\t$.post(base_url + 'home/sessionKontrol', function (result) {\r\n\r\n\t\t\tif(result==\"1\")\r\n\r\n\t\t\t\twindow.location.href = base_url+\"home/logout\";\r\n\r\n\t\t});\r\n\r\n\t},5000);\r\n\r\n</script>\r\n\r\n-->\r\n\r\n\r\n\r\n<script>\r\n\r\n\t// Slideshow functionality wrapped in IIFE to avoid global scope pollution\r\n\r\n\t(function() {\r\n\r\n\t\tlet slideIndex = 1;\r\n\r\n\t\t\r\n\r\n\t\tfunction showSlides(n) {\r\n\r\n\t\t\tlet i;\r\n\r\n\t\t\tlet slides = document.getElementsByClassName(\"mySlides\");\r\n\r\n\t\t\tlet dots = document.getElementsByClassName(\"dot\");\r\n\r\n\t\t\t\r\n\r\n\t\t\tif (slides.length === 0) return; // No slides found\r\n\r\n\t\t\t\r\n\r\n\t\t\tif (n > slides.length) {slideIndex = 1}\r\n\r\n\t\t\tif (n < 1) {slideIndex = slides.length}\r\n\r\n\t\t\tfor (i = 0; i < slides.length; i++) {\r\n\r\n\t\t\t\tslides[i].style.display = \"none\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < dots.length; i++) {\r\n\r\n\t\t\t\tdots[i].className = dots[i].className.replace(\" active\", \"\");\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (slides[slideIndex-1]) {\r\n\r\n\t\t\t\tslides[slideIndex-1].style.display = \"block\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (dots[slideIndex-1]) {\r\n\r\n\t\t\t\tdots[slideIndex-1].className += \" active\";\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t// Global functions for slideshow control\r\n\r\n\t\twindow.plusSlides = function(n) {\r\n\r\n\t\t\tshowSlides(slideIndex += n);\r\n\r\n\t\t};\r\n\r\n\r\n\r\n\t\twindow.currentSlide = function(n) {\r\n\r\n\t\t\tshowSlides(slideIndex = n);\r\n\r\n\t\t};\r\n\r\n\t\t\r\n\r\n\t\t// Initialize slideshow if slides exist\r\n\r\n\t\tif (document.getElementsByClassName(\"mySlides\").length > 0) {\r\n\r\n\t\t\tshowSlides(slideIndex);\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Auto-advance slides\r\n\r\n\t\t\twindow.onload = function () {\r\n\r\n\t\t\t\tsetInterval(function(){\r\n\r\n\t\t\t\t\twindow.plusSlides(1);\r\n\r\n\t\t\t\t}, 5000);\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t})();\r\n\r\n\r\n\r\n\t$.sessionTimeout({\r\n\r\n\t\tlogoutUrl: '<?= base_url('home/logout'); ?>',\r\n\r\n\t\tredirUrl: '<?= base_url('home/logout'); ?>',\r\n\r\n\t\twarnAfter: 600000, //600000    10 dakika\r\n\r\n\t\tredirAfter: 620000, //620000 10dakika20saniye\r\n\r\n\t\tignoreUserActivity:true,\r\n\r\n\t\tcountdownMessage: '{timer} saniye sonunda çıkışa yönlendirileceksiniz.'\r\n\r\n\t});\r\n\r\n</script>\r\n\r\n\r\n\r\n<!-- Bildirim Sistemi JavaScript -->\r\n\r\n<script>\r\n\r\nlet notificationInterval;\r\n\r\n\r\n\r\nfunction bildirimleriniYukle() {\r\n\r\n    $.ajax({\r\n\r\n        url: '<?= base_url(\"home/bildirim_listesi\"); ?>',\r\n\r\n        type: 'GET',\r\n\r\n        dataType: 'json',\r\n\r\n        success: function(response) {\r\n\r\n            if(response.success) {\r\n\r\n                const count = response.toplam;\r\n\r\n                const bildirimler = response.bildirimler;\r\n\r\n                \r\n\r\n                // Bildirim sayısını güncelle\r\n\r\n                if(count > 0) {\r\n\r\n                    $('#notification-count').text(count).show();\r\n\r\n                } else {\r\n\r\n                    $('#notification-count').hide();\r\n\r\n                }\r\n\r\n                \r\n\r\n                // Bildirim içeriğini güncelle\r\n\r\n                let content = '';\r\n\r\n                if(bildirimler.length > 0) {\r\n\r\n                    bildirimler.forEach(function(bildirim) {\r\n\r\n                        const tarih = new Date(bildirim.bildirim_tarih);\r\n\r\n                        const tarihStr = tarih.toLocaleString('tr-TR', {\r\n\r\n                            day: '2-digit',\r\n\r\n                            month: '2-digit',\r\n\r\n                            hour: '2-digit',\r\n\r\n                            minute: '2-digit'\r\n\r\n                        });\r\n\r\n                        \r\n\r\n                        content += `\r\n\r\n                            <div class=\"notification-item ${bildirim.bildirim_okundu == 0 ? 'unread' : ''}\" \r\n\r\n                                 data-id=\"${bildirim.bildirim_id}\" \r\n\r\n                                 data-link=\"${bildirim.bildirim_link || '#'}\"\r\n\r\n                                 onclick=\"bildirimTikla(${bildirim.bildirim_id}, '${bildirim.bildirim_link || '#'}')\">\r\n\r\n                                <div class=\"noti-title\">${bildirim.bildirim_baslik}</div>\r\n\r\n                                <div class=\"noti-message\">${bildirim.bildirim_mesaj}</div>\r\n\r\n                                <div class=\"noti-time\">${tarihStr}</div>\r\n\r\n                            </div>\r\n\r\n                        `;\r\n\r\n                    });\r\n\r\n                } else {\r\n\r\n                    content = `\r\n\r\n                        <div class=\"notification-message text-center\">\r\n\r\n                            <i data-feather=\"bell\" class=\"text-muted\"></i>\r\n\r\n                            <p>Yeni bildirim bulunmuyor</p>\r\n\r\n                        </div>\r\n\r\n                    `;\r\n\r\n                }\r\n\r\n                \r\n\r\n                $('#notification-content').html(content);\r\n\r\n                \r\n\r\n                // Feather icons'u yeniden başlat (güvenli şekilde)\r\n\r\n                try {\r\n\r\n                    if(typeof feather !== 'undefined' && feather && feather.replace) {\r\n\r\n                        feather.replace();\r\n\r\n                    }\r\n\r\n                } catch(e) {\r\n\r\n                    console.warn('Feather icons could not be replaced:', e);\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        error: function() {\r\n\r\n            console.error('Bildirimler yüklenemedi');\r\n\r\n        }\r\n\r\n    });\r\n\r\n}\r\n\r\n\r\n\r\nfunction bildirimTikla(bildirimId, link) {\r\n\r\n    // Bildirimi okundu olarak işaretle\r\n\r\n    $.ajax({\r\n\r\n        url: '<?= base_url(\"home/bildirim_okundu\"); ?>',\r\n\r\n        type: 'POST',\r\n\r\n        data: {\r\n\r\n            bildirim_id: bildirimId\r\n\r\n        },\r\n\r\n        success: function(response) {\r\n\r\n            if(response.success) {\r\n\r\n                // Bildirimi okundu olarak görsel güncelle\r\n\r\n                $(`[data-id=\"${bildirimId}\"]`).removeClass('unread');\r\n\r\n                \r\n\r\n                // Bildirim sayısını güncelle\r\n\r\n                setTimeout(function() {\r\n\r\n                    bildirimleriniYukle();\r\n\r\n                }, 500);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    });\r\n\r\n    \r\n\r\n    // Linke yönlendir\r\n\r\n    if(link && link !== '#') {\r\n\r\n        window.location.href = link;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction tumBildirimleriTemizle() {\r\n\r\n    swal({\r\n\r\n        title: \"Emin misiniz?\",\r\n\r\n        text: \"Tüm bildirimler silinecektir!\",\r\n\r\n        type: \"warning\",\r\n\r\n        showCancelButton: true,\r\n\r\n        confirmButtonText: \"Evet, sil!\",\r\n\r\n        cancelButtonText: \"İptal\",\r\n\r\n        closeOnConfirm: false\r\n\r\n    }, function(isConfirm) {\r\n\r\n        if (isConfirm) {\r\n\r\n            // Tüm bildirimleri temizle (bu endpoint'i ekleyeceğiz)\r\n\r\n            $.ajax({\r\n\r\n                url: '<?= base_url(\"home/bildirim_temizle\"); ?>',\r\n\r\n                type: 'POST',\r\n\r\n                success: function(response) {\r\n\r\n                    swal(\"Tamamlandı!\", \"Tüm bildirimler temizlendi.\", \"success\");\r\n\r\n                    bildirimleriniYukle();\r\n\r\n                },\r\n\r\n                error: function() {\r\n\r\n                    swal(\"Hata!\", \"Bildirimler temizlenemedi.\", \"error\");\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n    });\r\n\r\n}\r\n\r\n\r\n\r\n// Sayfa yüklendiğinde bildirimler yükle\r\n\r\n$(document).ready(function() {\r\n\r\n    bildirimleriniYukle();\r\n\r\n    \r\n\r\n    // Her 30 saniyede bir bildirimler güncelle\r\n\r\n    notificationInterval = setInterval(bildirimleriniYukle, 30000);\r\n\r\n});\r\n\r\n\r\n\r\n// Sayfa kapanırken interval'i temizle\r\n\r\n$(window).on('beforeunload', function() {\r\n\r\n    if(notificationInterval) {\r\n\r\n        clearInterval(notificationInterval);\r\n\r\n    }\r\n\r\n});\r\n\r\n\r\n\r\n// Destek detay sayfasında yanıtları okundu olarak işaretle\r\n\r\nif(window.location.pathname.includes('/destek/detay/')) {\r\n\r\n    // Sayfa yüklendiğinde tüm yanıtları okundu olarak işaretle\r\n\r\n    setTimeout(function() {\r\n\r\n        $('.new-reply').each(function() {\r\n\r\n            const replyId = $(this).data('reply-id');\r\n\r\n            if(replyId) {\r\n\r\n                $.ajax({\r\n\r\n                    url: '<?= base_url(\"home/yanit_okundu\"); ?>',\r\n\r\n                    type: 'POST',\r\n\r\n                    data: {\r\n\r\n                        yanit_id: replyId\r\n\r\n                    },\r\n\r\n                    success: function(response) {\r\n\r\n                        if(response.success) {\r\n\r\n                            $(this).removeClass('new-reply');\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }, 2000);\r\n\r\n}\r\n\r\n</script>\r\n\r\n<!-- Konum Takibi Sistemi -->\r\n<script src=\"<?= base_url(); ?>assets/js/konum-takibi.js\"></script>"
        }
    ]
}