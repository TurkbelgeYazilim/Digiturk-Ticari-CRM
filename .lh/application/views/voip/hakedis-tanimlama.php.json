{
    "sourceFile": "application/views/voip/hakedis-tanimlama.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1754724208110,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754731149946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,180 +97,54 @@\n \t\tborder-color: #c82333;\r\n \t\ttransform: translateY(-1px);\r\n \t}\r\n \t\r\n-\t.btn-info {\r\n-\t\tbackground-color: #17a2b8;\r\n-\t\tborder-color: #17a2b8;\r\n-\t}\r\n-\t\r\n-\t.btn-info:hover {\r\n-\t\tbackground-color: #138496;\r\n-\t\tborder-color: #138496;\r\n-\t\ttransform: translateY(-1px);\r\n-\t}\r\n-\t\r\n-\t.modal-header {\r\n+\t.stats-card {\r\n \t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n \t\tcolor: white;\r\n-\t\tborder-bottom: none;\r\n-\t}\r\n-\t\r\n-\t.modal-header .close {\r\n-\t\tcolor: white;\r\n-\t\topacity: 0.8;\r\n-\t}\r\n-\t\r\n-\t.modal-header .close:hover {\r\n-\t\topacity: 1;\r\n-\t}\r\n-\t\r\n-\t.alert {\r\n-\t\tmargin-top: 15px;\r\n-\t\tborder: none;\r\n+\t\tpadding: 20px;\r\n \t\tborder-radius: 0.375rem;\r\n-\t}\r\n-\t\r\n-\t.alert-success {\r\n-\t\tbackground-color: #d4edda;\r\n-\t\tcolor: #155724;\r\n-\t}\r\n-\t\r\n-\t.alert-danger {\r\n-\t\tbackground-color: #f8d7da;\r\n-\t\tcolor: #721c24;\r\n-\t}\r\n-\t\r\n-\t.alert-info {\r\n-\t\tbackground-color: #d1ecf1;\r\n-\t\tcolor: #0c5460;\r\n-\t}\r\n-\t\r\n-\t.badge {\r\n-\t\tpadding: 0.375rem 0.75rem;\r\n-\t\tborder-radius: 0.375rem;\r\n-\t\tfont-size: 0.75rem;\r\n-\t\tfont-weight: 500;\r\n-\t}\r\n-\t\r\n-\t.badge-success {\r\n-\t\tbackground-color: #28a745;\r\n-\t\tcolor: white;\r\n-\t}\r\n-\t\r\n-\t.badge-danger {\r\n-\t\tbackground-color: #dc3545;\r\n-\t\tcolor: white;\r\n-\t}\r\n-\t\r\n-\t.badge-warning {\r\n-\t\tbackground-color: #ffc107;\r\n-\t\tcolor: #212529;\r\n-\t}\r\n-\t\r\n-\t.text-muted {\r\n-\t\tcolor: #6c757d !important;\r\n-\t}\r\n-\t\r\n-\t.empty-state {\r\n \t\ttext-align: center;\r\n-\t\tpadding: 3rem 1rem;\r\n-\t\tcolor: #6c757d;\r\n-\t}\r\n-\t\r\n-\t.empty-state i {\r\n-\t\tfont-size: 3rem;\r\n-\t\tmargin-bottom: 1rem;\r\n-\t\topacity: 0.5;\r\n-\t}\r\n-\t\r\n-\t.money-display {\r\n-\t\tfont-weight: 600;\r\n-\t\tcolor: #28a745;\r\n-\t}\r\n-\t\r\n-\t.stats-card {\r\n-\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n-\t\tcolor: white;\r\n-\t\tborder-radius: 10px;\r\n-\t\tpadding: 20px;\r\n \t\tmargin-bottom: 20px;\r\n+\t\tbox-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n \t}\r\n \t\r\n \t.stats-card h3 {\r\n-\t\tmargin: 0;\r\n+\t\tmargin: 0 0 5px 0;\r\n \t\tfont-size: 2rem;\r\n \t\tfont-weight: 700;\r\n \t}\r\n \t\r\n \t.stats-card p {\r\n-\t\tmargin: 5px 0 0 0;\r\n+\t\tmargin: 0;\r\n \t\topacity: 0.9;\r\n \t}\r\n \t\r\n-\t/* Select2 Özelleştirmeleri */\r\n-\t.select2-container--default .select2-selection--single {\r\n-\t\theight: 38px;\r\n-\t\tborder: 1px solid #ced4da;\r\n-\t\tborder-radius: 0.375rem;\r\n-\t}\r\n-\t\r\n-\t.select2-container--default .select2-selection--single .select2-selection__rendered {\r\n-\t\tline-height: 36px;\r\n-\t\tpadding-left: 12px;\r\n-\t\tcolor: #495057;\r\n-\t}\r\n-\t\r\n-\t.select2-container--default .select2-selection--single .select2-selection__arrow {\r\n-\t\theight: 36px;\r\n-\t\tright: 10px;\r\n-\t}\r\n-\t\r\n-\t.select2-dropdown {\r\n-\t\tborder: 1px solid #ced4da;\r\n-\t\tborder-radius: 0.375rem;\r\n-\t}\r\n-\t\r\n-\t.select2-container--default .select2-search--dropdown .select2-search__field {\r\n-\t\tborder: 1px solid #ced4da;\r\n-\t\tborder-radius: 0.375rem;\r\n-\t\tpadding: 8px;\r\n-\t}\r\n-\t\r\n-\t.select2-container--default .select2-results__option[aria-selected=true] {\r\n-\t\tbackground-color: #007bff;\r\n-\t}\r\n-\t\r\n-\t.select2-container--default .select2-results__option--highlighted[aria-selected] {\r\n-\t\tbackground-color: #0056b3;\r\n-\t\tcolor: white;\r\n-\t}\r\n-\t\r\n \t.filter-card {\r\n \t\tbackground-color: #f8f9fa;\r\n \t\tborder: 1px solid #dee2e6;\r\n \t\tborder-radius: 0.375rem;\r\n \t\tpadding: 15px;\r\n \t\tmargin-bottom: 20px;\r\n \t}\r\n \t\r\n-\t/* Bootstrap 3/4 uyumluluk sınıfları */\r\n-\t.me-1 {\r\n-\t\tmargin-right: 0.25rem !important;\r\n+\t.money-display {\r\n+\t\tfont-weight: 600;\r\n+\t\tcolor: #28a745;\r\n \t}\r\n \t\r\n-\t.me-2 {\r\n-\t\tmargin-right: 0.5rem !important;\r\n+\t.empty-state {\r\n+\t\ttext-align: center;\r\n+\t\tcolor: #6c757d;\r\n+\t\tfont-style: italic;\r\n+\t\tpadding: 40px 20px;\r\n \t}\r\n \t\r\n+\t/* Bootstrap 3/4 uyumluluk */\r\n \t.mb-3 {\r\n \t\tmargin-bottom: 1rem !important;\r\n \t}\r\n \t\r\n-\t.w-100 {\r\n-\t\twidth: 100% !important;\r\n-\t}\r\n-\t\r\n \t.d-flex {\r\n \t\tdisplay: flex !important;\r\n \t}\r\n \t\r\n@@ -285,219 +159,241 @@\n \t.align-items-end {\r\n \t\talign-items: flex-end !important;\r\n \t}\r\n \t\r\n-\t/* Form labels */\r\n+\t.w-100 {\r\n+\t\twidth: 100% !important;\r\n+\t}\r\n+\t\r\n+\t.me-1 {\r\n+\t\tmargin-right: 0.25rem !important;\r\n+\t}\r\n+\t\r\n+\t.me-2 {\r\n+\t\tmargin-right: 0.5rem !important;\r\n+\t}\r\n+\t\r\n \t.form-label {\r\n \t\tmargin-bottom: 5px;\r\n \t\tfont-weight: 500;\r\n \t}\r\n-\t\r\n-\t/* Modal düzeltmeleri */\r\n-\t.modal-footer .btn + .btn {\r\n-\t\tmargin-left: 5px;\r\n-\t}\r\n \t</style>\r\n </head>\r\n+<body>\r\n \r\n-<body>\r\n \t<!-- Main Wrapper -->\r\n \t<div class=\"main-wrapper\">\r\n-\t\t\r\n+\t\r\n \t\t<!-- Header -->\r\n \t\t<?php $this->load->view(\"include/header\"); ?>\r\n \t\t<!-- /Header -->\r\n-\r\n+\t\t\r\n \t\t<!-- Sidebar -->\r\n \t\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n \t\t<!-- /Sidebar -->\r\n \t\t\r\n \t\t<!-- Page Wrapper -->\r\n \t\t<div class=\"page-wrapper\">\r\n \t\t\t<div class=\"content container-fluid\">\r\n-\t\t\t\t\r\n+\t\t\t\r\n \t\t\t\t<!-- Page Header -->\r\n \t\t\t\t<div class=\"page-header\">\r\n-\t\t\t\t\t<div class=\"row\">\r\n-\t\t\t\t\t\t<div class=\"col-sm-10\">\r\n-\t\t\t\t\t\t\t<h3 class=\"page-title\">Hakediş Tanımlama</h3>\r\n+\t\t\t\t\t<div class=\"row align-items-center\">\r\n+\t\t\t\t\t\t<div class=\"col\">\r\n+\t\t\t\t\t\t\t<h3 class=\"page-title\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-calculator me-2\"></i>\r\n+\t\t\t\t\t\t\t\tHakediş Tanımlama\r\n+\t\t\t\t\t\t\t</h3>\r\n \t\t\t\t\t\t\t<ul class=\"breadcrumb\">\r\n-\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url(); ?>\">Anasayfa</a></li>\r\n-\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"#\">Voip & Hakediş</a></li>\r\n+\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url() ?>\">Ana Sayfa</a></li>\r\n+\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url('voip') ?>\">VoIP & Hakediş</a></li>\r\n \t\t\t\t\t\t\t\t<li class=\"breadcrumb-item active\">Hakediş Tanımlama</li>\r\n \t\t\t\t\t\t\t</ul>\r\n \t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t<div class=\"col-auto float-right ml-auto\">\r\n+\t\t\t\t\t\t\t<a href=\"#\" class=\"btn btn-add btn-sm\" data-toggle=\"modal\" data-target=\"#hakedisModal\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-plus\"></i> Yeni Hakediş Ekle\r\n+\t\t\t\t\t\t\t</a>\r\n+\t\t\t\t\t\t</div>\r\n \t\t\t\t\t</div>\r\n \t\t\t\t</div>\r\n \t\t\t\t<!-- /Page Header -->\r\n-\t\t\t\t\r\n+\r\n+\t\t\t\t<!-- İstatistik Kartları -->\r\n \t\t\t\t<div class=\"row\">\r\n-\t\t\t\t\t<div class=\"col-12\">\r\n-\t\t\t\t\t\t<!-- İstatistik Kartları -->\r\n-\t\t\t\t\t\t<div class=\"row\">\r\n-\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n-\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n-\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n-\t\t\t\t\t\t\t\t\t\t<div>\r\n-\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"toplamHakedis\">0,00 ₺</h3>\r\n-\t\t\t\t\t\t\t\t\t\t\t<p>Son 30 Gün Toplam</p>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-chart-line fa-2x\" style=\"opacity: 0.7;\"></i>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n-\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n-\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n-\t\t\t\t\t\t\t\t\t\t<div>\r\n-\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"kayitSayisi\"><?= count($harcamalar) ?></h3>\r\n-\t\t\t\t\t\t\t\t\t\t\t<p>Toplam Kayıt Sayısı</p>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-list fa-2x\" style=\"opacity: 0.7;\"></i>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n-\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n-\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n-\t\t\t\t\t\t\t\t\t\t<div>\r\n-\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"ortalamaHakedis\">0,00 ₺</h3>\r\n-\t\t\t\t\t\t\t\t\t\t\t<p>Günlük Ortalama</p>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-calculator fa-2x\" style=\"opacity: 0.7;\"></i>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t<div class=\"col-md-4\">\r\n+\t\t\t\t\t\t<div class=\"stats-card\">\r\n+\t\t\t\t\t\t\t<h3><?= count($hakedis_ucretleri) ?></h3>\r\n+\t\t\t\t\t\t\t<p><i class=\"fas fa-list me-1\"></i>Toplam Kayıt</p>\r\n \t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\r\n-\t\t\t\t\t\t<!-- Yeni Hakediş Ekleme Kartı -->\r\n-\t\t\t\t\t\t<div class=\"card\">\r\n-\t\t\t\t\t\t\t<div class=\"card-header d-flex justify-content-between align-items-center\">\r\n-\t\t\t\t\t\t\t\t<h5 class=\"mb-0\">\r\n-\t\t\t\t\t\t\t\t\t<i class=\"fas fa-plus-circle me-2\"></i>\r\n-\t\t\t\t\t\t\t\t\tYeni Hakediş Ekle\r\n-\t\t\t\t\t\t\t\t</h5>\r\n-\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-sm\" data-toggle=\"modal\" data-target=\"#hakedisModal\">\r\n-\t\t\t\t\t\t\t\t\t<i class=\"fas fa-plus\"></i> Hakediş Ekle\r\n-\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t<div class=\"card-body\">\r\n-\t\t\t\t\t\t\t\t<div id=\"alertContainer\"></div>\r\n-\t\t\t\t\t\t\t\t\r\n-\t\t\t\t\t\t\t\t<!-- Filtre Kartı -->\r\n-\t\t\t\t\t\t\t\t<div class=\"filter-card\">\r\n-\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n-\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreBaslangicTarihi\" class=\"form-label\">Başlangıç Tarihi</label>\r\n-\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBaslangicTarihi\" value=\"<?= date('Y-m-d', strtotime('-30 days')) ?>\">\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreBitisTarihi\" class=\"form-label\">Bitiş Tarihi</label>\r\n-\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBitisTarihi\" value=\"<?= date('Y-m-d') ?>\">\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreNumara\" class=\"form-label\">Numara</label>\r\n-\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" id=\"filtreNumara\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Tüm Numaralar</option>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $numara->operator_adi ?> - <?= $numara->voip_numara ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t</select>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2 d-flex align-items-end\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-info w-100\" onclick=\"filtreleHakedisler()\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-filter\"></i> Filtrele\r\n-\t\t\t\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\r\n-\t\t\t\t\t\t\t\t<!-- Hakediş Tablosu -->\r\n-\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n-\t\t\t\t\t\t\t\t\t<table class=\"table table-striped table-hover\" id=\"hakedisTable\">\r\n-\t\t\t\t\t\t\t\t\t\t<thead>\r\n+\t\t\t\t\t</div>\r\n+\t\t\t\t\t<div class=\"col-md-4\">\r\n+\t\t\t\t\t\t<div class=\"stats-card\" style=\"background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\">\r\n+\t\t\t\t\t\t\t<h3><?php \r\n+\t\t\t\t\t\t\t\t$aktif = 0;\r\n+\t\t\t\t\t\t\t\tforeach($hakedis_ucretleri as $h) {\r\n+\t\t\t\t\t\t\t\t\tif(!$h->bitis_tarihi || strtotime($h->bitis_tarihi) > time()) $aktif++;\r\n+\t\t\t\t\t\t\t\t}\r\n+\t\t\t\t\t\t\t\techo $aktif;\r\n+\t\t\t\t\t\t\t?></h3>\r\n+\t\t\t\t\t\t\t<p><i class=\"fas fa-check-circle me-1\"></i>Aktif Kayıt</p>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t</div>\r\n+\t\t\t\t\t<div class=\"col-md-4\">\r\n+\t\t\t\t\t\t<div class=\"stats-card\" style=\"background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333;\">\r\n+\t\t\t\t\t\t\t<h3><?php \r\n+\t\t\t\t\t\t\t\t$buay = 0;\r\n+\t\t\t\t\t\t\t\t$thisMonth = date('Y-m');\r\n+\t\t\t\t\t\t\t\tforeach($hakedis_ucretleri as $h) {\r\n+\t\t\t\t\t\t\t\t\tif(substr($h->baslangic_tarihi, 0, 7) == $thisMonth) $buay++;\r\n+\t\t\t\t\t\t\t\t}\r\n+\t\t\t\t\t\t\t\techo $buay;\r\n+\t\t\t\t\t\t\t?></h3>\r\n+\t\t\t\t\t\t\t<p><i class=\"fas fa-calendar-alt me-1\"></i>Bu Ay</p>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t</div>\r\n+\t\t\t\t</div>\r\n+\r\n+\t\t\t\t<!-- Filtreleme Kartı -->\r\n+\t\t\t\t<div class=\"card filter-card\">\r\n+\t\t\t\t\t<div class=\"row\">\r\n+\t\t\t\t\t\t<div class=\"col-md-3\">\r\n+\t\t\t\t\t\t\t<label for=\"filtreKullanici\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-user me-1\"></i>\r\n+\t\t\t\t\t\t\t\tKullanıcı\r\n+\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t<select class=\"form-control\" id=\"filtreKullanici\">\r\n+\t\t\t\t\t\t\t\t<option value=\"\">Tüm kullanıcılar</option>\r\n+\t\t\t\t\t\t\t\t<?php foreach($kullanicilar as $kullanici): ?>\r\n+\t\t\t\t\t\t\t\t\t<option value=\"<?= $kullanici->kullanici_id ?>\">\r\n+\t\t\t\t\t\t\t\t\t\t<?= $kullanici->kullanici_ad ?> <?= $kullanici->kullanici_soyad ?>\r\n+\t\t\t\t\t\t\t\t\t</option>\r\n+\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n+\t\t\t\t\t\t\t</select>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t<div class=\"col-md-3\">\r\n+\t\t\t\t\t\t\t<label for=\"filtreBaslangicTarihi\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar me-1\"></i>\r\n+\t\t\t\t\t\t\t\tBaşlangıç Tarihi\r\n+\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBaslangicTarihi\">\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t<div class=\"col-md-3\">\r\n+\t\t\t\t\t\t\t<label for=\"filtreBitisTarihi\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar me-1\"></i>\r\n+\t\t\t\t\t\t\t\tBitiş Tarihi\r\n+\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBitisTarihi\">\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t<div class=\"col-md-3 d-flex align-items-end\">\r\n+\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary w-100\" onclick=\"filtreUygula()\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-filter me-1\"></i>\r\n+\t\t\t\t\t\t\t\tFiltrele\r\n+\t\t\t\t\t\t\t</button>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t</div>\r\n+\t\t\t\t</div>\r\n+\r\n+\t\t\t\t<!-- Hakediş Tablosu -->\r\n+\t\t\t\t<div class=\"card\">\r\n+\t\t\t\t\t<div class=\"card-header d-flex justify-content-between align-items-center\">\r\n+\t\t\t\t\t\t<h5 class=\"card-title mb-0\">\r\n+\t\t\t\t\t\t\t<i class=\"fas fa-table me-2\"></i>\r\n+\t\t\t\t\t\t\tHakediş Ücretleri Listesi\r\n+\t\t\t\t\t\t</h5>\r\n+\t\t\t\t\t\t<div>\r\n+\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"location.reload()\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-sync-alt me-1\"></i>\r\n+\t\t\t\t\t\t\t\tYenile\r\n+\t\t\t\t\t\t\t</button>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t</div>\r\n+\t\t\t\t\t<div class=\"card-body\">\r\n+\t\t\t\t\t\t<div class=\"table-responsive\">\r\n+\t\t\t\t\t\t\t<table class=\"table table-hover\">\r\n+\t\t\t\t\t\t\t\t<thead>\r\n+\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Kullanıcı</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Tek NEO</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Tek Uydu</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>NEO'lu İnternet</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Uydulu İnternet</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Başlangıç Tarihi</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Bitiş Tarihi</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th>Açıklama</th>\r\n+\t\t\t\t\t\t\t\t\t\t<th width=\"120\">İşlemler</th>\r\n+\t\t\t\t\t\t\t\t\t</tr>\r\n+\t\t\t\t\t\t\t\t</thead>\r\n+\t\t\t\t\t\t\t\t<tbody id=\"hakedisTableBody\">\r\n+\t\t\t\t\t\t\t\t\t<?php if(!empty($hakedis_ucretleri)): ?>\r\n+\t\t\t\t\t\t\t\t\t\t<?php foreach($hakedis_ucretleri as $hakedis): ?>\r\n \t\t\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 8%;\">#</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 12%;\">Tarih</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 20%;\">Operatör</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 15%;\">Numara</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 12%;\">Tutar</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 15%;\">Kullanan</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 10%;\">Kaydeden</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 8%;\">İşlemler</th>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<strong><?= $hakedis->kullanici_ad ?> <?= $hakedis->kullanici_soyad ?></strong>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->tek_neo ? '<span class=\"money-display\">₺' . number_format($hakedis->tek_neo, 2, ',', '.') . '</span>' : '-' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->tek_uydu ? '<span class=\"money-display\">₺' . number_format($hakedis->tek_uydu, 2, ',', '.') . '</span>' : '-' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->neolu_internet ? '<span class=\"money-display\">₺' . number_format($hakedis->neolu_internet, 2, ',', '.') . '</span>' : '-' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->uydulu_internet ? '<span class=\"money-display\">₺' . number_format($hakedis->uydulu_internet, 2, ',', '.') . '</span>' : '-' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-info\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= date('d.m.Y', strtotime($hakedis->baslangic_tarihi)) ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->bitis_tarihi ? '<span class=\"badge badge-warning\">' . date('d.m.Y', strtotime($hakedis->bitis_tarihi)) . '</span>' : '<span class=\"badge badge-success\">Devam ediyor</span>' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $hakedis->aciklama ? '<small>' . htmlspecialchars($hakedis->aciklama) . '</small>' : '-' ?>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-outline-warning\" \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"duzenleHakedis(<?= $hakedis->id ?>)\" \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Düzenle\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-outline-danger\" \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"silHakedis(<?= $hakedis->id ?>)\" \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Sil\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n \t\t\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t\t\t</thead>\r\n-\t\t\t\t\t\t\t\t\t\t<tbody id=\"hakedisTableBody\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php if(empty($harcamalar)): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td colspan=\"8\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"empty-state\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-inbox\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5>Hakediş kaydı bulunamadı</h5>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">Henüz hakediş kaydı bulunmuyor. İlk kaydı eklemek için yukarıdaki butonu kullanın.</p>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php $counter = 1; ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($harcamalar as $harcama): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-center\"><?= $counter++ ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y', strtotime($harcama->tarih)) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-info\"><?= $harcama->operator_adi ?></span>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong><?= $harcama->voip_numara ?></strong>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"money-display\"><?= number_format($harcama->harcama_tutari, 2, ',', '.') ?> ₺</span>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $harcama->kullanici_ad ?> <?= $harcama->kullanici_soyad ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= date('d.m.Y', strtotime($harcama->kayit_tarihi)) ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group\" role=\"group\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-warning btn-sm\" \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"duzenleHakedis(<?= $harcama->harcama_id ?>)\" \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Düzenle\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger btn-sm\" \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"silHakedis(<?= $harcama->harcama_id ?>)\" \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Sil\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n-\t\t\t\t\t\t\t\t\t\t</tbody>\r\n-\t\t\t\t\t\t\t\t\t</table>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n+\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n+\t\t\t\t\t\t\t\t\t\t<tr>\r\n+\t\t\t\t\t\t\t\t\t\t\t<td colspan=\"9\" class=\"empty-state\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-info-circle fa-2x mb-2\"></i><br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\tHenüz hakediş kaydı bulunmamaktadır.\r\n+\t\t\t\t\t\t\t\t\t\t\t</td>\r\n+\t\t\t\t\t\t\t\t\t\t</tr>\r\n+\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n+\t\t\t\t\t\t\t\t</tbody>\r\n+\t\t\t\t\t\t\t</table>\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t</div>\r\n \t\t\t\t</div>\r\n+\r\n \t\t\t</div>\r\n \t\t</div>\r\n \t\t<!-- /Page Wrapper -->\r\n+\r\n \t</div>\r\n \t<!-- /Main Wrapper -->\r\n \r\n \t<!-- Hakediş Modal -->\r\n-\t<div class=\"modal fade\" id=\"hakedisModal\" tabindex=\"-1\" aria-labelledby=\"hakedisModalLabel\" aria-hidden=\"true\">\r\n-\t\t<div class=\"modal-dialog\">\r\n+\t<div class=\"modal fade\" id=\"hakedisModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"hakedisModalLabel\" aria-hidden=\"true\">\r\n+\t\t<div class=\"modal-dialog modal-lg\" role=\"document\">\r\n \t\t\t<div class=\"modal-content\">\r\n \t\t\t\t<div class=\"modal-header\">\r\n \t\t\t\t\t<h5 class=\"modal-title\" id=\"hakedisModalLabel\">\r\n \t\t\t\t\t\t<i class=\"fas fa-plus-circle me-2\"></i>\r\n@@ -508,42 +404,92 @@\n \t\t\t\t\t</button>\r\n \t\t\t\t</div>\r\n \t\t\t\t<div class=\"modal-body\">\r\n \t\t\t\t\t<form id=\"hakedisForm\">\r\n-\t\t\t\t\t\t<input type=\"hidden\" id=\"harcama_id\" name=\"harcama_id\" value=\"\">\r\n+\t\t\t\t\t\t<input type=\"hidden\" id=\"hakedis_id\" name=\"id\" value=\"\">\r\n \t\t\t\t\t\t\r\n \t\t\t\t\t\t<div class=\"mb-3\">\r\n-\t\t\t\t\t\t\t<label for=\"numara_id\" class=\"form-label\">\r\n-\t\t\t\t\t\t\t\t<i class=\"fas fa-phone me-1\"></i>\r\n-\t\t\t\t\t\t\t\tNumara <span class=\"text-danger\">*</span>\r\n+\t\t\t\t\t\t\t<label for=\"kullanici_id\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t<i class=\"fas fa-user me-1\"></i>\r\n+\t\t\t\t\t\t\t\tKullanıcı <span class=\"text-danger\">*</span>\r\n \t\t\t\t\t\t\t</label>\r\n-\t\t\t\t\t\t\t<select class=\"form-control\" id=\"numara_id\" name=\"numara_id\" required>\r\n-\t\t\t\t\t\t\t\t<option value=\"\">Numara seçiniz...</option>\r\n-\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n-\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n-\t\t\t\t\t\t\t\t\t\t<?= $numara->operator_adi ?> - <?= $numara->voip_numara ?>\r\n+\t\t\t\t\t\t\t<select class=\"form-control\" id=\"kullanici_id\" name=\"kullanici_id\" required>\r\n+\t\t\t\t\t\t\t\t<option value=\"\">Kullanıcı seçiniz...</option>\r\n+\t\t\t\t\t\t\t\t<?php foreach($kullanicilar as $kullanici): ?>\r\n+\t\t\t\t\t\t\t\t\t<option value=\"<?= $kullanici->kullanici_id ?>\">\r\n+\t\t\t\t\t\t\t\t\t\t<?= $kullanici->kullanici_ad ?> <?= $kullanici->kullanici_soyad ?>\r\n \t\t\t\t\t\t\t\t\t</option>\r\n \t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n \t\t\t\t\t\t\t</select>\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\r\n-\t\t\t\t\t\t<div class=\"mb-3\">\r\n-\t\t\t\t\t\t\t<label for=\"tarih\" class=\"form-label\">\r\n-\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar me-1\"></i>\r\n-\t\t\t\t\t\t\t\tTarih <span class=\"text-danger\">*</span>\r\n-\t\t\t\t\t\t\t</label>\r\n-\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"tarih\" name=\"tarih\" required value=\"<?= date('Y-m-d') ?>\">\r\n+\t\t\t\t\t\t<div class=\"row\">\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"tek_neo\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-phone me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tTek NEO Ücreti\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"tek_neo\" name=\"tek_neo\" \r\n+\t\t\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\">\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"tek_uydu\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-satellite me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tTek Uydu Ücreti\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"tek_uydu\" name=\"tek_uydu\" \r\n+\t\t\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\">\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\r\n-\t\t\t\t\t\t<div class=\"mb-3\">\r\n-\t\t\t\t\t\t\t<label for=\"harcama_tutari\" class=\"form-label\">\r\n-\t\t\t\t\t\t\t\t<i class=\"fas fa-lira-sign me-1\"></i>\r\n-\t\t\t\t\t\t\t\tHakediş Tutarı <span class=\"text-danger\">*</span>\r\n-\t\t\t\t\t\t\t</label>\r\n-\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"harcama_tutari\" name=\"harcama_tutari\" \r\n-\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\" required>\r\n+\t\t\t\t\t\t<div class=\"row\">\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"neolu_internet\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-wifi me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tNEO'lu İnternet Ücreti\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"neolu_internet\" name=\"neolu_internet\" \r\n+\t\t\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\">\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"uydulu_internet\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-globe me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tUydulu İnternet Ücreti\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"uydulu_internet\" name=\"uydulu_internet\" \r\n+\t\t\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\">\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\r\n+\t\t\t\t\t\t<div class=\"row\">\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"baslangic_tarihi\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tBaşlangıç Tarihi <span class=\"text-danger\">*</span>\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"baslangic_tarihi\" name=\"baslangic_tarihi\" required>\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t<div class=\"col-md-6\">\r\n+\t\t\t\t\t\t\t\t<div class=\"mb-3\">\r\n+\t\t\t\t\t\t\t\t\t<label for=\"bitis_tarihi\" class=\"form-label\">\r\n+\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar-times me-1\"></i>\r\n+\t\t\t\t\t\t\t\t\t\tBitiş Tarihi\r\n+\t\t\t\t\t\t\t\t\t</label>\r\n+\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"bitis_tarihi\" name=\"bitis_tarihi\">\r\n+\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\r\n \t\t\t\t\t\t<div class=\"mb-3\">\r\n \t\t\t\t\t\t\t<label for=\"aciklama\" class=\"form-label\">\r\n \t\t\t\t\t\t\t\t<i class=\"fas fa-comment me-1\"></i>\r\n \t\t\t\t\t\t\t\tAçıklama\r\n@@ -569,270 +515,203 @@\n \t<?php $this->load->view(\"include/footer-js\"); ?>\r\n \t\r\n \t<script>\r\n \t\t$(document).ready(function() {\r\n-\t\t\t// Select2'yi başlat\r\n-\t\t\t$('#numara_id, #filtreNumara').select2({\r\n-\t\t\t\tplaceholder: \"Numara seçiniz...\",\r\n-\t\t\t\tallowClear: true,\r\n-\t\t\t\tlanguage: {\r\n-\t\t\t\t\tnoResults: function () {\r\n-\t\t\t\t\t\treturn \"Sonuç bulunamadı\";\r\n-\t\t\t\t\t},\r\n-\t\t\t\t\tsearching: function () {\r\n-\t\t\t\t\t\treturn \"Aranıyor...\";\r\n-\t\t\t\t\t}\r\n-\t\t\t\t}\r\n-\t\t\t});\r\n-\t\t\t\r\n-\t\t\t// Toplam hesaplamalarını yap\r\n-\t\t\thesaplaToplamlar();\r\n+\t\t\t// Select2 yüklüyse kullan\r\n+\t\t\tif (typeof $.fn.select2 !== 'undefined') {\r\n+\t\t\t\t$('#kullanici_id, #filtreKullanici').select2({\r\n+\t\t\t\t\tplaceholder: \"Kullanıcı seçiniz...\",\r\n+\t\t\t\t\tallowClear: true\r\n+\t\t\t\t});\r\n+\t\t\t}\r\n \t\t});\r\n \r\n-\t\tfunction hesaplaToplamlar() {\r\n-\t\t\tlet toplam = 0;\r\n-\t\t\tlet kayitSayisi = 0;\r\n-\t\t\t\r\n-\t\t\t$('#hakedisTableBody tr').each(function() {\r\n-\t\t\t\tif(!$(this).find('.empty-state').length) {\r\n-\t\t\t\t\tlet tutarText = $(this).find('.money-display').text().replace(/[^\\d,]/g, '').replace(',', '.');\r\n-\t\t\t\t\tif(tutarText) {\r\n-\t\t\t\t\t\ttoplam += parseFloat(tutarText);\r\n-\t\t\t\t\t\tkayitSayisi++;\r\n-\t\t\t\t\t}\r\n-\t\t\t\t}\r\n-\t\t\t});\r\n-\t\t\t\r\n-\t\t\tlet ortalama = kayitSayisi > 0 ? toplam / kayitSayisi : 0;\r\n-\t\t\t\r\n-\t\t\t$('#toplamHakedis').text(toplam.toLocaleString('tr-TR', {\r\n-\t\t\t\tminimumFractionDigits: 2,\r\n-\t\t\t\tmaximumFractionDigits: 2\r\n-\t\t\t}) + ' ₺');\r\n-\t\t\t\r\n-\t\t\t$('#kayitSayisi').text(kayitSayisi);\r\n-\t\t\t\r\n-\t\t\t$('#ortalamaHakedis').text(ortalama.toLocaleString('tr-TR', {\r\n-\t\t\t\tminimumFractionDigits: 2,\r\n-\t\t\t\tmaximumFractionDigits: 2\r\n-\t\t\t}) + ' ₺');\r\n-\t\t}\r\n-\r\n \t\tfunction kaydetHakedis() {\r\n-\t\t\tconst form = $('#hakedisForm');\r\n-\t\t\tconst harcama_id = $('#harcama_id').val();\r\n-\t\t\t\r\n-\t\t\t// Manuel form validasyonu\r\n-\t\t\tconst numara_id = $('#numara_id').val();\r\n-\t\t\tconst tarih = $('#tarih').val();\r\n-\t\t\tconst harcama_tutari = $('#harcama_tutari').val();\r\n-\t\t\t\r\n-\t\t\tif(!numara_id || !tarih || !harcama_tutari) {\r\n-\t\t\t\tshowAlert('warning', 'Lütfen tüm zorunlu alanları doldurun.');\r\n+\t\t\tif(!$('#hakedisForm')[0].checkValidity()) {\r\n+\t\t\t\t$('#hakedisForm')[0].reportValidity();\r\n \t\t\t\treturn;\r\n \t\t\t}\r\n-\t\t\t\r\n-\t\t\tif(parseFloat(harcama_tutari) < 0) {\r\n-\t\t\t\tshowAlert('warning', 'Harcama tutarı 0\\'dan büyük olmalıdır.');\r\n-\t\t\t\treturn;\r\n-\t\t\t}\r\n-\t\t\t\r\n-\t\t\tconst formData = form.serialize();\r\n-\t\t\tconst url = harcama_id ? '<?= base_url(\"voip/hakedis_guncelle\") ?>' : '<?= base_url(\"voip/hakedis_ekle\") ?>';\r\n-\t\t\t\r\n+\r\n+\t\t\tconst formData = new FormData($('#hakedisForm')[0]);\r\n+\t\t\tconst isEdit = $('#hakedis_id').val() !== '';\r\n+\t\t\tconst url = isEdit ? '<?= base_url(\"voip/hakedis_guncelle\") ?>' : '<?= base_url(\"voip/hakedis_ekle\") ?>';\r\n+\r\n \t\t\t$.ajax({\r\n \t\t\t\turl: url,\r\n \t\t\t\ttype: 'POST',\r\n \t\t\t\tdata: formData,\r\n+\t\t\t\tprocessData: false,\r\n+\t\t\t\tcontentType: false,\r\n \t\t\t\tdataType: 'json',\r\n \t\t\t\tsuccess: function(response) {\r\n \t\t\t\t\tif(response.success) {\r\n-\t\t\t\t\t\tshowAlert('success', response.message);\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.success(response.message);\r\n+\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\talert(response.message);\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t\t$('#hakedisModal').modal('hide');\r\n-\t\t\t\t\t\tsetTimeout(function() {\r\n+\t\t\t\t\t\tsetTimeout(() => {\r\n \t\t\t\t\t\t\tlocation.reload();\r\n-\t\t\t\t\t\t}, 1500);\r\n+\t\t\t\t\t\t}, 1000);\r\n \t\t\t\t\t} else {\r\n-\t\t\t\t\t\tshowAlert('danger', response.message);\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.error(response.message);\r\n+\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\talert('Hata: ' + response.message);\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t},\r\n \t\t\t\terror: function() {\r\n-\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\ttoastr.error('Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\t} else {\r\n+\t\t\t\t\t\talert('Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t\t}\r\n \r\n-\t\tfunction duzenleHakedis(harcama_id) {\r\n+\t\tfunction duzenleHakedis(id) {\r\n \t\t\t$.ajax({\r\n \t\t\t\turl: '<?= base_url(\"voip/hakedis_getir\") ?>',\r\n \t\t\t\ttype: 'POST',\r\n-\t\t\t\tdata: {harcama_id: harcama_id},\r\n+\t\t\t\tdata: {id: id},\r\n \t\t\t\tdataType: 'json',\r\n \t\t\t\tsuccess: function(response) {\r\n \t\t\t\t\tif(response.success) {\r\n \t\t\t\t\t\tconst data = response.data;\r\n-\t\t\t\t\t\t$('#harcama_id').val(data.harcama_id);\r\n-\t\t\t\t\t\t$('#numara_id').val(data.numara_id).trigger('change');\r\n-\t\t\t\t\t\t$('#tarih').val(data.tarih);\r\n-\t\t\t\t\t\t$('#harcama_tutari').val(data.harcama_tutari);\r\n+\t\t\t\t\t\t$('#hakedis_id').val(data.id);\r\n+\t\t\t\t\t\t$('#kullanici_id').val(data.kullanici_id);\r\n+\t\t\t\t\t\tif (typeof $.fn.select2 !== 'undefined') {\r\n+\t\t\t\t\t\t\t$('#kullanici_id').trigger('change');\r\n+\t\t\t\t\t\t}\r\n+\t\t\t\t\t\t$('#tek_neo').val(data.tek_neo);\r\n+\t\t\t\t\t\t$('#tek_uydu').val(data.tek_uydu);\r\n+\t\t\t\t\t\t$('#neolu_internet').val(data.neolu_internet);\r\n+\t\t\t\t\t\t$('#uydulu_internet').val(data.uydulu_internet);\r\n+\t\t\t\t\t\t$('#baslangic_tarihi').val(data.baslangic_tarihi);\r\n+\t\t\t\t\t\t$('#bitis_tarihi').val(data.bitis_tarihi);\r\n \t\t\t\t\t\t$('#aciklama').val(data.aciklama);\r\n \t\t\t\t\t\t\r\n \t\t\t\t\t\t$('#hakedisModalLabel').html('<i class=\"fas fa-edit me-2\"></i>Hakediş Düzenle');\r\n \t\t\t\t\t\t$('#hakedisModal').modal('show');\r\n \t\t\t\t\t} else {\r\n-\t\t\t\t\t\tshowAlert('danger', response.message);\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.error(response.message);\r\n+\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\talert('Hata: ' + response.message);\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t},\r\n \t\t\t\terror: function() {\r\n-\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\ttoastr.error('Hakediş bilgileri alınamadı.');\r\n+\t\t\t\t\t} else {\r\n+\t\t\t\t\t\talert('Hakediş bilgileri alınamadı.');\r\n+\t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t\t}\r\n \r\n-\t\tfunction silHakedis(harcama_id) {\r\n+\t\tfunction silHakedis(id) {\r\n \t\t\tif(confirm('Bu hakediş kaydını silmek istediğinizden emin misiniz?')) {\r\n \t\t\t\t$.ajax({\r\n \t\t\t\t\turl: '<?= base_url(\"voip/hakedis_sil\") ?>',\r\n \t\t\t\t\ttype: 'POST',\r\n-\t\t\t\t\tdata: {harcama_id: harcama_id},\r\n+\t\t\t\t\tdata: {id: id},\r\n \t\t\t\t\tdataType: 'json',\r\n \t\t\t\t\tsuccess: function(response) {\r\n \t\t\t\t\t\tif(response.success) {\r\n-\t\t\t\t\t\t\tshowAlert('success', response.message);\r\n-\t\t\t\t\t\t\tsetTimeout(function() {\r\n+\t\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\t\ttoastr.success(response.message);\r\n+\t\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\t\talert(response.message);\r\n+\t\t\t\t\t\t\t}\r\n+\t\t\t\t\t\t\tsetTimeout(() => {\r\n \t\t\t\t\t\t\t\tlocation.reload();\r\n-\t\t\t\t\t\t\t}, 1500);\r\n+\t\t\t\t\t\t\t}, 1000);\r\n \t\t\t\t\t\t} else {\r\n-\t\t\t\t\t\t\tshowAlert('danger', response.message);\r\n+\t\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\t\ttoastr.error(response.message);\r\n+\t\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\t\talert('Hata: ' + response.message);\r\n+\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t},\r\n \t\t\t\t\terror: function() {\r\n-\t\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.error('Silme işlemi başarısız.');\r\n+\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\talert('Silme işlemi başarısız.');\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t});\r\n \t\t\t}\r\n \t\t}\r\n \r\n-\t\tfunction filtreleHakedisler() {\r\n-\t\t\tconst baslangicTarihi = $('#filtreBaslangicTarihi').val();\r\n-\t\t\tconst bitisTarihi = $('#filtreBitisTarihi').val();\r\n-\t\t\tconst numara_id = $('#filtreNumara').val();\r\n-\t\t\t\r\n-\t\t\tif(!baslangicTarihi || !bitisTarihi) {\r\n-\t\t\t\tshowAlert('warning', 'Başlangıç ve bitiş tarihi seçiniz.');\r\n-\t\t\t\treturn;\r\n-\t\t\t}\r\n-\t\t\t\r\n+\t\tfunction filtreUygula() {\r\n+\t\t\tconst kullanici_id = $('#filtreKullanici').val();\r\n+\t\t\tconst baslangic_tarihi = $('#filtreBaslangicTarihi').val();\r\n+\t\t\tconst bitis_tarihi = $('#filtreBitisTarihi').val();\r\n+\r\n \t\t\t$.ajax({\r\n \t\t\t\turl: '<?= base_url(\"voip/hakedis_raporu\") ?>',\r\n \t\t\t\ttype: 'POST',\r\n \t\t\t\tdata: {\r\n-\t\t\t\t\tbaslangic_tarihi: baslangicTarihi,\r\n-\t\t\t\t\tbitis_tarihi: bitisTarihi,\r\n-\t\t\t\t\tnumara_id: numara_id\r\n+\t\t\t\t\tkullanici_id: kullanici_id,\r\n+\t\t\t\t\tbaslangic_tarihi: baslangic_tarihi,\r\n+\t\t\t\t\tbitis_tarihi: bitis_tarihi\r\n \t\t\t\t},\r\n \t\t\t\tdataType: 'json',\r\n \t\t\t\tsuccess: function(response) {\r\n \t\t\t\t\tif(response.success) {\r\n-\t\t\t\t\t\t$('#hakedisTableBody').empty();\r\n-\t\t\t\t\t\t\r\n-\t\t\t\t\t\tif(response.data.length === 0) {\r\n-\t\t\t\t\t\t\t$('#hakedisTableBody').html(`\r\n-\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t<td colspan=\"8\">\r\n-\t\t\t\t\t\t\t\t\t\t<div class=\"empty-state\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-inbox\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t<h5>Hakediş kaydı bulunamadı</h5>\r\n-\t\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">Seçilen kriterlere uygun hakediş kaydı bulunamadı.</p>\r\n-\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t`);\r\n+\t\t\t\t\t\tlet html = '';\r\n+\t\t\t\t\t\tif(response.data.length > 0) {\r\n+\t\t\t\t\t\t\tresponse.data.forEach(function(hakedis) {\r\n+\t\t\t\t\t\t\t\thtml += '<tr>';\r\n+\t\t\t\t\t\t\t\thtml += '<td><strong>' + hakedis.kullanici_ad + ' ' + hakedis.kullanici_soyad + '</strong></td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.tek_neo ? '<span class=\"money-display\">₺' + parseFloat(hakedis.tek_neo).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + '</span>' : '-') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.tek_uydu ? '<span class=\"money-display\">₺' + parseFloat(hakedis.tek_uydu).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + '</span>' : '-') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.neolu_internet ? '<span class=\"money-display\">₺' + parseFloat(hakedis.neolu_internet).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + '</span>' : '-') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.uydulu_internet ? '<span class=\"money-display\">₺' + parseFloat(hakedis.uydulu_internet).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + '</span>' : '-') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td><span class=\"badge badge-info\">' + new Date(hakedis.baslangic_tarihi).toLocaleDateString('tr-TR') + '</span></td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.bitis_tarihi ? '<span class=\"badge badge-warning\">' + new Date(hakedis.bitis_tarihi).toLocaleDateString('tr-TR') + '</span>' : '<span class=\"badge badge-success\">Devam ediyor</span>') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>' + (hakedis.aciklama ? '<small>' + hakedis.aciklama + '</small>' : '-') + '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '<td>';\r\n+\t\t\t\t\t\t\t\thtml += '<div class=\"btn-group\">';\r\n+\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"btn btn-sm btn-outline-warning\" onclick=\"duzenleHakedis(' + hakedis.id + ')\" title=\"Düzenle\"><i class=\"fas fa-edit\"></i></button>';\r\n+\t\t\t\t\t\t\t\thtml += '<button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"silHakedis(' + hakedis.id + ')\" title=\"Sil\"><i class=\"fas fa-trash\"></i></button>';\r\n+\t\t\t\t\t\t\t\thtml += '</div>';\r\n+\t\t\t\t\t\t\t\thtml += '</td>';\r\n+\t\t\t\t\t\t\t\thtml += '</tr>';\r\n+\t\t\t\t\t\t\t});\r\n \t\t\t\t\t\t} else {\r\n-\t\t\t\t\t\t\tlet html = '';\r\n-\t\t\t\t\t\t\tresponse.data.forEach(function(harcama, index) {\r\n-\t\t\t\t\t\t\t\tconst tarih = new Date(harcama.tarih);\r\n-\t\t\t\t\t\t\t\tconst kayitTarihi = new Date(harcama.kayit_tarihi);\r\n-\t\t\t\t\t\t\t\t\r\n-\t\t\t\t\t\t\t\thtml += `\r\n-\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t<td class=\"text-center\">${index + 1}</td>\r\n-\t\t\t\t\t\t\t\t\t\t<td>${tarih.toLocaleDateString('tr-TR')}</td>\r\n-\t\t\t\t\t\t\t\t\t\t<td><span class=\"badge badge-info\">${harcama.operator_adi}</span></td>\r\n-\t\t\t\t\t\t\t\t\t\t<td><strong>${harcama.voip_numara}</strong></td>\r\n-\t\t\t\t\t\t\t\t\t\t<td><span class=\"money-display\">${parseFloat(harcama.harcama_tutari).toLocaleString('tr-TR', {minimumFractionDigits: 2, maximumFractionDigits: 2})} ₺</span></td>\r\n-\t\t\t\t\t\t\t\t\t\t<td><small class=\"text-muted\">${harcama.kullanici_ad} ${harcama.kullanici_soyad}</small></td>\r\n-\t\t\t\t\t\t\t\t\t\t<td><small class=\"text-muted\">${kayitTarihi.toLocaleDateString('tr-TR')}</small></td>\r\n-\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group\" role=\"group\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-warning btn-sm\" onclick=\"duzenleHakedis(${harcama.harcama_id})\" title=\"Düzenle\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger btn-sm\" onclick=\"silHakedis(${harcama.harcama_id})\" title=\"Sil\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n-\t\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t`;\r\n-\t\t\t\t\t\t\t});\r\n-\t\t\t\t\t\t\t$('#hakedisTableBody').html(html);\r\n+\t\t\t\t\t\t\thtml = '<tr><td colspan=\"9\" class=\"empty-state\"><i class=\"fas fa-info-circle fa-2x mb-2\"></i><br>Filtrelenen kriterlere uygun kayıt bulunamadı.</td></tr>';\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t\t\r\n-\t\t\t\t\t\t// Toplam hesaplamalarını güncelle\r\n-\t\t\t\t\t\tconst toplam = parseFloat(response.toplam);\r\n-\t\t\t\t\t\tconst kayitSayisi = parseInt(response.kayit_sayisi);\r\n-\t\t\t\t\t\tconst ortalama = kayitSayisi > 0 ? toplam / kayitSayisi : 0;\r\n+\t\t\t\t\t\t$('#hakedisTableBody').html(html);\r\n \t\t\t\t\t\t\r\n-\t\t\t\t\t\t$('#toplamHakedis').text(toplam.toLocaleString('tr-TR', {\r\n-\t\t\t\t\t\t\tminimumFractionDigits: 2,\r\n-\t\t\t\t\t\t\tmaximumFractionDigits: 2\r\n-\t\t\t\t\t\t}) + ' ₺');\r\n-\t\t\t\t\t\t$('#kayitSayisi').text(kayitSayisi);\r\n-\t\t\t\t\t\t$('#ortalamaHakedis').text(ortalama.toLocaleString('tr-TR', {\r\n-\t\t\t\t\t\t\tminimumFractionDigits: 2,\r\n-\t\t\t\t\t\t\tmaximumFractionDigits: 2\r\n-\t\t\t\t\t\t}) + ' ₺');\r\n-\t\t\t\t\t\t\r\n-\t\t\t\t\t\tshowAlert('success', `${kayitSayisi} adet hakediş kaydı listelendi.`);\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.info('Filtre uygulandı. ' + response.kayit_sayisi + ' kayıt bulundu.');\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t} else {\r\n-\t\t\t\t\t\tshowAlert('danger', response.message);\r\n+\t\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\t\ttoastr.error(response.message);\r\n+\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\talert('Hata: ' + response.message);\r\n+\t\t\t\t\t\t}\r\n \t\t\t\t\t}\r\n \t\t\t\t},\r\n \t\t\t\terror: function() {\r\n-\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n+\t\t\t\t\tif (typeof toastr !== 'undefined') {\r\n+\t\t\t\t\t\ttoastr.error('Filtreleme işlemi başarısız.');\r\n+\t\t\t\t\t} else {\r\n+\t\t\t\t\t\talert('Filtreleme işlemi başarısız.');\r\n+\t\t\t\t\t}\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t\t}\r\n+\t</script>\r\n \r\n-\t\t// Modal kapandığında formu temizle\r\n-\t\t$('#hakedisModal').on('hidden.bs.modal', function () {\r\n-\t\t\t$('#hakedisForm')[0].reset();\r\n-\t\t\t$('#harcama_id').val('');\r\n-\t\t\t$('#numara_id').val(null).trigger('change');\r\n-\t\t\t$('#hakedisModalLabel').html('<i class=\"fas fa-plus-circle me-2\"></i>Yeni Hakediş Ekle');\r\n-\t\t});\r\n-\r\n-\t\tfunction showAlert(type, message) {\r\n-\t\t\tconst alertClass = type === 'success' ? 'alert-success' : type === 'danger' ? 'alert-danger' : type === 'warning' ? 'alert-warning' : 'alert-info';\r\n-\t\t\tconst iconClass = type === 'success' ? 'fas fa-check-circle' : type === 'danger' ? 'fas fa-exclamation-triangle' : type === 'warning' ? 'fas fa-exclamation-circle' : 'fas fa-info-circle';\r\n-\t\t\t\r\n-\t\t\tconst alertHtml = `\r\n-\t\t\t\t<div class=\"alert ${alertClass} alert-dismissible fade in\" role=\"alert\">\r\n-\t\t\t\t\t<i class=\"${iconClass} me-2\"></i>\r\n-\t\t\t\t\t${message}\r\n-\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n-\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n-\t\t\t\t\t</button>\r\n-\t\t\t\t</div>\r\n-\t\t\t`;\r\n-\t\t\t\r\n-\t\t\t$('#alertContainer').html(alertHtml);\r\n-\t\t\t\r\n-\t\t\t// 5 saniye sonra alert'i otomatik kapat\r\n-\t\t\tsetTimeout(function() {\r\n-\t\t\t\t$('.alert').fadeOut();\r\n-\t\t\t}, 5000);\r\n-\t\t}\r\n-\t</script>\r\n </body>\r\n </html>\r\n"
                }
            ],
            "date": 1754724208110,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"tr\">\r\n<head>\r\n\t<?php $this->load->view(\"include/head-tags\"); ?>\r\n\t<style>\r\n\t.card {\r\n\t\tmargin-bottom: 20px;\r\n\t\tborder: 1px solid #e9ecef;\r\n\t\tborder-radius: 0.375rem;\r\n\t\tbox-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n\t}\r\n\t\r\n\t.card-header {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder-bottom: 1px solid #e9ecef;\r\n\t\tpadding: 0.75rem 1.25rem;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.card-body {\r\n\t\tpadding: 1.25rem;\r\n\t}\r\n\t\r\n\t.table th {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder-bottom: 2px solid #e9ecef;\r\n\t\tfont-weight: 600;\r\n\t\ttext-align: center;\r\n\t\tvertical-align: middle;\r\n\t\tpadding: 12px 8px;\r\n\t\tcolor: #495057;\r\n\t}\r\n\t\r\n\t.table td {\r\n\t\tpadding: 10px 8px;\r\n\t\tvertical-align: middle;\r\n\t\tborder-bottom: 1px solid #e9ecef;\r\n\t}\r\n\t\r\n\t.table tbody tr:hover {\r\n\t\tbackground-color: #f8f9fa;\r\n\t}\r\n\t\r\n\t.btn {\r\n\t\tborder-radius: 0.375rem;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.2s ease-in-out;\r\n\t}\r\n\t\r\n\t.btn-sm {\r\n\t\tpadding: 0.25rem 0.5rem;\r\n\t\tfont-size: 0.875rem;\r\n\t}\r\n\t\r\n\t.btn-primary {\r\n\t\tbackground-color: #007bff;\r\n\t\tborder-color: #007bff;\r\n\t}\r\n\t\r\n\t.btn-primary:hover {\r\n\t\tbackground-color: #0056b3;\r\n\t\tborder-color: #0056b3;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\t\r\n\t.btn-success {\r\n\t\tbackground-color: #28a745;\r\n\t\tborder-color: #28a745;\r\n\t}\r\n\t\r\n\t.btn-success:hover {\r\n\t\tbackground-color: #1e7e34;\r\n\t\tborder-color: #1e7e34;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\t\r\n\t.btn-warning {\r\n\t\tbackground-color: #ffc107;\r\n\t\tborder-color: #ffc107;\r\n\t\tcolor: #212529;\r\n\t}\r\n\t\r\n\t.btn-warning:hover {\r\n\t\tbackground-color: #e0a800;\r\n\t\tborder-color: #e0a800;\r\n\t\tcolor: #212529;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\t\r\n\t.btn-danger {\r\n\t\tbackground-color: #dc3545;\r\n\t\tborder-color: #dc3545;\r\n\t}\r\n\t\r\n\t.btn-danger:hover {\r\n\t\tbackground-color: #c82333;\r\n\t\tborder-color: #c82333;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\t\r\n\t.btn-info {\r\n\t\tbackground-color: #17a2b8;\r\n\t\tborder-color: #17a2b8;\r\n\t}\r\n\t\r\n\t.btn-info:hover {\r\n\t\tbackground-color: #138496;\r\n\t\tborder-color: #138496;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\t\r\n\t.modal-header {\r\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\t\tcolor: white;\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t\r\n\t.modal-header .close {\r\n\t\tcolor: white;\r\n\t\topacity: 0.8;\r\n\t}\r\n\t\r\n\t.modal-header .close:hover {\r\n\t\topacity: 1;\r\n\t}\r\n\t\r\n\t.alert {\r\n\t\tmargin-top: 15px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 0.375rem;\r\n\t}\r\n\t\r\n\t.alert-success {\r\n\t\tbackground-color: #d4edda;\r\n\t\tcolor: #155724;\r\n\t}\r\n\t\r\n\t.alert-danger {\r\n\t\tbackground-color: #f8d7da;\r\n\t\tcolor: #721c24;\r\n\t}\r\n\t\r\n\t.alert-info {\r\n\t\tbackground-color: #d1ecf1;\r\n\t\tcolor: #0c5460;\r\n\t}\r\n\t\r\n\t.badge {\r\n\t\tpadding: 0.375rem 0.75rem;\r\n\t\tborder-radius: 0.375rem;\r\n\t\tfont-size: 0.75rem;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.badge-success {\r\n\t\tbackground-color: #28a745;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.badge-danger {\r\n\t\tbackground-color: #dc3545;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.badge-warning {\r\n\t\tbackground-color: #ffc107;\r\n\t\tcolor: #212529;\r\n\t}\r\n\t\r\n\t.text-muted {\r\n\t\tcolor: #6c757d !important;\r\n\t}\r\n\t\r\n\t.empty-state {\r\n\t\ttext-align: center;\r\n\t\tpadding: 3rem 1rem;\r\n\t\tcolor: #6c757d;\r\n\t}\r\n\t\r\n\t.empty-state i {\r\n\t\tfont-size: 3rem;\r\n\t\tmargin-bottom: 1rem;\r\n\t\topacity: 0.5;\r\n\t}\r\n\t\r\n\t.money-display {\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #28a745;\r\n\t}\r\n\t\r\n\t.stats-card {\r\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\t\tcolor: white;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 20px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t\r\n\t.stats-card h3 {\r\n\t\tmargin: 0;\r\n\t\tfont-size: 2rem;\r\n\t\tfont-weight: 700;\r\n\t}\r\n\t\r\n\t.stats-card p {\r\n\t\tmargin: 5px 0 0 0;\r\n\t\topacity: 0.9;\r\n\t}\r\n\t\r\n\t/* Select2 Özelleştirmeleri */\r\n\t.select2-container--default .select2-selection--single {\r\n\t\theight: 38px;\r\n\t\tborder: 1px solid #ced4da;\r\n\t\tborder-radius: 0.375rem;\r\n\t}\r\n\t\r\n\t.select2-container--default .select2-selection--single .select2-selection__rendered {\r\n\t\tline-height: 36px;\r\n\t\tpadding-left: 12px;\r\n\t\tcolor: #495057;\r\n\t}\r\n\t\r\n\t.select2-container--default .select2-selection--single .select2-selection__arrow {\r\n\t\theight: 36px;\r\n\t\tright: 10px;\r\n\t}\r\n\t\r\n\t.select2-dropdown {\r\n\t\tborder: 1px solid #ced4da;\r\n\t\tborder-radius: 0.375rem;\r\n\t}\r\n\t\r\n\t.select2-container--default .select2-search--dropdown .select2-search__field {\r\n\t\tborder: 1px solid #ced4da;\r\n\t\tborder-radius: 0.375rem;\r\n\t\tpadding: 8px;\r\n\t}\r\n\t\r\n\t.select2-container--default .select2-results__option[aria-selected=true] {\r\n\t\tbackground-color: #007bff;\r\n\t}\r\n\t\r\n\t.select2-container--default .select2-results__option--highlighted[aria-selected] {\r\n\t\tbackground-color: #0056b3;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.filter-card {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder: 1px solid #dee2e6;\r\n\t\tborder-radius: 0.375rem;\r\n\t\tpadding: 15px;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\t\r\n\t/* Bootstrap 3/4 uyumluluk sınıfları */\r\n\t.me-1 {\r\n\t\tmargin-right: 0.25rem !important;\r\n\t}\r\n\t\r\n\t.me-2 {\r\n\t\tmargin-right: 0.5rem !important;\r\n\t}\r\n\t\r\n\t.mb-3 {\r\n\t\tmargin-bottom: 1rem !important;\r\n\t}\r\n\t\r\n\t.w-100 {\r\n\t\twidth: 100% !important;\r\n\t}\r\n\t\r\n\t.d-flex {\r\n\t\tdisplay: flex !important;\r\n\t}\r\n\t\r\n\t.justify-content-between {\r\n\t\tjustify-content: space-between !important;\r\n\t}\r\n\t\r\n\t.align-items-center {\r\n\t\talign-items: center !important;\r\n\t}\r\n\t\r\n\t.align-items-end {\r\n\t\talign-items: flex-end !important;\r\n\t}\r\n\t\r\n\t/* Form labels */\r\n\t.form-label {\r\n\t\tmargin-bottom: 5px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t/* Modal düzeltmeleri */\r\n\t.modal-footer .btn + .btn {\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\t</style>\r\n</head>\r\n\r\n<body>\r\n\t<!-- Main Wrapper -->\r\n\t<div class=\"main-wrapper\">\r\n\t\t\r\n\t\t<!-- Header -->\r\n\t\t<?php $this->load->view(\"include/header\"); ?>\r\n\t\t<!-- /Header -->\r\n\r\n\t\t<!-- Sidebar -->\r\n\t\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n\t\t<!-- /Sidebar -->\r\n\t\t\r\n\t\t<!-- Page Wrapper -->\r\n\t\t<div class=\"page-wrapper\">\r\n\t\t\t<div class=\"content container-fluid\">\r\n\t\t\t\t\r\n\t\t\t\t<!-- Page Header -->\r\n\t\t\t\t<div class=\"page-header\">\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"col-sm-10\">\r\n\t\t\t\t\t\t\t<h3 class=\"page-title\">Hakediş Tanımlama</h3>\r\n\t\t\t\t\t\t\t<ul class=\"breadcrumb\">\r\n\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url(); ?>\">Anasayfa</a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"#\">Voip & Hakediş</a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"breadcrumb-item active\">Hakediş Tanımlama</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /Page Header -->\r\n\t\t\t\t\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-12\">\r\n\t\t\t\t\t\t<!-- İstatistik Kartları -->\r\n\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"toplamHakedis\">0,00 ₺</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Son 30 Gün Toplam</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-chart-line fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"kayitSayisi\"><?= count($harcamalar) ?></h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Toplam Kayıt Sayısı</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-list fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3 id=\"ortalamaHakedis\">0,00 ₺</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Günlük Ortalama</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-calculator fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- Yeni Hakediş Ekleme Kartı -->\r\n\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t\t<div class=\"card-header d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t<h5 class=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-plus-circle me-2\"></i>\r\n\t\t\t\t\t\t\t\t\tYeni Hakediş Ekle\r\n\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-sm\" data-toggle=\"modal\" data-target=\"#hakedisModal\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-plus\"></i> Hakediş Ekle\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t<div id=\"alertContainer\"></div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- Filtre Kartı -->\r\n\t\t\t\t\t\t\t\t<div class=\"filter-card\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreBaslangicTarihi\" class=\"form-label\">Başlangıç Tarihi</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBaslangicTarihi\" value=\"<?= date('Y-m-d', strtotime('-30 days')) ?>\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreBitisTarihi\" class=\"form-label\">Bitiş Tarihi</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filtreBitisTarihi\" value=\"<?= date('Y-m-d') ?>\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"filtreNumara\" class=\"form-label\">Numara</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" id=\"filtreNumara\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Tüm Numaralar</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $numara->operator_adi ?> - <?= $numara->voip_numara ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2 d-flex align-items-end\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-info w-100\" onclick=\"filtreleHakedisler()\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-filter\"></i> Filtrele\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<!-- Hakediş Tablosu -->\r\n\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\t\t\t\t\t\t\t\t\t<table class=\"table table-striped table-hover\" id=\"hakedisTable\">\r\n\t\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 8%;\">#</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 12%;\">Tarih</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 20%;\">Operatör</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 15%;\">Numara</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 12%;\">Tutar</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 15%;\">Kullanan</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 10%;\">Kaydeden</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<th style=\"width: 8%;\">İşlemler</th>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t<tbody id=\"hakedisTableBody\">\r\n\t\t\t\t\t\t\t\t\t\t\t<?php if(empty($harcamalar)): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td colspan=\"8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-inbox\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5>Hakediş kaydı bulunamadı</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">Henüz hakediş kaydı bulunmuyor. İlk kaydı eklemek için yukarıdaki butonu kullanın.</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php $counter = 1; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($harcamalar as $harcama): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"text-center\"><?= $counter++ ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y', strtotime($harcama->tarih)) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-info\"><?= $harcama->operator_adi ?></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong><?= $harcama->voip_numara ?></strong>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"money-display\"><?= number_format($harcama->harcama_tutari, 2, ',', '.') ?> ₺</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $harcama->kullanici_ad ?> <?= $harcama->kullanici_soyad ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= date('d.m.Y', strtotime($harcama->kayit_tarihi)) ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group\" role=\"group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-warning btn-sm\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"duzenleHakedis(<?= $harcama->harcama_id ?>)\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Düzenle\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger btn-sm\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick=\"silHakedis(<?= $harcama->harcama_id ?>)\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Sil\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- /Page Wrapper -->\r\n\t</div>\r\n\t<!-- /Main Wrapper -->\r\n\r\n\t<!-- Hakediş Modal -->\r\n\t<div class=\"modal fade\" id=\"hakedisModal\" tabindex=\"-1\" aria-labelledby=\"hakedisModalLabel\" aria-hidden=\"true\">\r\n\t\t<div class=\"modal-dialog\">\r\n\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t\t<h5 class=\"modal-title\" id=\"hakedisModalLabel\">\r\n\t\t\t\t\t\t<i class=\"fas fa-plus-circle me-2\"></i>\r\n\t\t\t\t\t\tYeni Hakediş Ekle\r\n\t\t\t\t\t</h5>\r\n\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"modal-body\">\r\n\t\t\t\t\t<form id=\"hakedisForm\">\r\n\t\t\t\t\t\t<input type=\"hidden\" id=\"harcama_id\" name=\"harcama_id\" value=\"\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t\t\t\t<label for=\"numara_id\" class=\"form-label\">\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-phone me-1\"></i>\r\n\t\t\t\t\t\t\t\tNumara <span class=\"text-danger\">*</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select class=\"form-control\" id=\"numara_id\" name=\"numara_id\" required>\r\n\t\t\t\t\t\t\t\t<option value=\"\">Numara seçiniz...</option>\r\n\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n\t\t\t\t\t\t\t\t\t\t<?= $numara->operator_adi ?> - <?= $numara->voip_numara ?>\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t\t\t\t<label for=\"tarih\" class=\"form-label\">\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-calendar me-1\"></i>\r\n\t\t\t\t\t\t\t\tTarih <span class=\"text-danger\">*</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"tarih\" name=\"tarih\" required value=\"<?= date('Y-m-d') ?>\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t\t\t\t<label for=\"harcama_tutari\" class=\"form-label\">\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-lira-sign me-1\"></i>\r\n\t\t\t\t\t\t\t\tHakediş Tutarı <span class=\"text-danger\">*</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"harcama_tutari\" name=\"harcama_tutari\" \r\n\t\t\t\t\t\t\t\t   step=\"0.01\" min=\"0\" placeholder=\"0.00\" required>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div class=\"mb-3\">\r\n\t\t\t\t\t\t\t<label for=\"aciklama\" class=\"form-label\">\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-comment me-1\"></i>\r\n\t\t\t\t\t\t\t\tAçıklama\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<textarea class=\"form-control\" id=\"aciklama\" name=\"aciklama\" rows=\"3\" \r\n\t\t\t\t\t\t\t\t\t  placeholder=\"Hakediş ile ilgili açıklama yazabilirsiniz...\"></textarea>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"modal-footer\">\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">\r\n\t\t\t\t\t\t<i class=\"fas fa-times\"></i> İptal\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-success\" onclick=\"kaydetHakedis()\">\r\n\t\t\t\t\t\t<i class=\"fas fa-save\"></i> Kaydet\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<!-- Footer -->\r\n\t<?php $this->load->view(\"include/footer-js\"); ?>\r\n\t\r\n\t<script>\r\n\t\t$(document).ready(function() {\r\n\t\t\t// Select2'yi başlat\r\n\t\t\t$('#numara_id, #filtreNumara').select2({\r\n\t\t\t\tplaceholder: \"Numara seçiniz...\",\r\n\t\t\t\tallowClear: true,\r\n\t\t\t\tlanguage: {\r\n\t\t\t\t\tnoResults: function () {\r\n\t\t\t\t\t\treturn \"Sonuç bulunamadı\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsearching: function () {\r\n\t\t\t\t\t\treturn \"Aranıyor...\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// Toplam hesaplamalarını yap\r\n\t\t\thesaplaToplamlar();\r\n\t\t});\r\n\r\n\t\tfunction hesaplaToplamlar() {\r\n\t\t\tlet toplam = 0;\r\n\t\t\tlet kayitSayisi = 0;\r\n\t\t\t\r\n\t\t\t$('#hakedisTableBody tr').each(function() {\r\n\t\t\t\tif(!$(this).find('.empty-state').length) {\r\n\t\t\t\t\tlet tutarText = $(this).find('.money-display').text().replace(/[^\\d,]/g, '').replace(',', '.');\r\n\t\t\t\t\tif(tutarText) {\r\n\t\t\t\t\t\ttoplam += parseFloat(tutarText);\r\n\t\t\t\t\t\tkayitSayisi++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tlet ortalama = kayitSayisi > 0 ? toplam / kayitSayisi : 0;\r\n\t\t\t\r\n\t\t\t$('#toplamHakedis').text(toplam.toLocaleString('tr-TR', {\r\n\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\tmaximumFractionDigits: 2\r\n\t\t\t}) + ' ₺');\r\n\t\t\t\r\n\t\t\t$('#kayitSayisi').text(kayitSayisi);\r\n\t\t\t\r\n\t\t\t$('#ortalamaHakedis').text(ortalama.toLocaleString('tr-TR', {\r\n\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\tmaximumFractionDigits: 2\r\n\t\t\t}) + ' ₺');\r\n\t\t}\r\n\r\n\t\tfunction kaydetHakedis() {\r\n\t\t\tconst form = $('#hakedisForm');\r\n\t\t\tconst harcama_id = $('#harcama_id').val();\r\n\t\t\t\r\n\t\t\t// Manuel form validasyonu\r\n\t\t\tconst numara_id = $('#numara_id').val();\r\n\t\t\tconst tarih = $('#tarih').val();\r\n\t\t\tconst harcama_tutari = $('#harcama_tutari').val();\r\n\t\t\t\r\n\t\t\tif(!numara_id || !tarih || !harcama_tutari) {\r\n\t\t\t\tshowAlert('warning', 'Lütfen tüm zorunlu alanları doldurun.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(parseFloat(harcama_tutari) < 0) {\r\n\t\t\t\tshowAlert('warning', 'Harcama tutarı 0\\'dan büyük olmalıdır.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst formData = form.serialize();\r\n\t\t\tconst url = harcama_id ? '<?= base_url(\"voip/hakedis_guncelle\") ?>' : '<?= base_url(\"voip/hakedis_ekle\") ?>';\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: url,\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: formData,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tshowAlert('success', response.message);\r\n\t\t\t\t\t\t$('#hakedisModal').modal('hide');\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction duzenleHakedis(harcama_id) {\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: '<?= base_url(\"voip/hakedis_getir\") ?>',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: {harcama_id: harcama_id},\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\tconst data = response.data;\r\n\t\t\t\t\t\t$('#harcama_id').val(data.harcama_id);\r\n\t\t\t\t\t\t$('#numara_id').val(data.numara_id).trigger('change');\r\n\t\t\t\t\t\t$('#tarih').val(data.tarih);\r\n\t\t\t\t\t\t$('#harcama_tutari').val(data.harcama_tutari);\r\n\t\t\t\t\t\t$('#aciklama').val(data.aciklama);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$('#hakedisModalLabel').html('<i class=\"fas fa-edit me-2\"></i>Hakediş Düzenle');\r\n\t\t\t\t\t\t$('#hakedisModal').modal('show');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction silHakedis(harcama_id) {\r\n\t\t\tif(confirm('Bu hakediş kaydını silmek istediğinizden emin misiniz?')) {\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: '<?= base_url(\"voip/hakedis_sil\") ?>',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: {harcama_id: harcama_id},\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\t\tshowAlert('success', response.message);\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction filtreleHakedisler() {\r\n\t\t\tconst baslangicTarihi = $('#filtreBaslangicTarihi').val();\r\n\t\t\tconst bitisTarihi = $('#filtreBitisTarihi').val();\r\n\t\t\tconst numara_id = $('#filtreNumara').val();\r\n\t\t\t\r\n\t\t\tif(!baslangicTarihi || !bitisTarihi) {\r\n\t\t\t\tshowAlert('warning', 'Başlangıç ve bitiş tarihi seçiniz.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: '<?= base_url(\"voip/hakedis_raporu\") ?>',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbaslangic_tarihi: baslangicTarihi,\r\n\t\t\t\t\tbitis_tarihi: bitisTarihi,\r\n\t\t\t\t\tnumara_id: numara_id\r\n\t\t\t\t},\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\tif(response.success) {\r\n\t\t\t\t\t\t$('#hakedisTableBody').empty();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(response.data.length === 0) {\r\n\t\t\t\t\t\t\t$('#hakedisTableBody').html(`\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td colspan=\"8\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"empty-state\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-inbox\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Hakediş kaydı bulunamadı</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">Seçilen kriterlere uygun hakediş kaydı bulunamadı.</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t`);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet html = '';\r\n\t\t\t\t\t\t\tresponse.data.forEach(function(harcama, index) {\r\n\t\t\t\t\t\t\t\tconst tarih = new Date(harcama.tarih);\r\n\t\t\t\t\t\t\t\tconst kayitTarihi = new Date(harcama.kayit_tarihi);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\thtml += `\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td class=\"text-center\">${index + 1}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>${tarih.toLocaleDateString('tr-TR')}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td><span class=\"badge badge-info\">${harcama.operator_adi}</span></td>\r\n\t\t\t\t\t\t\t\t\t\t<td><strong>${harcama.voip_numara}</strong></td>\r\n\t\t\t\t\t\t\t\t\t\t<td><span class=\"money-display\">${parseFloat(harcama.harcama_tutari).toLocaleString('tr-TR', {minimumFractionDigits: 2, maximumFractionDigits: 2})} ₺</span></td>\r\n\t\t\t\t\t\t\t\t\t\t<td><small class=\"text-muted\">${harcama.kullanici_ad} ${harcama.kullanici_soyad}</small></td>\r\n\t\t\t\t\t\t\t\t\t\t<td><small class=\"text-muted\">${kayitTarihi.toLocaleDateString('tr-TR')}</small></td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group\" role=\"group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-warning btn-sm\" onclick=\"duzenleHakedis(${harcama.harcama_id})\" title=\"Düzenle\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger btn-sm\" onclick=\"silHakedis(${harcama.harcama_id})\" title=\"Sil\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$('#hakedisTableBody').html(html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Toplam hesaplamalarını güncelle\r\n\t\t\t\t\t\tconst toplam = parseFloat(response.toplam);\r\n\t\t\t\t\t\tconst kayitSayisi = parseInt(response.kayit_sayisi);\r\n\t\t\t\t\t\tconst ortalama = kayitSayisi > 0 ? toplam / kayitSayisi : 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$('#toplamHakedis').text(toplam.toLocaleString('tr-TR', {\r\n\t\t\t\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\t\t\t\tmaximumFractionDigits: 2\r\n\t\t\t\t\t\t}) + ' ₺');\r\n\t\t\t\t\t\t$('#kayitSayisi').text(kayitSayisi);\r\n\t\t\t\t\t\t$('#ortalamaHakedis').text(ortalama.toLocaleString('tr-TR', {\r\n\t\t\t\t\t\t\tminimumFractionDigits: 2,\r\n\t\t\t\t\t\t\tmaximumFractionDigits: 2\r\n\t\t\t\t\t\t}) + ' ₺');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tshowAlert('success', `${kayitSayisi} adet hakediş kaydı listelendi.`);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function() {\r\n\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Modal kapandığında formu temizle\r\n\t\t$('#hakedisModal').on('hidden.bs.modal', function () {\r\n\t\t\t$('#hakedisForm')[0].reset();\r\n\t\t\t$('#harcama_id').val('');\r\n\t\t\t$('#numara_id').val(null).trigger('change');\r\n\t\t\t$('#hakedisModalLabel').html('<i class=\"fas fa-plus-circle me-2\"></i>Yeni Hakediş Ekle');\r\n\t\t});\r\n\r\n\t\tfunction showAlert(type, message) {\r\n\t\t\tconst alertClass = type === 'success' ? 'alert-success' : type === 'danger' ? 'alert-danger' : type === 'warning' ? 'alert-warning' : 'alert-info';\r\n\t\t\tconst iconClass = type === 'success' ? 'fas fa-check-circle' : type === 'danger' ? 'fas fa-exclamation-triangle' : type === 'warning' ? 'fas fa-exclamation-circle' : 'fas fa-info-circle';\r\n\t\t\t\r\n\t\t\tconst alertHtml = `\r\n\t\t\t\t<div class=\"alert ${alertClass} alert-dismissible fade in\" role=\"alert\">\r\n\t\t\t\t\t<i class=\"${iconClass} me-2\"></i>\r\n\t\t\t\t\t${message}\r\n\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\t\t\t\r\n\t\t\t$('#alertContainer').html(alertHtml);\r\n\t\t\t\r\n\t\t\t// 5 saniye sonra alert'i otomatik kapat\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t$('.alert').fadeOut();\r\n\t\t\t}, 5000);\r\n\t\t}\r\n\t</script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}