{
    "sourceFile": "application/views/voip/gunluk-harcama.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1755867242952,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1755867242952,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n\r\n<html lang=\"tr\">\r\n\r\n<head>\r\n\r\n\t<?php $this->load->view(\"include/head-tags\"); ?>\r\n\r\n\t<style>\r\n\r\n\t.card {\r\n\r\n\t\tmargin-bottom: 20px;\r\n\r\n\t\tborder: 1px solid #e9ecef;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t\tbox-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.card-header {\r\n\r\n\t\tbackground-color: #f8f9fa;\r\n\r\n\t\tborder-bottom: 1px solid #e9ecef;\r\n\r\n\t\tpadding: 0.75rem 1.25rem;\r\n\r\n\t\tfont-weight: 600;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.card-body {\r\n\r\n\t\tpadding: 1.25rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.table th {\r\n\r\n\t\tbackground-color: #f8f9fa;\r\n\r\n\t\tborder-top: none;\r\n\r\n\t\tfont-weight: 600;\r\n\r\n\t\tfont-size: 0.875rem;\r\n\r\n\t\ttext-transform: uppercase;\r\n\r\n\t\tletter-spacing: 0.05em;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.btn-sm {\r\n\r\n\t\tpadding: 0.25rem 0.5rem;\r\n\r\n\t\tfont-size: 0.875rem;\r\n\r\n\t\tline-height: 1.5;\r\n\r\n\t\tborder-radius: 0.2rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.form-group {\r\n\r\n\t\tmargin-bottom: 1rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.modal-header {\r\n\r\n\t\tbackground-color: #007bff;\r\n\r\n\t\tcolor: white;\r\n\r\n\t\tborder-bottom: none;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.modal-header .close {\r\n\r\n\t\tcolor: white;\r\n\r\n\t\topacity: 0.8;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.modal-header .close:hover {\r\n\r\n\t\topacity: 1;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.alert {\r\n\r\n\t\tmargin-top: 15px;\r\n\r\n\t\tborder: none;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.alert-success {\r\n\r\n\t\tbackground-color: #d4edda;\r\n\r\n\t\tcolor: #155724;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.alert-danger {\r\n\r\n\t\tbackground-color: #f8d7da;\r\n\r\n\t\tcolor: #721c24;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.alert-info {\r\n\r\n\t\tbackground-color: #d1ecf1;\r\n\r\n\t\tcolor: #0c5460;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.badge {\r\n\r\n\t\tfont-size: 0.75em;\r\n\r\n\t\tpadding: 0.25em 0.4em;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.badge-success {\r\n\r\n\t\tbackground-color: #28a745;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.badge-primary {\r\n\r\n\t\tbackground-color: #007bff;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.badge-warning {\r\n\r\n\t\tbackground-color: #ffc107;\r\n\r\n\t\tcolor: #212529;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.text-muted {\r\n\r\n\t\tcolor: #6c757d !important;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.empty-state {\r\n\r\n\t\ttext-align: center;\r\n\r\n\t\tpadding: 3rem 1rem;\r\n\r\n\t\tcolor: #6c757d;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.empty-state i {\r\n\r\n\t\tfont-size: 3rem;\r\n\r\n\t\tmargin-bottom: 1rem;\r\n\r\n\t\topacity: 0.5;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.money-display {\r\n\r\n\t\tfont-weight: 600;\r\n\r\n\t\tcolor: #28a745;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.stats-card {\r\n\r\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\r\n\t\tcolor: white;\r\n\r\n\t\tborder-radius: 10px;\r\n\r\n\t\tpadding: 20px;\r\n\r\n\t\tmargin-bottom: 20px;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.stats-card h3 {\r\n\r\n\t\tmargin: 0;\r\n\r\n\t\tfont-size: 2rem;\r\n\r\n\t\tfont-weight: 700;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.stats-card p {\r\n\r\n\t\tmargin: 5px 0 0 0;\r\n\r\n\t\topacity: 0.9;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t/* Select2 Özelleştirmeleri */\r\n\r\n\t.select2-container--default .select2-selection--single {\r\n\r\n\t\theight: 38px;\r\n\r\n\t\tborder: 1px solid #ced4da;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-container--default .select2-selection--single .select2-selection__rendered {\r\n\r\n\t\tline-height: 36px;\r\n\r\n\t\tpadding-left: 12px;\r\n\r\n\t\tcolor: #495057;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-container--default .select2-selection--single .select2-selection__arrow {\r\n\r\n\t\theight: 36px;\r\n\r\n\t\tright: 10px;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-dropdown {\r\n\r\n\t\tborder: 1px solid #ced4da;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-container--default .select2-search--dropdown .select2-search__field {\r\n\r\n\t\tborder: 1px solid #ced4da;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t\tpadding: 8px;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-container--default .select2-results__option[aria-selected=true] {\r\n\r\n\t\tbackground-color: #007bff;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.select2-container--default .select2-results__option--highlighted[aria-selected] {\r\n\r\n\t\tbackground-color: #0056b3;\r\n\r\n\t\tcolor: white;\r\n\r\n\t}\r\n\r\n\t\r\n\r\n\t.filter-card {\r\n\r\n\t\tbackground-color: #f8f9fa;\r\n\r\n\t\tborder: 1px solid #dee2e6;\r\n\r\n\t\tborder-radius: 0.375rem;\r\n\r\n\t\tpadding: 15px;\r\n\r\n\t\tmargin-bottom: 20px;\r\n\r\n\t}\r\n\r\n\t</style>\r\n\r\n</head>\r\n\r\n\r\n\r\n<body>\r\n\r\n\t<!-- Main Wrapper -->\r\n\r\n\t<div class=\"main-wrapper\">\r\n\r\n\t\t\r\n\r\n\t\t<!-- Header -->\r\n\r\n\t\t<?php $this->load->view(\"include/header\"); ?>\r\n\r\n\t\t<!-- /Header -->\r\n\r\n\r\n\r\n\t\t<!-- Sidebar -->\r\n\r\n\t\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n\r\n\t\t<!-- /Sidebar -->\r\n\r\n\t\t\r\n\r\n\t\t<!-- Page Wrapper -->\r\n\r\n\t\t<div class=\"page-wrapper\">\r\n\r\n\t\t\t<div class=\"content container-fluid\">\r\n\r\n\t\t\t<!-- Page Header -->\r\n\r\n\t\t\t<div class=\"page-header\">\r\n\r\n\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t<div class=\"col-sm-10\">\r\n\r\n\t\t\t\t\t\t<h3 class=\"page-title\">Günlük Harcama</h3>\r\n\r\n\t\t\t\t\t\t<ul class=\"breadcrumb\">\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url(); ?>\">Anasayfa</a></li>\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"#\">Voip & Hakediş</a></li>\r\n\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item active\">Günlük Harcama</li>\r\n\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- /Page Header -->\r\n\r\n\t\t\t\r\n\r\n\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t<div class=\"col-12\">\r\n\r\n\t\t\t\t\t<!-- İstatistik Kartları -->\r\n\r\n\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<h3 id=\"toplamHarcama\">0,00 ₺</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<p>Son 30 Gün Toplam</p>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-chart-line fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<h3 id=\"kayitSayisi\"><?= count($harcamalar) ?></h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<p>Toplam Kayıt Sayısı</p>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-list fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"stats-card\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<h3 id=\"ortalamaHarcama\">0,00 ₺</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<p>Günlük Ortalama</p>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-calculator fa-2x\" style=\"opacity: 0.7;\"></i>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<!-- Harcama Ekleme Formu -->\r\n\r\n\t\t\t\t\t<div class=\"card\">\r\n\r\n\t\t\t\t\t\t<div class=\"card-header\">\r\n\r\n\t\t\t\t\t\t\t<i class=\"fas fa-plus mr-2\"></i> Yeni Harcama Kaydı\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t<form id=\"harcamaForm\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"numara_id\">Voip Numara <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control select2-search\" id=\"numara_id\" name=\"numara_id\" required>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Numara Seçin</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $numara->voip_numara ?> - <?= $numara->operator_adi ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"tarih\">Tarih <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"tarih\" name=\"tarih\" value=\"<?= date('Y-m-d') ?>\" required>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"harcama_tutari\">Harcama Tutarı (₺) <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"harcama_tutari\" name=\"harcama_tutari\" step=\"0.01\" min=\"0\" placeholder=\"0,00\" required>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<label for=\"aciklama\">Açıklama</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"aciklama\" name=\"aciklama\" placeholder=\"Harcama açıklaması...\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"col-12\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-plus mr-1\"></i> Kaydet\r\n\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"reset\" class=\"btn btn-secondary ml-2\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-undo mr-1\"></i> Temizle\r\n\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t<!-- Alert alanı -->\r\n\r\n\t\t\t\t\t\t\t<div id=\"alertContainer\"></div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<!-- Filtreleme -->\r\n\r\n\t\t\t\t\t<div class=\"filter-card\">\r\n\r\n\t\t\t\t\t\t<h6><i class=\"fas fa-filter mr-2\"></i> Filtreleme ve Rapor</h6>\r\n\r\n\t\t\t\t\t\t<form id=\"filterForm\">\r\n\r\n\t\t\t\t\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label for=\"filter_baslangic\">Başlangıç Tarihi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filter_baslangic\" name=\"baslangic_tarihi\" value=\"<?= date('Y-m-01') ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label for=\"filter_bitis\">Bitiş Tarihi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"filter_bitis\" name=\"bitis_tarihi\" value=\"<?= date('Y-m-d') ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label for=\"filter_numara\">Numara Filtresi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<select class=\"form-control select2-search\" id=\"filter_numara\" name=\"numara_id\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Tüm Numaralar</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $numara->voip_numara ?> - <?= $numara->operator_adi ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label for=\"filter_operator\">Operatör Filtresi</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<select class=\"form-control select2-search\" id=\"filter_operator\" name=\"operator_id\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Tüm Operatörler</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$operators = array();\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tforeach($numaralar as $numara): \r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tif($numara->operator_adi && !in_array($numara->operator_adi, $operators)):\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$operators[] = $numara->operator_adi;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->operator_adi ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $numara->operator_adi ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; endforeach; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<label>&nbsp;</label>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-info btn-block\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-search mr-1\"></i> Filtrele\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t<!-- Harcama Kayıtları Listesi -->\r\n\r\n\t\t\t\t\t<div class=\"card\">\r\n\r\n\t\t\t\t\t\t<div class=\"card-header d-flex justify-content-between align-items-center\">\r\n\r\n\t\t\t\t\t\t\t<span>\r\n\r\n\t\t\t\t\t\t\t\t<i class=\"fas fa-list mr-2\"></i> Harcama Kayıtları\r\n\r\n\t\t\t\t\t\t\t\t<span class=\"badge badge-primary ml-2\" id=\"listeBadge\"><?= count($harcamalar) ?></span>\r\n\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t\t\t<span class=\"money-display\" id=\"listeToplamTutar\">\r\n\r\n\t\t\t\t\t\t\t\t\tToplam: <?php \r\n\r\n\t\t\t\t\t\t\t\t\t\t$toplam = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\tforeach($harcamalar as $harcama) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t$toplam += $harcama->harcama_tutari;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\techo number_format($toplam, 2, ',', '.') . ' ₺';\r\n\r\n\t\t\t\t\t\t\t\t\t?>\r\n\r\n\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t<div id=\"harcamaListesi\">\r\n\r\n\t\t\t\t\t\t\t\t<?php if(!empty($harcamalar)): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<table class=\"table table-striped table-hover\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<thead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Tarih</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Numara</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Operatör</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Tutar</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Açıklama</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Teslim Edilen Kullanıcı</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Kayıt Tarihi</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>İşlemler</th>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($harcamalar as $harcama): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-primary\"><?= date('d.m.Y', strtotime($harcama->tarih)) ?></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"badge badge-success\"><?= $harcama->voip_numara ?></span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $harcama->operator_adi ?: '<span class=\"text-muted\">-</span>' ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"money-display\"><?= number_format($harcama->harcama_tutari, 2, ',', '.') ?> ₺</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= $harcama->aciklama ? mb_substr($harcama->aciklama, 0, 30) . (mb_strlen($harcama->aciklama) > 30 ? '...' : '') : '<span class=\"text-muted\">-</span>' ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $harcama->kullanici_ad ?> <?= $harcama->kullanici_soyad ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y H:i', strtotime($harcama->kayit_tarihi)) ?></td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-warning btn-sm\" onclick=\"editHarcama(<?= $harcama->harcama_id ?>)\" title=\"Düzenle\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-edit\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-danger btn-sm ml-1\" onclick=\"deleteHarcama(<?= $harcama->harcama_id ?>)\" title=\"Sil\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-trash\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<?php else: ?>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"empty-state\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-chart-line\"></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<h5>Henüz harcama kaydı yok</h5>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">Yukarıdaki formu kullanarak yeni harcama kaydı ekleyebilirsiniz.</p>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t\t<!-- /Page Wrapper -->\r\n\r\n\t</div>\r\n\r\n\t<!-- /Main Wrapper -->\r\n\r\n\r\n\r\n\t<!-- Harcama Düzenleme Modal -->\r\n\r\n\t<div class=\"modal fade\" id=\"editHarcamaModal\" tabindex=\"-1\" role=\"dialog\">\r\n\r\n\t\t<div class=\"modal-dialog\" role=\"document\">\r\n\r\n\t\t\t<div class=\"modal-content\">\r\n\r\n\t\t\t\t<div class=\"modal-header\">\r\n\r\n\t\t\t\t\t<h5 class=\"modal-title\">\r\n\r\n\t\t\t\t\t\t<i class=\"fas fa-edit mr-2\"></i> Harcama Kaydını Düzenle\r\n\r\n\t\t\t\t\t</h5>\r\n\r\n\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n\r\n\t\t\t\t\t\t<span>&times;</span>\r\n\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"modal-body\">\r\n\r\n\t\t\t\t\t<form id=\"editHarcamaForm\">\r\n\r\n\t\t\t\t\t\t<input type=\"hidden\" id=\"edit_harcama_id\" name=\"harcama_id\">\r\n\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t<label for=\"edit_numara_id\">Voip Numara <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t<select class=\"form-control select2-search-modal\" id=\"edit_numara_id\" name=\"numara_id\" required>\r\n\r\n\t\t\t\t\t\t\t\t<option value=\"\">Numara Seçin</option>\r\n\r\n\t\t\t\t\t\t\t\t<?php foreach($numaralar as $numara): ?>\r\n\r\n\t\t\t\t\t\t\t\t\t<option value=\"<?= $numara->numara_id ?>\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<?= $numara->voip_numara ?> - <?= $numara->operator_adi ?>\r\n\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\r\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\r\n\t\t\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t<label for=\"edit_tarih\">Tarih <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"edit_tarih\" name=\"tarih\" required>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t<label for=\"edit_harcama_tutari\">Harcama Tutarı (₺) <span class=\"text-danger\">*</span></label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"number\" class=\"form-control\" id=\"edit_harcama_tutari\" name=\"harcama_tutari\" step=\"0.01\" min=\"0\" required>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\r\n\t\t\t\t\t\t\t<label for=\"edit_aciklama\">Açıklama</label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"edit_aciklama\" name=\"aciklama\">\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"modal-footer\">\r\n\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">İptal</button>\r\n\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"updateHarcama()\">\r\n\r\n\t\t\t\t\t\t<i class=\"fas fa-save mr-1\"></i> Güncelle\r\n\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n\r\n\r\n\t<!-- Footer -->\r\n\r\n\t<?php $this->load->view(\"include/footer-js\"); ?>\r\n\r\n\t<!-- /Footer -->\r\n\r\n\r\n\r\n\t<!-- JavaScript -->\r\n\r\n\t<script>\r\n\r\n\t\t$(document).ready(function() {\r\n\r\n\t\t\t// Select2 başlatma\r\n\r\n\t\t\t$('.select2-search').select2({\r\n\r\n\t\t\t\tplaceholder: \"Arama yapın veya seçin...\",\r\n\r\n\t\t\t\tallowClear: true,\r\n\r\n\t\t\t\tlanguage: {\r\n\r\n\t\t\t\t\tnoResults: function() {\r\n\r\n\t\t\t\t\t\treturn \"Sonuç bulunamadı\";\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsearching: function() {\r\n\r\n\t\t\t\t\t\treturn \"Aranıyor...\";\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Modal içindeki select2'ler\r\n\r\n\t\t\t$('.select2-search-modal').select2({\r\n\r\n\t\t\t\tplaceholder: \"Arama yapın veya seçin...\",\r\n\r\n\t\t\t\tallowClear: true,\r\n\r\n\t\t\t\tdropdownParent: $('#editHarcamaModal'),\r\n\r\n\t\t\t\tlanguage: {\r\n\r\n\t\t\t\t\tnoResults: function() {\r\n\r\n\t\t\t\t\t\treturn \"Sonuç bulunamadı\";\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsearching: function() {\r\n\r\n\t\t\t\t\t\treturn \"Aranıyor...\";\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\r\n\t\t\t// İstatistikleri hesapla ve göster\r\n\r\n\t\t\thesaplaIstatistikler();\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Harcama formu submit\r\n\r\n\t\t\t$('#harcamaForm').on('submit', function(e) {\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar formData = $(this).serialize();\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\t$.ajax({\r\n\r\n\t\t\t\t\turl: '<?= base_url(\"voip/harcama_ekle\") ?>',\r\n\r\n\t\t\t\t\ttype: 'POST',\r\n\r\n\t\t\t\t\tdata: formData,\r\n\r\n\t\t\t\t\tdataType: 'json',\r\n\r\n\t\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\t\tshowAlert('success', response.message);\r\n\r\n\t\t\t\t\t\t\t$('#harcamaForm')[0].reset();\r\n\r\n\t\t\t\t\t\t\t$('#tarih').val('<?= date('Y-m-d') ?>'); // Tarihi bugüne çevir\r\n\r\n\t\t\t\t\t\t\t$('.select2-search').val(null).trigger('change'); // Select2 temizle\r\n\r\n\t\t\t\t\t\t\t// Sayfayı yenile\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\r\n\t\t\t\t\t\t\t}, 1500);\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\terror: function() {\r\n\r\n\t\t\t\t\t\tshowAlert('danger', 'Bir hata oluştu. Lütfen tekrar deneyin.');\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\r\n\t\t\t// Filter formu submit\r\n\r\n\t\t\t$('#filterForm').on('submit', function(e) {\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\tvar formData = $(this).serialize();\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\t$.ajax({\r\n\r\n\t\t\t\t\turl: '<?= base_url(\"voip/harcama_raporu\") ?>',\r\n\r\n\t\t\t\t\ttype: 'POST',\r\n\r\n\t\t\t\t\tdata: formData,\r\n\r\n\t\t\t\t\tdataType: 'json',\r\n\r\n\t\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\t\tupdateHarcamaListesi(response.data, response.toplam, response.kayit_sayisi);\r\n\r\n\t\t\t\t\t\t\tshowAlert('info', 'Filtre uygulandı. ' + response.kayit_sayisi + ' kayıt bulundu.');\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\terror: function() {\r\n\r\n\t\t\t\t\t\tshowAlert('danger', 'Filtreleme sırasında bir hata oluştu.');\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\r\n\r\n\t\t// İstatistikleri hesaplama\r\n\r\n\t\tfunction hesaplaIstatistikler() {\r\n\r\n\t\t\t<?php\r\n\r\n\t\t\t$toplam = 0;\r\n\r\n\t\t\t$gunler = [];\r\n\r\n\t\t\tforeach($harcamalar as $harcama) {\r\n\r\n\t\t\t\t$toplam += $harcama->harcama_tutari;\r\n\r\n\t\t\t\t$gunler[$harcama->tarih] = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t$gun_sayisi = count($gunler);\r\n\r\n\t\t\t$ortalama = $gun_sayisi > 0 ? $toplam / $gun_sayisi : 0;\r\n\r\n\t\t\t?>\r\n\r\n\t\t\t\r\n\r\n\t\t\t$('#toplamHarcama').text('<?= number_format($toplam, 2, ',', '.') ?> ₺');\r\n\r\n\t\t\t$('#ortalamaHarcama').text('<?= number_format($ortalama, 2, ',', '.') ?> ₺');\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Alert gösterme fonksiyonu\r\n\r\n\t\tfunction showAlert(type, message) {\r\n\r\n\t\t\tvar alertClass = type === 'success' ? 'alert-success' : (type === 'info' ? 'alert-info' : 'alert-danger');\r\n\r\n\t\t\tvar alertHtml = '<div class=\"alert ' + alertClass + ' alert-dismissible fade show\" role=\"alert\">' +\r\n\r\n\t\t\t\tmessage +\r\n\r\n\t\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"alert\">' +\r\n\r\n\t\t\t\t'<span>&times;</span>' +\r\n\r\n\t\t\t\t'</button>' +\r\n\r\n\t\t\t\t'</div>';\r\n\r\n\t\t\t\r\n\r\n\t\t\t$('#alertContainer').html(alertHtml);\r\n\r\n\t\t\t\r\n\r\n\t\t\t// 5 saniye sonra alert'i kaldır\r\n\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t$('.alert').alert('close');\r\n\r\n\t\t\t}, 5000);\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Harcama listesini güncelleme\r\n\r\n\t\tfunction updateHarcamaListesi(harcamalar, toplam, kayitSayisi) {\r\n\r\n\t\t\t$('#listeBadge').text(kayitSayisi);\r\n\r\n\t\t\t$('#listeToplamTutar').text('Toplam: ' + parseFloat(toplam).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + ' ₺');\r\n\r\n\t\t\t\r\n\r\n\t\t\tif(harcamalar.length === 0) {\r\n\r\n\t\t\t\t$('#harcamaListesi').html(\r\n\r\n\t\t\t\t\t'<div class=\"empty-state\">' +\r\n\r\n\t\t\t\t\t'<i class=\"fas fa-search\"></i>' +\r\n\r\n\t\t\t\t\t'<h5>Filtreye uygun kayıt bulunamadı</h5>' +\r\n\r\n\t\t\t\t\t'<p class=\"text-muted\">Farklı filtre kriterleri deneyebilirsiniz.</p>' +\r\n\r\n\t\t\t\t\t'</div>'\r\n\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t\tvar tableHtml = '<div class=\"table-responsive\"><table class=\"table table-striped table-hover\">' +\r\n\r\n\t\t\t\t'<thead><tr>' +\r\n\r\n\t\t\t\t'<th>Tarih</th><th>Numara</th><th>Operatör</th><th>Tutar</th>' +\r\n\r\n\t\t\t\t'<th>Açıklama</th><th>Teslim Edilen Kullanıcı</th><th>Kayıt Tarihi</th><th>İşlemler</th>' +\r\n\r\n\t\t\t\t'</tr></thead><tbody>';\r\n\r\n\t\t\t\r\n\r\n\t\t\tharcamalar.forEach(function(harcama) {\r\n\r\n\t\t\t\tvar tarih = new Date(harcama.tarih);\r\n\r\n\t\t\t\tvar kayitTarihi = new Date(harcama.kayit_tarihi);\r\n\r\n\t\t\t\t\r\n\r\n\t\t\t\ttableHtml += '<tr>' +\r\n\r\n\t\t\t\t\t'<td><span class=\"badge badge-primary\">' + tarih.toLocaleDateString('tr-TR') + '</span></td>' +\r\n\r\n\t\t\t\t\t'<td><span class=\"badge badge-success\">' + harcama.voip_numara + '</span></td>' +\r\n\r\n\t\t\t\t\t'<td>' + (harcama.operator_adi || '<span class=\"text-muted\">-</span>') + '</td>' +\r\n\r\n\t\t\t\t\t'<td><span class=\"money-display\">' + parseFloat(harcama.harcama_tutari).toLocaleString('tr-TR', {minimumFractionDigits: 2}) + ' ₺</span></td>' +\r\n\r\n\t\t\t\t\t'<td>' + (harcama.aciklama ? (harcama.aciklama.length > 30 ? harcama.aciklama.substring(0, 30) + '...' : harcama.aciklama) : '<span class=\"text-muted\">-</span>') + '</td>' +\r\n\r\n\t\t\t\t\t'<td>' + harcama.kullanici_ad + ' ' + harcama.kullanici_soyad + '</td>' +\r\n\r\n\t\t\t\t\t'<td>' + kayitTarihi.toLocaleDateString('tr-TR') + ' ' + kayitTarihi.toLocaleTimeString('tr-TR', {hour: '2-digit', minute: '2-digit'}) + '</td>' +\r\n\r\n\t\t\t\t\t'<td>' +\r\n\r\n\t\t\t\t\t'<button type=\"button\" class=\"btn btn-warning btn-sm\" onclick=\"editHarcama(' + harcama.harcama_id + ')\" title=\"Düzenle\">' +\r\n\r\n\t\t\t\t\t'<i class=\"fas fa-edit\"></i></button> ' +\r\n\r\n\t\t\t\t\t'<button type=\"button\" class=\"btn btn-danger btn-sm ml-1\" onclick=\"deleteHarcama(' + harcama.harcama_id + ')\" title=\"Sil\">' +\r\n\r\n\t\t\t\t\t'<i class=\"fas fa-trash\"></i></button>' +\r\n\r\n\t\t\t\t\t'</td></tr>';\r\n\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\r\n\t\t\ttableHtml += '</tbody></table></div>';\r\n\r\n\t\t\t$('#harcamaListesi').html(tableHtml);\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Harcama düzenleme\r\n\r\n\t\tfunction editHarcama(harcamaId) {\r\n\r\n\t\t\t$.ajax({\r\n\r\n\t\t\t\turl: '<?= base_url(\"voip/harcama_getir\") ?>',\r\n\r\n\t\t\t\ttype: 'POST',\r\n\r\n\t\t\t\tdata: { harcama_id: harcamaId },\r\n\r\n\t\t\t\tdataType: 'json',\r\n\r\n\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\tvar data = response.data;\r\n\r\n\t\t\t\t\t\t$('#edit_harcama_id').val(data.harcama_id);\r\n\r\n\t\t\t\t\t\t$('#edit_numara_id').val(data.numara_id).trigger('change');\r\n\r\n\t\t\t\t\t\t$('#edit_tarih').val(data.tarih);\r\n\r\n\t\t\t\t\t\t$('#edit_harcama_tutari').val(data.harcama_tutari);\r\n\r\n\t\t\t\t\t\t$('#edit_aciklama').val(data.aciklama);\r\n\r\n\t\t\t\t\t\t$('#editHarcamaModal').modal('show');\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\terror: function() {\r\n\r\n\t\t\t\t\tshowAlert('danger', 'Harcama bilgileri alınırken bir hata oluştu.');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Harcama güncelleme\r\n\r\n\t\tfunction updateHarcama() {\r\n\r\n\t\t\tvar formData = $('#editHarcamaForm').serialize();\r\n\r\n\t\t\t\r\n\r\n\t\t\t$.ajax({\r\n\r\n\t\t\t\turl: '<?= base_url(\"voip/harcama_guncelle\") ?>',\r\n\r\n\t\t\t\ttype: 'POST',\r\n\r\n\t\t\t\tdata: formData,\r\n\r\n\t\t\t\tdataType: 'json',\r\n\r\n\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\tshowAlert('success', response.message);\r\n\r\n\t\t\t\t\t\t$('#editHarcamaModal').modal('hide');\r\n\r\n\t\t\t\t\t\t// Sayfayı yenile\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\r\n\t\t\t\t\t\t}, 1500);\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\terror: function() {\r\n\r\n\t\t\t\t\tshowAlert('danger', 'Güncelleme sırasında bir hata oluştu.');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Harcama silme\r\n\r\n\t\tfunction deleteHarcama(harcamaId) {\r\n\r\n\t\t\tif(confirm('Bu harcama kaydını silmek istediğinizden emin misiniz?')) {\r\n\r\n\t\t\t\t$.ajax({\r\n\r\n\t\t\t\t\turl: '<?= base_url(\"voip/harcama_sil\") ?>',\r\n\r\n\t\t\t\t\ttype: 'POST',\r\n\r\n\t\t\t\t\tdata: { harcama_id: harcamaId },\r\n\r\n\t\t\t\t\tdataType: 'json',\r\n\r\n\t\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\t\tif(response.success) {\r\n\r\n\t\t\t\t\t\t\tshowAlert('success', response.message);\r\n\r\n\t\t\t\t\t\t\t// Sayfayı yenile\r\n\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\r\n\t\t\t\t\t\t\t}, 1500);\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tshowAlert('danger', response.message);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\terror: function() {\r\n\r\n\t\t\t\t\t\tshowAlert('danger', 'Silme işlemi sırasında bir hata oluştu.');\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t</script>\r\n\r\n</body>\r\n\r\n</html>\r\n\r\n"
        }
    ]
}