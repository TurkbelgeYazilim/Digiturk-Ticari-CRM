{
    "sourceFile": "application/views/voip/hakedis-iris-rapor.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1754741006185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754741256091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -95,8 +95,9 @@\n <body class=\"nav-md\">\r\n \t<div class=\"container body\">\r\n \t\t<div class=\"main_container\">\r\n \t\t\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n+\t\t\t<?php $this->load->view(\"include/header\"); ?>\r\n \r\n \t\t\t<div class=\"right_col\" role=\"main\">\r\n \t\t\t\t<div class=\"\">\r\n \t\t\t\t\t<div class=\"page-title\">\r\n@@ -298,9 +299,9 @@\n \t\t\t</div>\r\n \t\t</div>\r\n \t</div>\r\n \r\n-\t<?php $this->load->view(\"include/script-tags\"); ?>\r\n+\t<?php $this->load->view(\"include/footer-js\"); ?>\r\n \r\n \t<script>\r\n \t$(document).ready(function() {\r\n \t\t// Dosya se√ßimi\r\n"
                },
                {
                    "date": 1755004441784,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,18 +140,42 @@\n \t\t\t\t\t\t\t\t\t\t<div class=\"upload-progress\" id=\"uploadProgress\">\r\n \t\t\t\t\t\t\t\t\t\t\t<div class=\"progress\">\r\n \t\t\t\t\t\t\t\t\t\t\t\t<div class=\"progress-bar progress-bar-striped active\" style=\"width: 0%\"></div>\r\n \t\t\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">Dosya y√ºkleniyor...</small>\r\n+\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\" id=\"progressText\">Dosya y√ºkleniyor...</small>\r\n+\t\t\t\t\t\t\t\t\t\t\t<div id=\"processingInfo\" style=\"display: none; margin-top: 10px;\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-info-circle\"></i> \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>B√ºy√ºk dosya i≈üleniyor...</strong><br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\tBu i≈ülem birka√ß dakika s√ºrebilir. L√ºtfen sayfayƒ± kapatmayƒ±n.\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\t\t\t\t</div>\r\n \r\n \t\t\t\t\t\t\t\t\t\t<div style=\"margin-top: 15px;\">\r\n \t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-upload\" id=\"uploadBtn\" disabled>\r\n \t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-upload\"></i> CSV'yi Y√ºkle ve ƒ∞√ße Aktar\r\n \t\t\t\t\t\t\t\t\t\t\t</button>\r\n \t\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted\" style=\"margin-top: 10px; font-size: 12px;\">\r\n \t\t\t\t\t\t\t\t\t\t\t\t<strong>Not:</strong> CSV dosyasƒ±nƒ±n ba≈ülƒ±k satƒ±rƒ± a≈üaƒüƒ±daki s√ºtunlarƒ± i√ßermelidir:<br>\r\n-\t\t\t\t\t\t\t\t\t\t\t\tTALEP_ID, TALEP_TURU, DT_MUSTERI_NO, MEMO_ID, SATIS_DURUMU, vb.\r\n+\t\t\t\t\t\t\t\t\t\t\t\tTALEP_ID, TALEP_TURU, DT_MUSTERI_NO, MEMO_ID, SATIS_DURUMU, vb.<br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<div style=\"margin-top: 8px; padding: 8px; background-color: #e8f5e8; border-left: 4px solid #28a745; border-radius: 4px;\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-info-circle\" style=\"color: #28a745;\"></i> <strong>Akƒ±llƒ± G√ºncelleme:</strong><br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t‚Ä¢ Y√ºklenen CSV'deki MEMO_ID deƒüeri tabloda mevcutsa ‚Üí <strong>Kayƒ±t g√ºncellenir</strong><br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t‚Ä¢ MEMO_ID deƒüeri yoksa veya tabloda bulunamazsa ‚Üí <strong>Yeni kayƒ±t eklenir</strong>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"color: #28a745;\"><strong>Maksimum dosya boyutu: 100 MB</strong></span> | \r\n+\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"color: #17a2b8;\"><strong>ƒ∞≈ülem s√ºresi: ~10 dakika</strong></span><br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t<div style=\"margin-top: 10px; padding: 8px; background-color: #f8f9fa; border-radius: 4px;\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t‚ö†Ô∏è <strong>Upload problemi ya≈üƒ±yorsanƒ±z:</strong> \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/direct_csv_process.php\" target=\"_blank\" style=\"color: #007bff; font-weight: bold;\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tAlternatif ƒ∞≈üleme Y√∂ntemi\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t</a> kullanabilirsiniz<br>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\tüîß <strong>T√ºrk√ße karakter sorunu i√ßin:</strong> \r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"/fix_charset.php\" target=\"_blank\" style=\"color: #dc3545; font-weight: bold;\">\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t\tCharset D√ºzeltme Aracƒ±\r\n+\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n+\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\t\t\t</form>\r\n \t\t\t\t\t\t\t\t</div>\r\n@@ -359,26 +383,48 @@\n \t\t\t\tshowNotification('L√ºtfen bir CSV dosyasƒ± se√ßin.', 'error');\r\n \t\t\t\treturn;\r\n \t\t\t}\r\n \r\n-\t\t\tformData.append('csv_file', fileInput.files[0]);\r\n+\t\t\tvar file = fileInput.files[0];\r\n+\t\t\t\r\n+\t\t\t// Dosya boyutu kontrol√º (100MB = 100 * 1024 * 1024)\r\n+\t\t\tif (file.size > 100 * 1024 * 1024) {\r\n+\t\t\t\tshowNotification('Dosya boyutu 100MB\\'dan b√ºy√ºk olamaz. Dosya boyutu: ' + (file.size / 1024 / 1024).toFixed(2) + ' MB', 'error');\r\n+\t\t\t\treturn;\r\n+\t\t\t}\r\n \r\n+\t\t\tformData.append('csv_file', file);\r\n+\r\n \t\t\t// Progress g√∂ster\r\n \t\t\t$('#uploadProgress').show();\r\n \t\t\t$('#uploadBtn').prop('disabled', true).html('<i class=\"fa fa-spinner fa-spin\"></i> Y√ºkleniyor...');\r\n+\t\t\t\r\n+\t\t\t// B√ºy√ºk dosya i√ßin ek bilgilendirme\r\n+\t\t\tif (file.size > 50 * 1024 * 1024) { // 50MB'dan b√ºy√ºkse\r\n+\t\t\t\t$('#processingInfo').show();\r\n+\t\t\t\t$('#progressText').text('B√ºy√ºk dosya y√ºkleniyor... (' + (file.size / 1024 / 1024).toFixed(1) + ' MB)');\r\n+\t\t\t}\r\n \r\n \t\t\t$.ajax({\r\n \t\t\t\turl: '<?= base_url(\"voip/iris-rapor-yukle\") ?>',\r\n \t\t\t\ttype: 'POST',\r\n \t\t\t\tdata: formData,\r\n \t\t\t\tprocessData: false,\r\n \t\t\t\tcontentType: false,\r\n+\t\t\t\ttimeout: 600000, // 10 dakika timeout\r\n \t\t\t\txhr: function() {\r\n \t\t\t\t\tvar xhr = new window.XMLHttpRequest();\r\n \t\t\t\t\txhr.upload.addEventListener(\"progress\", function(evt) {\r\n \t\t\t\t\t\tif (evt.lengthComputable) {\r\n \t\t\t\t\t\t\tvar percentComplete = evt.loaded / evt.total * 100;\r\n \t\t\t\t\t\t\t$('#uploadProgress .progress-bar').css('width', percentComplete + '%');\r\n+\t\t\t\t\t\t\t\r\n+\t\t\t\t\t\t\tif (percentComplete < 100) {\r\n+\t\t\t\t\t\t\t\t$('#progressText').text('Y√ºkleniyor... ' + percentComplete.toFixed(1) + '%');\r\n+\t\t\t\t\t\t\t} else {\r\n+\t\t\t\t\t\t\t\t$('#progressText').text('Dosya y√ºklendi, i≈üleniyor...');\r\n+\t\t\t\t\t\t\t\t$('#uploadBtn').html('<i class=\"fa fa-cogs fa-spin\"></i> ƒ∞≈üleniyor...');\r\n+\t\t\t\t\t\t\t}\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t}, false);\r\n \t\t\t\t\treturn xhr;\r\n \t\t\t\t},\r\n@@ -394,18 +440,35 @@\n \t\t\t\t\t\t} else {\r\n \t\t\t\t\t\t\tshowNotification(data.message, 'error');\r\n \t\t\t\t\t\t}\r\n \t\t\t\t\t} catch (e) {\r\n-\t\t\t\t\t\tshowNotification('Sunucu yanƒ±tƒ± i≈ülenirken hata olu≈ütu.', 'error');\r\n+\t\t\t\t\t\tconsole.error('Response parse error:', e);\r\n+\t\t\t\t\t\tconsole.log('Raw response:', response);\r\n+\t\t\t\t\t\tshowNotification('Sunucu yanƒ±tƒ± i≈ülenirken hata olu≈ütu. Detaylar konsola yazƒ±ldƒ±.', 'error');\r\n \t\t\t\t\t}\r\n \t\t\t\t},\r\n \t\t\t\terror: function(xhr, status, error) {\r\n-\t\t\t\t\tshowNotification('Dosya y√ºklenirken hata olu≈ütu: ' + error, 'error');\r\n+\t\t\t\t\tconsole.error('AJAX Error:', {xhr: xhr, status: status, error: error});\r\n+\t\t\t\t\tvar errorMsg = 'Dosya y√ºklenirken hata olu≈ütu: ';\r\n+\t\t\t\t\t\r\n+\t\t\t\t\tif (xhr.status === 413) {\r\n+\t\t\t\t\t\terrorMsg += 'Dosya boyutu √ßok b√ºy√ºk (413 Payload Too Large)';\r\n+\t\t\t\t\t} else if (xhr.status === 500) {\r\n+\t\t\t\t\t\terrorMsg += 'Sunucu hatasƒ± (500 Internal Server Error)';\r\n+\t\t\t\t\t} else if (xhr.status === 0) {\r\n+\t\t\t\t\t\terrorMsg += 'ƒ∞nternet baƒülantƒ±sƒ± problemi veya timeout';\r\n+\t\t\t\t\t} else {\r\n+\t\t\t\t\t\terrorMsg += status + ' - ' + error;\r\n+\t\t\t\t\t}\r\n+\t\t\t\t\t\r\n+\t\t\t\t\tshowNotification(errorMsg, 'error');\r\n \t\t\t\t},\r\n \t\t\t\tcomplete: function() {\r\n \t\t\t\t\t$('#uploadProgress').hide();\r\n+\t\t\t\t\t$('#processingInfo').hide();\r\n \t\t\t\t\t$('#uploadBtn').prop('disabled', false).html('<i class=\"fa fa-upload\"></i> CSV\\'yi Y√ºkle ve ƒ∞√ße Aktar');\r\n \t\t\t\t\t$('#uploadProgress .progress-bar').css('width', '0%');\r\n+\t\t\t\t\t$('#progressText').text('Dosya y√ºkleniyor...');\r\n \t\t\t\t}\r\n \t\t\t});\r\n \t\t});\r\n \t});\r\n"
                },
                {
                    "date": 1755004542951,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -234,90 +234,10 @@\n \t\t\t\t\t\t\t\t\t</form>\r\n \t\t\t\t\t\t\t\t</div>\r\n \t\t\t\t\t\t\t</div>\r\n \r\n-\t\t\t\t\t\t\t<!-- Rapor Verileri Kartƒ± -->\r\n-\t\t\t\t\t\t\t<div class=\"card\">\r\n-\t\t\t\t\t\t\t\t<div class=\"card-header\">\r\n-\t\t\t\t\t\t\t\t\t<i class=\"fa fa-table\"></i> ƒ∞ris Rapor Verileri\r\n-\t\t\t\t\t\t\t\t\t<div class=\"pull-right pagination-info\">\r\n-\t\t\t\t\t\t\t\t\t\tToplam <?= number_format($pagination['total_records']) ?> kayƒ±t - \r\n-\t\t\t\t\t\t\t\t\t\tSayfa <?= $pagination['current_page'] ?>/<?= $pagination['total_pages'] ?>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n-\t\t\t\t\t\t\t\t\t<?php if(!empty($rapor_verileri)): ?>\r\n-\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n-\t\t\t\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<thead>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep ID</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep T√ºr√º</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>DT M√º≈üteri No</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Memo ID</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Bayi Adƒ±</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Satƒ±≈ü Durumu</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep Giri≈ü Tarihi</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Randevu Tarihi</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Son Durum</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Kayƒ±t Tarihi</th>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n-\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($rapor_verileri as $veri): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->talep_id) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->talep_turu) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->dt_musteri_no) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_id) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_yonlenen_bayi_adi) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"label label-<?= \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$veri->satis_durumu == 'Tamamlandƒ±' ? 'success' : \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t($veri->satis_durumu == 'Aktivasyon Yapƒ±lmadƒ±/Bekliyor' ? 'warning' : 'default') \r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= htmlspecialchars($veri->satis_durumu) ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $veri->talep_giris_tarihi ? date('d.m.Y H:i', strtotime($veri->talep_giris_tarihi)) : '-' ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $veri->randevu_tarihi ? date('d.m.Y H:i', strtotime($veri->randevu_tarihi)) : '-' ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_son_durum) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y H:i', strtotime($veri->kayit_tarihi)) ?></td>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n-\t\t\t\t\t\t\t\t\t\t</table>\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n \r\n-\t\t\t\t\t\t\t\t\t<!-- Pagination -->\r\n-\t\t\t\t\t\t\t\t\t<?php if($pagination['total_pages'] > 1): ?>\r\n-\t\t\t\t\t\t\t\t\t<nav aria-label=\"Sayfa navigasyonu\">\r\n-\t\t\t\t\t\t\t\t\t\t<ul class=\"pagination\">\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php if($pagination['current_page'] > 1): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"?<?= http_build_query(array_merge($filters, ['page' => $pagination['current_page'] - 1])) ?>\">&laquo; √ñnceki</a></li>\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n \r\n-\t\t\t\t\t\t\t\t\t\t\t<?php for($i = max(1, $pagination['current_page'] - 2); $i <= min($pagination['total_pages'], $pagination['current_page'] + 2); $i++): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t<li class=\"<?= $i == $pagination['current_page'] ? 'active' : '' ?>\">\r\n-\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"?<?= http_build_query(array_merge($filters, ['page' => $i])) ?>\"><?= $i ?></a>\r\n-\t\t\t\t\t\t\t\t\t\t\t</li>\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php endfor; ?>\r\n-\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php if($pagination['current_page'] < $pagination['total_pages']): ?>\r\n-\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"?<?= http_build_query(array_merge($filters, ['page' => $pagination['current_page'] + 1])) ?>\">Sonraki &raquo;</a></li>\r\n-\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n-\t\t\t\t\t\t\t\t\t\t</ul>\r\n-\t\t\t\t\t\t\t\t\t</nav>\r\n-\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n-\r\n-\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n-\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info\">\r\n-\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-info-circle\"></i> Hen√ºz veri bulunmamaktadƒ±r. Yukarƒ±daki formu kullanarak CSV dosyasƒ± y√ºkleyebilirsiniz.\r\n-\t\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n-\t\t\t\t\t\t\t\t</div>\r\n-\t\t\t\t\t\t\t</div>\r\n-\r\n \t\t\t\t\t\t</div>\r\n \t\t\t\t\t</div>\r\n \t\t\t\t</div>\r\n \t\t\t</div>\r\n"
                }
            ],
            "date": 1754741006185,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"tr\">\r\n<head>\r\n\t<?php $this->load->view(\"include/head-tags\"); ?>\r\n\t<style>\r\n\t.card {\r\n\t\tmargin-bottom: 20px;\r\n\t\tborder: 1px solid #e9ecef;\r\n\t\tborder-radius: 0.375rem;\r\n\t\tbox-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n\t}\r\n\t\r\n\t.card-header {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder-bottom: 1px solid #e9ecef;\r\n\t\tpadding: 0.75rem 1.25rem;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.card-body {\r\n\t\tpadding: 1.25rem;\r\n\t}\r\n\t\r\n\t.table th {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder-top: 1px solid #dee2e6;\r\n\t\tfont-weight: 600;\r\n\t\tfont-size: 0.9rem;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t\r\n\t.table td {\r\n\t\tfont-size: 0.85rem;\r\n\t\tvertical-align: middle;\r\n\t\tborder-top: 1px solid #dee2e6;\r\n\t}\r\n\r\n\t.file-upload-area {\r\n\t\tborder: 2px dashed #ddd;\r\n\t\tborder-radius: 5px;\r\n\t\tpadding: 30px;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 20px;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\ttransition: border-color 0.3s ease;\r\n\t}\r\n\r\n\t.file-upload-area:hover {\r\n\t\tborder-color: #007bff;\r\n\t}\r\n\r\n\t.file-upload-area.dragover {\r\n\t\tborder-color: #007bff;\r\n\t\tbackground-color: #e7f3ff;\r\n\t}\r\n\r\n\t.btn-upload {\r\n\t\tbackground-color: #28a745;\r\n\t\tborder-color: #28a745;\r\n\t\tcolor: white;\r\n\t\tpadding: 10px 20px;\r\n\t\tborder-radius: 5px;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\r\n\t.btn-upload:hover {\r\n\t\tbackground-color: #218838;\r\n\t\tborder-color: #1e7e34;\r\n\t}\r\n\r\n\t.upload-progress {\r\n\t\tdisplay: none;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.filter-card {\r\n\t\tbackground-color: #fff;\r\n\t\tborder: 1px solid #dee2e6;\r\n\t\tborder-radius: 0.25rem;\r\n\t\tmargin-bottom: 1rem;\r\n\t}\r\n\r\n\t.table-responsive {\r\n\t\tborder: 1px solid #dee2e6;\r\n\t\tborder-radius: 0.25rem;\r\n\t}\r\n\r\n\t.pagination-info {\r\n\t\tcolor: #6c757d;\r\n\t\tfont-size: 0.9rem;\r\n\t}\r\n\t</style>\r\n</head>\r\n\r\n<body class=\"nav-md\">\r\n\t<div class=\"container body\">\r\n\t\t<div class=\"main_container\">\r\n\t\t\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n\r\n\t\t\t<div class=\"right_col\" role=\"main\">\r\n\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t<div class=\"page-title\">\r\n\t\t\t\t\t\t<div class=\"title_left\">\r\n\t\t\t\t\t\t\t<h3><?= $h1 ?></h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"col-md-12 col-sm-12 col-xs-12\">\r\n\r\n\t\t\t\t\t\t\t<!-- CSV Y√ºkleme Kartƒ± -->\r\n\t\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t\t\t<div class=\"card-header\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-upload\"></i> CSV Dosyasƒ± Y√ºkle\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t<form id=\"csvUploadForm\" enctype=\"multipart/form-data\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"file-upload-area\" id=\"fileUploadArea\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-cloud-upload\" style=\"font-size: 48px; color: #ccc; margin-bottom: 15px;\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4>CSV dosyasƒ±nƒ± buraya s√ºr√ºkleyip bƒ±rakƒ±n</h4>\r\n\t\t\t\t\t\t\t\t\t\t\t<p class=\"text-muted\">veya dosya se√ßmek i√ßin tƒ±klayƒ±n</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"file\" id=\"csv_file\" name=\"csv_file\" accept=\".csv\" style=\"display: none;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onclick=\"document.getElementById('csv_file').click();\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file-o\"></i> Dosya Se√ß\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<div id=\"selectedFile\" style=\"display: none; margin-top: 15px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-file-text-o\"></i> <span id=\"fileName\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-danger pull-right\" onclick=\"clearSelectedFile()\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"upload-progress\" id=\"uploadProgress\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"progress\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"progress-bar progress-bar-striped active\" style=\"width: 0%\"></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<small class=\"text-muted\">Dosya y√ºkleniyor...</small>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"margin-top: 15px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-upload\" id=\"uploadBtn\" disabled>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-upload\"></i> CSV'yi Y√ºkle ve ƒ∞√ße Aktar\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-muted\" style=\"margin-top: 10px; font-size: 12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>Not:</strong> CSV dosyasƒ±nƒ±n ba≈ülƒ±k satƒ±rƒ± a≈üaƒüƒ±daki s√ºtunlarƒ± i√ßermelidir:<br>\r\n\t\t\t\t\t\t\t\t\t\t\t\tTALEP_ID, TALEP_TURU, DT_MUSTERI_NO, MEMO_ID, SATIS_DURUMU, vb.\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<!-- Filtreleme Kartƒ± -->\r\n\t\t\t\t\t\t\t<div class=\"filter-card\">\r\n\t\t\t\t\t\t\t\t<div class=\"card-header\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-filter\"></i> Filtreler\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t<form method=\"GET\" id=\"filterForm\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"baslangic_tarihi\">Ba≈ülangƒ±√ß Tarihi</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"baslangic_tarihi\" name=\"baslangic_tarihi\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['baslangic_tarihi']) ?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"bitis_tarihi\">Biti≈ü Tarihi</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"date\" class=\"form-control\" id=\"bitis_tarihi\" name=\"bitis_tarihi\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['bitis_tarihi']) ?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"talep_id\">Talep ID</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"talep_id\" name=\"talep_id\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['talep_id']) ?>\" placeholder=\"Talep ID\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"memo_id\">Memo ID</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"memo_id\" name=\"memo_id\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['memo_id']) ?>\" placeholder=\"Memo ID\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"dt_musteri_no\">DT M√º≈üteri No</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"dt_musteri_no\" name=\"dt_musteri_no\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['dt_musteri_no']) ?>\" placeholder=\"M√º≈üteri No\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"row\" style=\"margin-top: 15px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"satis_durumu\">Satƒ±≈ü Durumu</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" id=\"satis_durumu\" name=\"satis_durumu\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   value=\"<?= htmlspecialchars($filters['satis_durumu']) ?>\" placeholder=\"Satƒ±≈ü Durumu\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label>&nbsp;</label><br>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-search\"></i> Filtrele\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"<?= base_url('voip/hakedis-iris-rapor') ?>\" class=\"btn btn-default\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-refresh\"></i> Temizle\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<!-- Rapor Verileri Kartƒ± -->\r\n\t\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t\t\t<div class=\"card-header\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-table\"></i> ƒ∞ris Rapor Verileri\r\n\t\t\t\t\t\t\t\t\t<div class=\"pull-right pagination-info\">\r\n\t\t\t\t\t\t\t\t\t\tToplam <?= number_format($pagination['total_records']) ?> kayƒ±t - \r\n\t\t\t\t\t\t\t\t\t\tSayfa <?= $pagination['current_page'] ?>/<?= $pagination['total_pages'] ?>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t\t\t<?php if(!empty($rapor_verileri)): ?>\r\n\t\t\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\t\t\t\t\t\t\t\t\t\t<table class=\"table table-striped table-bordered\">\r\n\t\t\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep ID</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep T√ºr√º</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>DT M√º≈üteri No</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Memo ID</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Bayi Adƒ±</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Satƒ±≈ü Durumu</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Talep Giri≈ü Tarihi</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Randevu Tarihi</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Son Durum</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th>Kayƒ±t Tarihi</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php foreach($rapor_verileri as $veri): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->talep_id) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->talep_turu) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->dt_musteri_no) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_id) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_yonlenen_bayi_adi) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"label label-<?= \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$veri->satis_durumu == 'Tamamlandƒ±' ? 'success' : \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t($veri->satis_durumu == 'Aktivasyon Yapƒ±lmadƒ±/Bekliyor' ? 'warning' : 'default') \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<?= htmlspecialchars($veri->satis_durumu) ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $veri->talep_giris_tarihi ? date('d.m.Y H:i', strtotime($veri->talep_giris_tarihi)) : '-' ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= $veri->randevu_tarihi ? date('d.m.Y H:i', strtotime($veri->randevu_tarihi)) : '-' ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= htmlspecialchars($veri->memo_son_durum) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y H:i', strtotime($veri->kayit_tarihi)) ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- Pagination -->\r\n\t\t\t\t\t\t\t\t\t<?php if($pagination['total_pages'] > 1): ?>\r\n\t\t\t\t\t\t\t\t\t<nav aria-label=\"Sayfa navigasyonu\">\r\n\t\t\t\t\t\t\t\t\t\t<ul class=\"pagination\">\r\n\t\t\t\t\t\t\t\t\t\t\t<?php if($pagination['current_page'] > 1): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"?<?= http_build_query(array_merge($filters, ['page' => $pagination['current_page'] - 1])) ?>\">&laquo; √ñnceki</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php for($i = max(1, $pagination['current_page'] - 2); $i <= min($pagination['total_pages'], $pagination['current_page'] + 2); $i++): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t<li class=\"<?= $i == $pagination['current_page'] ? 'active' : '' ?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"?<?= http_build_query(array_merge($filters, ['page' => $i])) ?>\"><?= $i ?></a>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endfor; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<?php if($pagination['current_page'] < $pagination['total_pages']): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t<li><a href=\"?<?= http_build_query(array_merge($filters, ['page' => $pagination['current_page'] + 1])) ?>\">Sonraki &raquo;</a></li>\r\n\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t<div class=\"alert alert-info\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-info-circle\"></i> Hen√ºz veri bulunmamaktadƒ±r. Yukarƒ±daki formu kullanarak CSV dosyasƒ± y√ºkleyebilirsiniz.\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<?php $this->load->view(\"include/script-tags\"); ?>\r\n\r\n\t<script>\r\n\t$(document).ready(function() {\r\n\t\t// Dosya se√ßimi\r\n\t\t$('#csv_file').change(function() {\r\n\t\t\tvar file = this.files[0];\r\n\t\t\tif (file) {\r\n\t\t\t\t$('#fileName').text(file.name);\r\n\t\t\t\t$('#selectedFile').show();\r\n\t\t\t\t$('#uploadBtn').prop('disabled', false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Drag & Drop i≈ülemleri\r\n\t\tvar $fileUploadArea = $('#fileUploadArea');\r\n\t\t\r\n\t\t$fileUploadArea.on('dragover', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t$(this).addClass('dragover');\r\n\t\t});\r\n\r\n\t\t$fileUploadArea.on('dragleave', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t$(this).removeClass('dragover');\r\n\t\t});\r\n\r\n\t\t$fileUploadArea.on('drop', function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t$(this).removeClass('dragover');\r\n\t\t\t\r\n\t\t\tvar files = e.originalEvent.dataTransfer.files;\r\n\t\t\tif (files.length > 0) {\r\n\t\t\t\tvar file = files[0];\r\n\t\t\t\tif (file.type === 'text/csv' || file.name.endsWith('.csv')) {\r\n\t\t\t\t\t$('#csv_file')[0].files = files;\r\n\t\t\t\t\t$('#fileName').text(file.name);\r\n\t\t\t\t\t$('#selectedFile').show();\r\n\t\t\t\t\t$('#uploadBtn').prop('disabled', false);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowNotification('Sadece CSV dosyalarƒ± kabul edilir.', 'error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// CSV Upload Form\r\n\t\t$('#csvUploadForm').submit(function(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tvar formData = new FormData();\r\n\t\t\tvar fileInput = $('#csv_file')[0];\r\n\t\t\t\r\n\t\t\tif (!fileInput.files.length) {\r\n\t\t\t\tshowNotification('L√ºtfen bir CSV dosyasƒ± se√ßin.', 'error');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tformData.append('csv_file', fileInput.files[0]);\r\n\r\n\t\t\t// Progress g√∂ster\r\n\t\t\t$('#uploadProgress').show();\r\n\t\t\t$('#uploadBtn').prop('disabled', true).html('<i class=\"fa fa-spinner fa-spin\"></i> Y√ºkleniyor...');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: '<?= base_url(\"voip/iris-rapor-yukle\") ?>',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: formData,\r\n\t\t\t\tprocessData: false,\r\n\t\t\t\tcontentType: false,\r\n\t\t\t\txhr: function() {\r\n\t\t\t\t\tvar xhr = new window.XMLHttpRequest();\r\n\t\t\t\t\txhr.upload.addEventListener(\"progress\", function(evt) {\r\n\t\t\t\t\t\tif (evt.lengthComputable) {\r\n\t\t\t\t\t\t\tvar percentComplete = evt.loaded / evt.total * 100;\r\n\t\t\t\t\t\t\t$('#uploadProgress .progress-bar').css('width', percentComplete + '%');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\treturn xhr;\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function(response) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar data = typeof response === 'string' ? JSON.parse(response) : response;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (data.success) {\r\n\t\t\t\t\t\t\tshowNotification(data.message, 'success');\r\n\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tshowNotification(data.message, 'error');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tshowNotification('Sunucu yanƒ±tƒ± i≈ülenirken hata olu≈ütu.', 'error');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror: function(xhr, status, error) {\r\n\t\t\t\t\tshowNotification('Dosya y√ºklenirken hata olu≈ütu: ' + error, 'error');\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t$('#uploadProgress').hide();\r\n\t\t\t\t\t$('#uploadBtn').prop('disabled', false).html('<i class=\"fa fa-upload\"></i> CSV\\'yi Y√ºkle ve ƒ∞√ße Aktar');\r\n\t\t\t\t\t$('#uploadProgress .progress-bar').css('width', '0%');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\t// Se√ßili dosyayƒ± temizle\r\n\tfunction clearSelectedFile() {\r\n\t\t$('#csv_file').val('');\r\n\t\t$('#selectedFile').hide();\r\n\t\t$('#uploadBtn').prop('disabled', true);\r\n\t}\r\n\r\n\t// Notification fonksiyonu\r\n\tfunction showNotification(message, type) {\r\n\t\tvar alertClass = type === 'success' ? 'alert-success' : 'alert-danger';\r\n\t\tvar icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle';\r\n\t\t\r\n\t\tvar notification = $('<div class=\"alert ' + alertClass + ' alert-dismissible\" style=\"position: fixed; top: 20px; right: 20px; z-index: 9999; min-width: 300px;\">' +\r\n\t\t\t'<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">' +\r\n\t\t\t'<span aria-hidden=\"true\">&times;</span>' +\r\n\t\t\t'</button>' +\r\n\t\t\t'<i class=\"fa ' + icon + '\"></i> ' + message +\r\n\t\t\t'</div>');\r\n\r\n\t\t$('body').append(notification);\r\n\t\t\r\n\t\tsetTimeout(function() {\r\n\t\t\tnotification.fadeOut(500, function() {\r\n\t\t\t\t$(this).remove();\r\n\t\t\t});\r\n\t\t}, 5000);\r\n\t}\r\n\t</script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}