{
    "sourceFile": "application/views/cari/cari-hareketleri.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1756217159704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1756217159704,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"tr\">\r\n<head>\r\n\t<?php $this->load->view(\"include/head-tags\"); ?>\r\n\t<title>Müşteri Hareketleri | İlekaSoft CRM</title>\r\n\t<link rel=\"icon\" type=\"image/x-icon\" href=\"<?= base_url('assets/favicon.ico'); ?>\" />\r\n\t<style>\r\n\t\t/* Mobilde Önceki Sayfa butonunu gizle */\r\n\t\t@media (max-width: 767.98px) {\r\n\t\t\t.col-sm-2 {\r\n\t\t\t\tdisplay: none !important;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.hareket-card {\r\n\t\t\tborder-left: 4px solid #007bff;\r\n\t\t\tmargin-bottom: 1rem;\r\n\t\t}\r\n\t\t\r\n\t\t.hareket-banka { border-left-color: #007bff; }\r\n\t\t.hareket-cek { border-left-color: #17a2b8; }\r\n\t\t.hareket-kasa { border-left-color: #28a745; }\r\n\t\t.hareket-senet { border-left-color: #ffc107; }\r\n\t\t.hareket-satis { border-left-color: #dc3545; }\r\n\t\t\r\n\t\t.tutar-borc {\r\n\t\t\tcolor: #dc3545;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t\t\r\n\t\t.tutar-alacak {\r\n\t\t\tcolor: #28a745;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t</style>\r\n</head>\r\n<body>\r\n\r\n<!-- Main Wrapper -->\r\n<div class=\"main-wrapper\">\r\n\t<!-- Header -->\r\n\t<?php $this->load->view(\"include/header\"); ?>\r\n\t<!-- /Header -->\r\n\r\n\t<!-- Sidebar -->\r\n\t<?php $this->load->view(\"include/sidebar\"); ?>\r\n\t<!-- /Sidebar -->\r\n\r\n\t<!-- Page Wrapper -->\r\n\t<div class=\"page-wrapper\">\r\n\t\t<div class=\"content container-fluid\">\r\n\t\t\t<!-- Page Header -->\r\n\t\t\t<div class=\"page-header\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-sm-10\">\r\n\t\t\t\t\t\t<h3 class=\"page-title\">\r\n\t\t\t\t\t\t\t<?php if(isset($cariExe)): ?>\r\n\t\t\t\t\t\t\t\t<a href=\"<?= base_url(\"cari/cari-karti-duzenle/$cariExe->cari_id\"); ?>\" target=\"_blank\" style=\"color:#d92637; text-decoration: underline;\">\r\n\t\t\t\t\t\t\t\t\t<?= $cariExe->cari_ad; ?>\r\n\t\t\t\t\t\t\t\t</a> - Müşteri Hareketleri\r\n\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\tMüşteri Hareketleri\r\n\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<ul class=\"breadcrumb\">\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url(); ?>\">Anasayfa</a></li>\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item\"><a href=\"<?= base_url('cari/cari-listesi'); ?>\">Müşteriler</a></li>\r\n\t\t\t\t\t\t\t<li class=\"breadcrumb-item active\">Müşteri Hareketleri</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"d-flex justify-content-end text-align-center col-sm-2\">\r\n\t\t\t\t\t\t<a class=\"btn btn-outline-light\" href=\"javascript:history.back()\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-history\"></i> <br>Önceki Sayfa\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- /Page Header -->\r\n\r\n\t\t\t<!-- Bakiye Kartı -->\r\n\t\t\t<?php if(isset($cariExe)): ?>\r\n\t\t\t<div class=\"row mb-4\">\r\n\t\t\t\t<div class=\"col-12\">\r\n\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t<div class=\"card-body text-center\">\r\n\t\t\t\t\t\t\t<h4 class=\"card-title\">Müşteri Bakiyesi</h4>\r\n\t\t\t\t\t\t\t<h2 class=\"<?= ($kalan > 0) ? 'text-success' : 'text-danger' ?>\">\r\n\t\t\t\t\t\t\t\t<?php\r\n\t\t\t\t\t\t\t\t$kalann = abs($kalan);\r\n\t\t\t\t\t\t\t\tif (filter_var($kalan, FILTER_VALIDATE_FLOAT) && $kalan > 0) {\r\n\t\t\t\t\t\t\t\t\techo number_format($kalann, 2) . ' ₺ (Borçlu)';\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\techo number_format($kalann, 2) . ' ₺ (Alacaklı)';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t?>\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<?php endif; ?>\r\n\r\n\t\t\t<!-- Hareketler Listesi -->\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-xl-12 col-md-12\">\r\n\t\t\t\t\t<div class=\"card card-table\">\r\n\t\t\t\t\t\t<div class=\"card-header\">\r\n\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t\t\t\t\t<h4 class=\"card-title\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-list text-primary mr-2\"></i>\r\n\t\t\t\t\t\t\t\t\t\tMüşteri Hareketleri\r\n\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"col-auto\">\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary btn-sm\" onclick=\"location.reload()\">\r\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-refresh\"></i> Yenile\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<?php if (isset($cariHareketleri) && count($cariHareketleri) > 0): ?>\r\n\t\t\t\t\t\t\t<div class=\"table-responsive\">\r\n\t\t\t\t\t\t\t\t<table class=\"table table-striped custom-table mb-0\">\r\n\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Tarih</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Tür</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Borç</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Alacak</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Açıklama</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th>Görsel</th>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t<?php foreach($cariHareketleri as $ch): ?>\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<td><?= date('d.m.Y', strtotime($ch->Tarih)); ?></td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php\r\n\t\t\t\t\t\t\t\t\t\t\t\t$icon = '';\r\n\t\t\t\t\t\t\t\t\t\t\t\t$class = '';\r\n\t\t\t\t\t\t\t\t\t\t\t\tswitch($ch->Tahsilat_Tipi) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Banka': $icon = 'fa-university'; $class = 'text-primary'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Çek': $icon = 'fa-file-text-o'; $class = 'text-info'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Kasa': $icon = 'fa-money'; $class = 'text-success'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Senet': $icon = 'fa-file-o'; $class = 'text-warning'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'Satış Faturası': $icon = 'fa-file-invoice'; $class = 'text-danger'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdefault: $icon = 'fa-question'; $class = 'text-muted'; break;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa <?= $icon ?> <?= $class ?> mr-2\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"<?= $class ?>\"><?= $ch->Tahsilat_Tipi ?></span>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php if($ch->Borc): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"tutar-borc\"><?= number_format($ch->Borc, 2, ',', '.') ?> ₺</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php if($ch->Alacak): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"tutar-alacak\"><?= number_format($ch->Alacak, 2, ',', '.') ?> ₺</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php if($ch->Aciklama): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?= substr($ch->Aciklama, 0, 50) ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?= strlen($ch->Aciklama) > 50 ? '...' : '' ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\">-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php if($ch->Gorsel): ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-outline-info gorsel-btn\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-tip=\"<?= $ch->Tahsilat_Tipi ?>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-gorsel=\"<?= $ch->Gorsel ?>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-tablo=\"<?= $ch->tablo ?>\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-image\"></i> Görsel\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\">-</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<?php endif; ?>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t<?php endforeach; ?>\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<?php else: ?>\r\n\t\t\t\t\t\t\t<div class=\"text-center py-5\">\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-list text-muted\" style=\"font-size: 4rem; margin-bottom: 1rem;\"></i>\r\n\t\t\t\t\t\t\t\t<h4>Henüz hareket kaydı bulunmuyor.</h4>\r\n\t\t\t\t\t\t\t\t<p class=\"text-muted\">Bu müşteri için henüz hiçbir hareket kaydı bulunmamaktadır.</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<?php endif; ?>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<!-- Görsel Modal -->\r\n<div id=\"gorselModal\" class=\"modal custom-modal fade\" role=\"dialog\">\r\n\t<div class=\"modal-dialog modal-dialog-centered modal-lg\" role=\"document\">\r\n\t\t<div class=\"modal-content\">\r\n\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t<h5 class=\"modal-title\">Hareket Görseli</h5>\r\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"modal-body text-center\">\r\n\t\t\t\t<div id=\"gorselIcerik\">\r\n\t\t\t\t\t<!-- Görsel buraya yüklenecek -->\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<?php $this->load->view(\"include/footer-js\"); ?>\r\n\r\n<script>\r\n$(document).ready(function() {\r\n\t// Görsel butonuna tıklandığında\r\n\t$('.gorsel-btn').on('click', function() {\r\n\t\tvar tip = $(this).data('tip');\r\n\t\tvar gorsel = $(this).data('gorsel');\r\n\t\tvar tablo = $(this).data('tablo');\r\n\t\t\r\n\t\t// Görsel URL'sini belirle\r\n\t\tvar gorsel_url = '';\r\n\t\tswitch(tablo) {\r\n\t\t\tcase 'banka':\r\n\t\t\t\tgorsel_url = '<?= base_url('assets/uploads/dekontlar/') ?>' + gorsel;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'cek':\r\n\t\t\t\tgorsel_url = '<?= base_url('assets/uploads/cekler/') ?>' + gorsel;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'senet':\r\n\t\t\t\tgorsel_url = '<?= base_url('assets/uploads/senetler/') ?>' + gorsel;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'satis':\r\n\t\t\t\tgorsel_url = '<?= base_url('assets/uploads/faturalar/') ?>' + gorsel;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tgorsel_url = '<?= base_url('assets/uploads/') ?>' + gorsel;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\t// Modal içeriğini güncelle\r\n\t\tvar noImageUrl = '<?= base_url('assets/img/no-image.png') ?>';\r\n\t\t$('#gorselIcerik').html('<img src=\"' + gorsel_url + '\" class=\"img-fluid\" style=\"max-width: 100%; height: auto;\" onerror=\"this.src=\\'' + noImageUrl + '\\'; this.alt=\\'Görsel yüklenemedi\\';\">');\r\n\t\t\r\n\t\t// Modal'ı göster\r\n\t\t$('#gorselModal').modal('show');\r\n\t});\r\n});\r\n</script>\r\n\r\n</body>\r\n</html>\r\n"
        }
    ]
}