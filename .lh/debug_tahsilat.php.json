{
    "sourceFile": "debug_tahsilat.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1755342118254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1755342118254,
            "name": "Commit-0",
            "content": "<?php\r\n// Debug: Hem kasahareketleri hem de carihareketleri tablosunu test et\r\n\r\n$servername = \"localhost\";\r\n$username = \"root\";\r\n$password = \"\";\r\n$dbname = \"ilekasoft_crmdb\";\r\n\r\ntry {\r\n    $pdo = new PDO(\"mysql:host=$servername;dbname=$dbname\", $username, $password);\r\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\r\n\r\n    echo \"<h2>Debug: Tablo ve Kayıt Kontrolü</h2>\";\r\n    \r\n    // kasahareketleri tablosunda 4683 ID'li kayıt var mı?\r\n    echo \"<h3>1. kasahareketleri tablosunda 4683 ID kontrolü:</h3>\";\r\n    try {\r\n        $stmt = $pdo->prepare(\"SELECT * FROM kasahareketleri WHERE kh_id = 4683\");\r\n        $stmt->execute();\r\n        $result = $stmt->fetch(PDO::FETCH_ASSOC);\r\n        \r\n        if ($result) {\r\n            echo \"<p style='color: green;'>✓ 4683 ID'li kayıt bulundu:</p>\";\r\n            echo \"<pre>\" . print_r($result, true) . \"</pre>\";\r\n        } else {\r\n            echo \"<p style='color: red;'>✗ 4683 ID'li kayıt bulunamadı</p>\";\r\n            \r\n            // Yakın kayıtları göster\r\n            echo \"<h4>Yakın kayıtlar:</h4>\";\r\n            $stmt2 = $pdo->prepare(\"SELECT kh_id, kh_belgeNumarasi, kh_giris, kh_cariID FROM kasahareketleri WHERE kh_id BETWEEN 4680 AND 4690 ORDER BY kh_id\");\r\n            $stmt2->execute();\r\n            $nearby = $stmt2->fetchAll(PDO::FETCH_ASSOC);\r\n            \r\n            if ($nearby) {\r\n                foreach ($nearby as $record) {\r\n                    echo \"<p>ID: {$record['kh_id']}, Belge: {$record['kh_belgeNumarasi']}, Giriş: {$record['kh_giris']}, Cari: {$record['kh_cariID']}</p>\";\r\n                }\r\n            } else {\r\n                echo \"<p>Bu aralıkta hiç kayıt yok</p>\";\r\n            }\r\n        }\r\n    } catch(PDOException $e) {\r\n        echo \"<p style='color: red;'>Hata: \" . $e->getMessage() . \"</p>\";\r\n    }\r\n    \r\n    // carihareketleri tablosunda ilgili kayıtlar var mı?\r\n    echo \"<h3>2. carihareketleri tablosunda ch_khID = 4683 kontrolü:</h3>\";\r\n    try {\r\n        $stmt3 = $pdo->prepare(\"SELECT * FROM carihareketleri WHERE ch_khID = 4683\");\r\n        $stmt3->execute();\r\n        $cari_results = $stmt3->fetchAll(PDO::FETCH_ASSOC);\r\n        \r\n        if ($cari_results) {\r\n            echo \"<p style='color: green;'>✓ ch_khID = 4683 ile \" . count($cari_results) . \" kayıt bulundu:</p>\";\r\n            foreach ($cari_results as $record) {\r\n                echo \"<p>CH_ID: {$record['ch_id']}, Cari: {$record['ch_cariID']}, Alacak: {$record['ch_alacak']}, KH_ID: {$record['ch_khID']}</p>\";\r\n            }\r\n        } else {\r\n            echo \"<p style='color: red;'>✗ ch_khID = 4683 ile kayıt bulunamadı</p>\";\r\n        }\r\n    } catch(PDOException $e) {\r\n        echo \"<p style='color: red;'>Hata: \" . $e->getMessage() . \"</p>\";\r\n    }\r\n    \r\n    // Test update sorgusu (gerçekte çalıştırmayacağız, sadece syntax kontrolü)\r\n    echo \"<h3>3. Test Update Sorgusu:</h3>\";\r\n    echo \"<code>UPDATE carihareketleri SET ch_alacak = 5000 WHERE ch_khID = 4683</code>\";\r\n    \r\n} catch(PDOException $e) {\r\n    echo \"Bağlantı hatası: \" . $e->getMessage();\r\n}\r\n?>\r\n"
        }
    ]
}